// "/static/mobile/js/zepto.min.js","/static/mobile/js/gmu/gmu.js","/static/mobile/js/gmu/list.js","/static/mobile/js/gmu/page.js","/static/mobile/js/frozen/frozen.js","/static/mobile/js/swiped/swiped.js","/static/mobile/js/routie.min.js","/static/mobile/js/sdk.js","/static/mobile/js/sdk/dd_sdk.js"
/* "/static/mobile/js/zepto.min.js" */
!function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(void 0===this||null===this)throw new TypeError;var c,d=Object(this),e=d.length>>>0,f=0;if("function"!=typeof b)throw new TypeError;if(0==e&&1==arguments.length)throw new TypeError;if(arguments.length>=2)c=arguments[1];else for(;;){if(f in d){c=d[f++];break}if(++f>=e)throw new TypeError}for(;e>f;)f in d&&(c=b.call(a,c,d[f],f,d)),f++;return c})}();var Zepto=function(){function a(a){return null==a?String(a):W[X.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&a.__proto__==Object.prototype}function g(a){return a instanceof Array}function h(a){return"number"==typeof a.length}function i(a){return E.call(a,function(a){return null!=a})}function j(a){return a.length>0?y.fn.concat.apply([],a):a}function k(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in H?H[a]:H[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return"number"!=typeof b||J[k(a)]?b:b+"px"}function n(a){var b,c;return G[a]||(b=F.createElement(a),F.body.appendChild(b),c=I(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),G[a]=c),G[a]}function o(a){return"children"in a?D.call(a.children):y.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function p(a,b,c){for(x in b)c&&(f(b[x])||g(b[x]))?(f(b[x])&&!f(a[x])&&(a[x]={}),g(b[x])&&!g(a[x])&&(a[x]=[]),p(a[x],b[x],c)):b[x]!==w&&(a[x]=b[x])}function q(a,b){return b===w?y(a):y(a).filter(b)}function r(a,c,d,e){return b(c)?c.call(a,d,e):c}function s(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function t(a,b){var c=a.className,d=c&&c.baseVal!==w;return b===w?d?c.baseVal:c:(d?c.baseVal=b:a.className=b,void 0)}function u(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:isNaN(b=Number(a))?/^[\[\{]/.test(a)?y.parseJSON(a):a:b):a}catch(c){return a}}function v(a,b){b(a);for(var c in a.childNodes)v(a.childNodes[c],b)}var w,x,y,z,A,B,C=[],D=C.slice,E=C.filter,F=window.document,G={},H={},I=F.defaultView.getComputedStyle,J={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},K=/^\s*<(\w+|!)[^>]*>/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,M=/^(?:body|html)$/i,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=F.createElement("table"),Q=F.createElement("tr"),R={tr:F.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":F.createElement("div")},S=/complete|loaded|interactive/,T=/^\.([\w-]+)$/,U=/^#([\w-]*)$/,V=/^[\w-]+$/,W={},X=W.toString,Y={},Z=F.createElement("div");return Y.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=Z).appendChild(a),d=~Y.qsa(e,b).indexOf(a),f&&Z.removeChild(a),d},A=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},B=function(a){return E.call(a,function(b,c){return a.indexOf(b)==c})},Y.fragment=function(a,b,c){a.replace&&(a=a.replace(L,"<$1></$2>")),b===w&&(b=K.test(a)&&RegExp.$1),b in R||(b="*");var d,e,g=R[b];return g.innerHTML=""+a,e=y.each(D.call(g.childNodes),function(){g.removeChild(this)}),f(c)&&(d=y(e),y.each(c,function(a,b){N.indexOf(a)>-1?d[a](b):d.attr(a,b)})),e},Y.Z=function(a,b){return a=a||[],a.__proto__=y.fn,a.selector=b||"",a},Y.isZ=function(a){return a instanceof Y.Z},Y.init=function(a,c){if(a){if(b(a))return y(F).ready(a);if(Y.isZ(a))return a;var d;if(g(a))d=i(a);else if(e(a))d=[f(a)?y.extend({},a):a],a=null;else if(K.test(a))d=Y.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==w)return y(c).find(a);d=Y.qsa(F,a)}return Y.Z(d,a)}return Y.Z()},y=function(a,b){return Y.init(a,b)},y.extend=function(a){var b,c=D.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){p(a,c,b)}),a},Y.qsa=function(a,b){var c;return d(a)&&U.test(b)?(c=a.getElementById(RegExp.$1))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:D.call(T.test(b)?a.getElementsByClassName(RegExp.$1):V.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},y.contains=function(a,b){return a!==b&&a.contains(b)},y.type=a,y.isFunction=b,y.isWindow=c,y.isArray=g,y.isPlainObject=f,y.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},y.inArray=function(a,b,c){return C.indexOf.call(b,a,c)},y.camelCase=A,y.trim=function(a){return a.trim()},y.uuid=0,y.support={},y.expr={},y.map=function(a,b){var c,d,e,f=[];if(h(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return j(f)},y.each=function(a,b){var c,d;if(h(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},y.grep=function(a,b){return E.call(a,b)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()}),y.fn={forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,indexOf:C.indexOf,concat:C.concat,map:function(a){return y(y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return y(D.apply(this,arguments))},ready:function(a){return S.test(F.readyState)?a(y):F.addEventListener("DOMContentLoaded",function(){a(y)},!1),this},get:function(a){return a===w?D.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return C.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):y(E.call(this,function(b){return Y.matches(b,a)}))},add:function(a,b){return y(B(this.concat(y(a,b))))},is:function(a){return this.length>0&&Y.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==w)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):h(a)&&b(a.item)?D.call(a):y(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return y(c)},has:function(a){return this.filter(function(){return e(a)?y.contains(this,a):y(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:y(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:y(a)},find:function(a){var b,c=this;return b="object"==typeof a?y(a).filter(function(){var a=this;return C.some.call(c,function(b){return y.contains(b,a)})}):1==this.length?y(Y.qsa(this[0],a)):this.map(function(){return Y.qsa(this,a)})},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=y(a));c&&!(e?e.indexOf(c)>=0:Y.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return y(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=y.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return q(b,a)},parent:function(a){return q(B(this.pluck("parentNode")),a)},children:function(a){return q(this.map(function(){return o(this)}),a)},contents:function(){return this.map(function(){return D.call(this.childNodes)})},siblings:function(a){return q(this.map(function(a,b){return E.call(o(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return y.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==I(this,"").getPropertyValue("display")&&(this.style.display=n(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=y(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){y(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){y(this[0]).before(a=y(a));for(var b;(b=a.children()).length;)a=b.first();y(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=y(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){y(this).replaceWith(y(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=y(this);(a===w?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return y(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return y(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return a===w?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;y(this).empty().append(r(this,a,b,c))})},text:function(a){return a===w?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,b){var c;return"string"==typeof a&&b===w?0==this.length||1!==this[0].nodeType?w:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(e(a))for(x in a)s(this,x,a[x]);else s(this,a,r(this,b,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&s(this,a)})},prop:function(a,b){return b===w?this[0]&&this[0][a]:this.each(function(c){this[a]=r(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+k(a),b);return null!==c?u(c):w},val:function(a){return a===w?this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(b){this.value=r(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var c=y(this),d=r(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2&&"string"==typeof b)return this[0]&&(this[0].style[A(b)]||I(this[0],"").getPropertyValue(b));var d="";if("string"==a(b))c||0===c?d=k(b)+":"+m(b,c):this.each(function(){this.style.removeProperty(k(b))});else for(x in b)b[x]||0===b[x]?d+=k(x)+":"+m(x,b[x])+";":this.each(function(){this.style.removeProperty(k(x))});return this.each(function(){this.style.cssText+=";"+d})},index:function(a){return a?this.indexOf(y(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return C.some.call(this,function(a){return this.test(t(a))},l(a))},addClass:function(a){return this.each(function(b){z=[];var c=t(this),d=r(this,a,b,c);d.split(/\s+/g).forEach(function(a){y(this).hasClass(a)||z.push(a)},this),z.length&&t(this,c+(c?" ":"")+z.join(" "))})},removeClass:function(a){return this.each(function(b){return a===w?t(this,""):(z=t(this),r(this,a,b,z).split(/\s+/g).forEach(function(a){z=z.replace(l(a)," ")}),t(this,z.trim()),void 0)})},toggleClass:function(a,b){return this.each(function(c){var d=y(this),e=r(this,a,c,t(this));e.split(/\s+/g).forEach(function(a){(b===w?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=M.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(y(a).css("margin-top"))||0,c.left-=parseFloat(y(a).css("margin-left"))||0,d.top+=parseFloat(y(b[0]).css("border-top-width"))||0,d.left+=parseFloat(y(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||F.body;a&&!M.test(a.nodeName)&&"static"==y(a).css("position");)a=a.offsetParent;return a})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(a){y.fn[a]=function(b){var e,f=this[0],g=a.replace(/./,function(a){return a[0].toUpperCase()});return b===w?c(f)?f["inner"+g]:d(f)?f.documentElement["offset"+g]:(e=this.offset())&&e[a]:this.each(function(c){f=y(this),f.css(a,r(this,b,c,f[a]()))})}}),O.forEach(function(b,c){var d=c%2;y.fn[b]=function(){var b,e,f=y.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:Y.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null,f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return y(a).remove();v(e.insertBefore(a,b),function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},y.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return y(a)[b](this),this}}),Y.Z.prototype=y.fn,Y.uniq=B,Y.deserializeValue=u,y.zepto=Y,y}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),o=a.match(/PlayBook/),p=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),q=a.match(/Firefox\/([\d.]+)/);(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),m&&(b.bb10=!0,b.version=m[2]),n&&(b.rimtabletos=!0,b.version=n[2]),o&&(c.playbook=!0),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),p&&(c.chrome=!0,c.version=p[1]),q&&(c.firefox=!0,c.version=q[1]),b.tablet=!!(f||o||e&&!a.match(/Mobile/)||q&&a.match(/Tablet/)),b.phone=!(b.tablet||!(e||g||h||l||m||p&&a.match(/Android/)||p&&a.match(/CriOS\/([\d.]+)/)||q&&a.match(/Mobile/)))}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a){function b(a){return a._zid||(a._zid=n++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(m[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(b,c,d){"string"!=a.type(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function g(a,b){return a.del&&("focus"==a.e||"blur"==a.e)||!!b}function h(a){return p[a]||a}function i(c,e,i,j,k,l){var n=b(c),o=m[n]||(m[n]=[]);f(e,i,function(b,e){var f=d(b);f.fn=e,f.sel=j,f.e in p&&(e=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?f.fn.apply(this,arguments):void 0}),f.del=k&&k(e,b);var i=f.del||e;f.proxy=function(a){var b=i.apply(c,[a].concat(a.data));return b===!1&&(a.preventDefault(),a.stopPropagation()),b},f.i=o.length,o.push(f),c.addEventListener(h(f.e),f.proxy,g(f,l))})}function j(a,d,e,i,j){var k=b(a);f(d||"",e,function(b,d){c(a,b,d,i).forEach(function(b){delete m[k][b.i],a.removeEventListener(h(b.e),b.proxy,g(b,j))})})}function k(b){var c,d={originalEvent:b};for(c in b)s.test(c)||void 0===b[c]||(d[c]=b[c]);return a.each(t,function(a,c){d[a]=function(){return this[c]=q,b[a].apply(b,arguments)},d[c]=r}),d}function l(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var m=(a.zepto.qsa,{}),n=1,o={},p={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",a.event={add:i,remove:j},a.proxy=function(c,d){if(a.isFunction(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if("string"==typeof d)return a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){i(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){j(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){i(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return j(d,b,a),c}})})};var q=function(){return!0},r=function(){return!1},s=/^([A-Z]|layer[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){return this.each(function(e,f){i(f,c,d,b,function(c){return function(d){var e,g=a(d.target).closest(b,f).get(0);return g?(e=a.extend(k(d),{currentTarget:g,liveFired:f}),c.apply(g,[e].concat([].slice.call(arguments,1)))):void 0}})})},a.fn.undelegate=function(a,b,c){return this.each(function(){j(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return!c||a.isFunction(c)?this.bind(b,c||d):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return!c||a.isFunction(c)?this.unbind(b,c||d):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return("string"==typeof b||a.isPlainObject(b))&&(b=a.Event(b)),l(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k("string"==typeof b?a.Event(b):b),e.data=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){"string"!=typeof a&&(b=a,a=b.type);var c=document.createEvent(o[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c.isDefaultPrevented=function(){return this.defaultPrevented},c}}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.defaultPrevented}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:(c(b,d,"ajaxSend",[a,b]),void 0)}function g(a,b,d){var e=d.context,f="success";d.success.call(e,a,f,b),c(d,e,"ajaxSuccess",[b,d,a]),i(f,b,d)}function h(a,b,d,e){var f=e.context;e.error.call(f,d,b,a),c(e,f,"ajaxError",[d,e,a]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data))}function n(b,c,d,e){var f=!a.isFunction(c);return{url:b,data:f?c:void 0,success:f?a.isFunction(d)?d:void 0:c,dataType:f?e||d:d}}function o(b,c,d,e){var f,g=a.isArray(c);a.each(c,function(c,h){f=a.type(h),e&&(c=d?e:e+"["+(g?"":c)+"]"),!e&&g?b.add(h.name,h.value):"array"==f||!d&&"object"==f?o(b,h,d,c):b.add(c,h)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b){if(!("type"in b))return a.ajax(b);var c,d="jsonp"+ ++r,e=s.createElement("script"),i=function(){clearTimeout(c),a(e).remove(),delete window[d]},k=function(a){i(),a&&"timeout"!=a||(window[d]=j),h(null,a||"abort",l,b)},l={abort:k};return f(l,b)===!1?(k("abort"),!1):(window[d]=function(a){i(),g(a,l,b)},e.onerror=function(){k("error")},e.src=b.url.replace(/=\?/,"="+d),a("head").append(e),b.timeout>0&&(c=setTimeout(function(){k("timeout")},b.timeout)),l)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{});for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c),c.cache===!1&&(c.url=l(c.url,"_="+Date.now()));var e=c.dataType,i=/=\?/.test(c.url);if("jsonp"==e||i)return i||(c.url=l(c.url,"callback=?")),a.ajaxJSONP(c);var n,o=c.accepts[e],r={},s=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,t=c.xhr();c.crossDomain||(r["X-Requested-With"]="XMLHttpRequest"),o&&(r.Accept=o,o.indexOf(",")>-1&&(o=o.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(o)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&(r["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=a.extend(r,c.headers||{}),t.onreadystatechange=function(){if(4==t.readyState){t.onreadystatechange=j,clearTimeout(n);var b,d=!1;if(t.status>=200&&t.status<300||304==t.status||0==t.status&&"file:"==s){e=e||k(t.getResponseHeader("content-type")),b=t.responseText;try{"script"==e?(1,eval)(b):"xml"==e?b=t.responseXML:"json"==e&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",t,c):g(b,t,c)}else h(null,t.status?"error":"abort",t,c)}};var u="async"in c?c.async:!0;t.open(c.type,c.url,u);for(q in c.headers)t.setRequestHeader(q,c.headers[q]);return f(t,c)===!1?(t.abort(),!1):(c.timeout>0&&(n=setTimeout(function(){t.onreadystatechange=j,t.abort(),h(null,"timeout",t,c)},c.timeout)),t.send(c.data?c.data:null),t)},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c=[];return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a,b){function c(a){return d(a.replace(/([a-z])([A-Z])/,"$1-$2"))}function d(a){return a.toLowerCase()}function e(a){return f?f+a:d(a)}var f,g,h,i,j,k,l,m,n="",o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},p=window.document,q=p.createElement("div"),r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,s={};a.each(o,function(a,c){return q.style[a+"TransitionProperty"]!==b?(n="-"+d(a)+"-",f=c,!1):void 0}),g=n+"transform",s[h=n+"transition-property"]=s[i=n+"transition-duration"]=s[j=n+"transition-timing-function"]=s[k=n+"animation-name"]=s[l=n+"animation-duration"]=s[m=n+"animation-timing-function"]="",a.fx={off:f===b&&q.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:e("TransitionEnd"),animationEnd:e("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isPlainObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c=("number"==typeof c?c:a.fx.speeds[c]||a.fx.speeds._default)/1e3),this.anim(b,c,d,e)},a.fn.anim=function(d,e,f,n){var o,p,q,t={},u="",v=this,w=a.fx.transitionEnd;if(e===b&&(e=.4),a.fx.off&&(e=0),"string"==typeof d)t[k]=d,t[l]=e+"s",t[m]=f||"linear",w=a.fx.animationEnd;else{p=[];for(o in d)r.test(o)?u+=o+"("+d[o]+") ":(t[o]=d[o],p.push(c(o)));u&&(t[g]=u,p.push(g)),e>0&&"object"==typeof d&&(t[h]=p.join(", "),t[i]=e+"s",t[j]=f||"linear")}return q=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(w,q)}a(this).css(s),n&&n.call(this)},e>0&&this.bind(w,q),this.size()&&this.get(0).clientLeft,this.css(t),0>=e&&setTimeout(function(){v.each(function(){q.call(this)})},0),this},q=null}(Zepto);
/* "/static/mobile/js/gmu/gmu.js" */
var gmu=gmu||{version:'@version',$:window.Zepto,staticCall:(function($){var proto=$.fn,slice=[].slice,instance=$();instance.length=1;return function(item,fn){instance[0]=item;return proto[fn].apply(instance,slice.call(arguments,2));};})(Zepto)};(function(gmu,$){var slice=[].slice,separator=/\s+/,returnFalse=function(){return false;},returnTrue=function(){return true;};function eachEvent(events,callback,iterator){(events||'').split(separator).forEach(function(type){iterator(type,callback);});}
function matcherFor(ns){return new RegExp('(?:^| )'+ns.replace(' ',' .* ?')+'(?: |$)');}
function parse(name){var parts=(''+name).split('.');return{e:parts[0],ns:parts.slice(1).sort().join(' ')};}
function findHandlers(arr,name,callback,context){var matcher,obj;obj=parse(name);obj.ns&&(matcher=matcherFor(obj.ns));return arr.filter(function(handler){return handler&&(!obj.e||handler.e===obj.e)&&(!obj.ns||matcher.test(handler.ns))&&(!callback||handler.cb===callback||handler.cb._cb===callback)&&(!context||handler.ctx===context);});}
function Event(type,props){if(!(this instanceof Event)){return new Event(type,props);}
props&&$.extend(this,props);this.type=type;return this;}
Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,preventDefault:function(){this.isDefaultPrevented=returnTrue;},stopPropagation:function(){this.isPropagationStopped=returnTrue;}};gmu.event={on:function(name,callback,context){var me=this,set;if(!callback){return this;}
set=this._events||(this._events=[]);eachEvent(name,callback,function(name,callback){var handler=parse(name);handler.cb=callback;handler.ctx=context;handler.ctx2=context||me;handler.id=set.length;set.push(handler);});return this;},one:function(name,callback,context){var me=this;if(!callback){return this;}
eachEvent(name,callback,function(name,callback){var once=function(){me.off(name,once);return callback.apply(context||me,arguments);};once._cb=callback;me.on(name,once,context);});return this;},off:function(name,callback,context){var events=this._events;if(!events){return this;}
if(!name&&!callback&&!context){this._events=[];return this;}
eachEvent(name,callback,function(name,callback){findHandlers(events,name,callback,context).forEach(function(handler){delete events[handler.id];});});return this;},trigger:function(evt){var i=-1,args,events,stoped,len,ev;if(!this._events||!evt){return this;}
typeof evt==='string'&&(evt=new Event(evt));args=slice.call(arguments,1);evt.args=args;args.unshift(evt);events=findHandlers(this._events,evt.type);if(events){len=events.length;while(++i<len){if((stoped=evt.isPropagationStopped())||false===(ev=events[i]).cb.apply(ev.ctx2,args)){stoped||(evt.stopPropagation(),evt.preventDefault());break;}}}
return this;}};gmu.Event=Event;})(gmu,gmu.$);(function($,undefined){$.parseTpl=function(str,data){var tmpl='var __p=[];'+'with(obj||{}){__p.push(\''+
str.replace(/\\/g,'\\\\').replace(/'/g,'\\\'').replace(/<%=([\s\S]+?)%>/g,function(match,code){return'\','+code.replace(/\\'/,'\'')+',\'';}).replace(/<%([\s\S]+?)%>/g,function(match,code){return'\');'+code.replace(/\\'/,'\'').replace(/[\r\n\t]/g,' ')+'__p.push(\'';}).replace(/\r/g,'\\r').replace(/\n/g,'\\n').replace(/\t/g,'\\t')+'\');}return __p.join("");',func=new Function('obj',tmpl);return data?func(data):func;};})(Zepto);(function(gmu,$,undefined){var slice=[].slice,toString=Object.prototype.toString,blankFn=function(){},staticlist=['options','template','tpl2html'],record=(function(){var data={},id=0,ikey='_gid';return function(obj,key,val){var dkey=obj[ikey]||(obj[ikey]=++id),store=data[dkey]||(data[dkey]={});val!==undefined&&(store[key]=val);val===null&&delete store[key];return store[key];};})(),event=gmu.event;function isPlainObject(obj){return toString.call(obj)==='[object Object]';}
function eachObject(obj,iterator){obj&&Object.keys(obj).forEach(function(key){iterator(key,obj[key]);});}
function parseData(data){try{data=data==='true'?true:data==='false'?false:data==='null'?null:+data+''===data?+data:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(data)?JSON.parse(data):data;}catch(ex){data=undefined;}
return data;}
function getDomOptions(el){var ret={},attrs=el&&el.attributes,len=attrs&&attrs.length,key,data;while(len--){data=attrs[len];key=data.name;if(key.substring(0,5)!=='data-'){continue;}
key=key.substring(5);data=parseData(data.value);data===undefined||(ret[key]=data);}
return ret;}
function zeptolize(name){var key=name.substring(0,1).toLowerCase()+name.substring(1),old=$.fn[key];$.fn[key]=function(opts){var args=slice.call(arguments,1),method=typeof opts==='string'&&opts,ret,obj;$.each(this,function(i,el){obj=record(el,name)||new gmu[name](el,isPlainObject(opts)?opts:undefined);if(method==='this'){ret=obj;return false;}else if(method){if(!$.isFunction(obj[method])){throw new Error('组件没有此方法：'+method);}
ret=obj[method].apply(obj,args);if(ret!==undefined&&ret!==obj){return false;}
ret=undefined;}});return ret!==undefined?ret:this;};$.fn[key].noConflict=function(){$.fn[key]=old;return this;};}
function loadOption(klass,opts){var me=this;if(klass.superClass){loadOption.call(me,klass.superClass,opts);}
eachObject(record(klass,'options'),function(key,option){option.forEach(function(item){var condition=item[0],fn=item[1];if(condition==='*'||($.isFunction(condition)&&condition.call(me,opts[key]))||condition===opts[key]){fn.call(me);}});});}
function loadPlugins(klass,opts){var me=this;if(klass.superClass){loadPlugins.call(me,klass.superClass,opts);}
eachObject(record(klass,'plugins'),function(opt,plugin){if(opts[opt]===false){return;}
eachObject(plugin,function(key,val){var oringFn;if($.isFunction(val)&&(oringFn=me[key])){me[key]=function(){var origin=me.origin,ret;me.origin=oringFn;ret=val.apply(me,arguments);origin===undefined?delete me.origin:(me.origin=origin);return ret;};}else{me[key]=val;}});plugin._init.call(me);});}
function mergeObj(){var args=slice.call(arguments),i=args.length,last;while(i--){last=last||args[i];isPlainObject(args[i])||args.splice(i,1);}
return args.length?$.extend.apply(null,[true,{}].concat(args)):last;}
function bootstrap(name,klass,uid,el,options){var me=this,opts;if(isPlainObject(el)){options=el;el=undefined;}
options&&options.el&&(el=$(options.el));el&&(me.$el=$(el),el=me.$el[0]);opts=me._options=mergeObj(klass.options,getDomOptions(el),options);me.template=mergeObj(klass.template,opts.template);me.tpl2html=mergeObj(klass.tpl2html,opts.tpl2html);me.widgetName=name.toLowerCase();me.eventNs='.'+me.widgetName+uid;me._init(opts);me._options.setup=(me.$el&&me.$el.parent()[0])?true:false;loadOption.call(me,klass,opts);loadPlugins.call(me,klass,opts);me._create();me.trigger('ready');el&&record(el,name,me)&&me.on('destroy',function(){record(el,name,null);});return me;}
function createClass(name,object,superClass){if(typeof superClass!=='function'){superClass=gmu.Base;}
var uuid=1,suid=1;function klass(el,options){if(name==='Base'){throw new Error('Base类不能直接实例化');}
if(!(this instanceof klass)){return new klass(el,options);}
return bootstrap.call(this,name,klass,uuid++,el,options);}
$.extend(klass,{register:function(name,obj){var plugins=record(klass,'plugins')||record(klass,'plugins',{});obj._init=obj._init||blankFn;plugins[name]=obj;return klass;},option:function(option,value,method){var options=record(klass,'options')||record(klass,'options',{});options[option]||(options[option]=[]);options[option].push([value,method]);return klass;},inherits:function(obj){return createClass(name+'Sub'+suid++,obj,klass);},extend:function(obj){var proto=klass.prototype,superProto=superClass.prototype;staticlist.forEach(function(item){obj[item]=mergeObj(superClass[item],obj[item]);obj[item]&&(klass[item]=obj[item]);delete obj[item];});eachObject(obj,function(key,val){if(typeof val==='function'&&superProto[key]){proto[key]=function(){var $super=this.$super,ret;this.$super=function(){var args=slice.call(arguments,1);return superProto[key].apply(this,args);};ret=val.apply(this,arguments);$super===undefined?(delete this.$super):(this.$super=$super);return ret;};}else{proto[key]=val;}});}});klass.superClass=superClass;klass.prototype=Object.create(superClass.prototype);klass.extend(object);return klass;}
gmu.define=function(name,object,superClass){gmu[name]=createClass(name,object,superClass);zeptolize(name);};gmu.isWidget=function(obj,klass){klass=typeof klass==='string'?gmu[klass]||blankFn:klass;klass=klass||gmu.Base;return obj instanceof klass;};gmu.Base=createClass('Base',{_init:blankFn,_create:blankFn,getEl:function(){return this.$el;},on:event.on,one:event.one,off:event.off,trigger:function(name){var evt=typeof name==='string'?new gmu.Event(name):name,args=[evt].concat(slice.call(arguments,1)),opEvent=this._options[evt.type],$el=this.getEl();if(opEvent&&$.isFunction(opEvent)){false===opEvent.apply(this,args)&&(evt.stopPropagation(),evt.preventDefault());}
event.trigger.apply(this,args);$el&&$el.triggerHandler(evt,(args.shift(),args));return this;},tpl2html:function(subpart,data){var tpl=this.template;tpl=typeof subpart==='string'?tpl[subpart]:((data=subpart),tpl);return data||~tpl.indexOf('<%')?$.parseTpl(tpl,data):tpl;},destroy:function(){this.$el&&this.$el.off(this.eventNs);this.trigger('destroy');this.off();this.destroyed=true;}},Object);$.ui=gmu;})(gmu,gmu.$);(function($){$.extend($,{throttle:function(delay,fn,debounce_mode){var last=0,timeId;if(typeof fn!=='function'){debounce_mode=fn;fn=delay;delay=250;}
function wrapper(){var that=this,period=Date.now()-last,args=arguments;function exec(){last=Date.now();fn.apply(that,args);};function clear(){timeId=undefined;};if(debounce_mode&&!timeId){exec();}
timeId&&clearTimeout(timeId);if(debounce_mode===undefined&&period>delay){exec();}else{timeId=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-period:delay);}};wrapper._zid=fn._zid=fn._zid||$.proxy(fn)._zid;return wrapper;},debounce:function(delay,fn,t){return fn===undefined?$.throttle(250,delay,false):$.throttle(delay,fn,t===undefined?false:t!==false);}});})(Zepto);(function($,win){function registerScrollStop(){$(win).on('scroll',$.debounce(80,function(){$(win).trigger('scrollStop');},false));}
function backEventOffHandler(){$(win).off('scroll');registerScrollStop();}
registerScrollStop();$(win).on('pageshow',function(e){e.persisted&&$(win).off('touchstart',backEventOffHandler).one('touchstart',backEventOffHandler);});})(Zepto,window);(function($){$.matchMedia=(function(){var mediaId=0,cls='gmu-media-detect',transitionEnd=$.fx.transitionEnd,cssPrefix=$.fx.cssPrefix,$style=$('<style></style>').append('.'+cls+'{'+cssPrefix+'transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n').appendTo('head');return function(query){var id=cls+mediaId++,$mediaElem,listeners=[],ret;$style.append('@media '+query+' { #'+id+' { width: 1px; } }\n');$mediaElem=$('<div class="'+cls+'" id="'+id+'"></div>').appendTo('body').on(transitionEnd,function(){ret.matches=$mediaElem.width()===1;$.each(listeners,function(i,fn){$.isFunction(fn)&&fn.call(ret,ret);});});ret={matches:$mediaElem.width()===1,media:query,addListener:function(callback){listeners.push(callback);return this;},removeListener:function(callback){var index=listeners.indexOf(callback);~index&&listeners.splice(index,1);return this;}};return ret;};}());})(Zepto);$(function(){$.mediaQuery={ortchange:'screen and (width: '+window.innerWidth+'px)'};$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger('ortchange');});});(function($,undefined){$.extend($.fn,{fix:function(opts){var me=this;if(me.attr('isFixed'))return me;me.css(opts).css('position','fixed').attr('isFixed',true);var buff=$('<div style="position:fixed;top:10px;"></div>').appendTo('body'),top=buff[0].getBoundingClientRect().top,checkFixed=function(){if(window.pageYOffset>0){if(buff[0].getBoundingClientRect().top!==top){me.css('position','absolute');doFixed();$(window).on('scrollStop',doFixed);$(window).on('ortchange',doFixed);}
$(window).off('scrollStop',checkFixed);buff.remove();}},doFixed=function(){me.css({top:window.pageYOffset+(opts.bottom!==undefined?window.innerHeight-me.height()-opts.bottom:(opts.top||0)),left:opts.right!==undefined?document.body.offsetWidth-me.width()-opts.right:(opts.left||0)});opts.width=='100%'&&me.css('width',document.body.offsetWidth);};$(window).on('scrollStop',checkFixed);return me;}});}(Zepto));(function(gmu,$,undefined){gmu.define('Add2desktop',{options:{icon:'',container:'',key:'_gmu_adddesktop_key',useFix:true,position:{bottom:12,left:'50%'},beforeshow:function(e){this.key()&&e.preventDefault()},afterhide:function(){this.key(1)},_isShow:false},_init:function(){var me=this;me.on('ready',function(){me.$el.find('.ui-add2desktop-close').on('click',function(){me.hide();});me._options['useFix']&&me.$el.fix(me._options['position']);me.show();});me.on('destroy',function(){me.$el.remove();});},_create:function(){var me=this,$el,version=($.os.version&&$.os.version.substr(0,3)>4.1?'new':'old');if($.os.version&&$.os.version.substr(0,3)>=7.0){version='iOS7';}
if(me._options.setup){var src=me.$el.children('img').attr('src');src&&(me._options['icon']=src);}
$el=me.$el||(me.$el=$('<div></div>'));$el.addClass('ui-add2desktop').appendTo(me._options['container']||(me.$el.parent().length?'':document.body)),$el.html('<img src="'+me._options['icon']+'"/><p>先点击<span class="ui-add2desktop-icon-'+version+'"></span>，<br />再"添加到主屏幕"</p><span class="ui-add2desktop-close"><b></b></span><div class="ui-add2desktop-arrow"><b></b></div>');},key:function(value){var ls=window.localStorage;return value!==undefined?ls.setItem(this._options['key'],value):ls.getItem(this._options['key']);},show:function(){var me=this;if(!me._options['_isShow']){if(!$.os.ios||$.browser.uc||$.browser.qq||$.browser.chrome)return me;var event=new gmu.Event('beforeshow');me.trigger(event);if(event.isDefaultPrevented())return me;me.$el.css('display','block');me._options['_isShow']=true;}
return me;},hide:function(){var me=this;if(me._options['_isShow']){me.$el.css('display','none');me._options['_isShow']=false;me.trigger('afterhide');}
return me;}});})(gmu,gmu.$);(function($){var $doc=$(document),$el,timer;function dismiss(){var cls=$el.attr('hl-cls');clearTimeout(timer);$el.removeClass(cls).removeAttr('hl-cls');$el=null;$doc.off('touchend touchmove touchcancel',dismiss);}
$.fn.highlight=function(className,selector){return this;return this.each(function(){var $this=$(this);$this.css('-webkit-tap-highlight-color','rgba(255,255,255,0)').off('touchstart.hl');className&&$this.on('touchstart.hl',function(e){var match;$el=selector?(match=$(e.target).closest(selector,this))&&match.length&&match:$this;if($el&&$el.addClass){$el.attr('hl-cls',className);timer=setTimeout(function(){$el&&$el.addClass&&$el.addClass(className);},100);$doc.on('touchend touchmove touchcancel',dismiss);}});});};})(Zepto);(function(gmu,$,undefined){gmu.define('Button',{options:{iconpos:'left'},template:{icon:'<span class="ui-icon ui-icon-<%= name %>"></span>',text:'<span class="ui-btn-text"><%= text %></span>'},_getWrap:function($el){return $el;},_init:function(){var me=this;me.$el=me.$el===undefined?$('<span/>').appendTo(document.body):me.$el;},_create:function(){var me=this,opts=me._options,$wrap=me.$wrap=me._getWrap(me.getEl()),input=$wrap.is('input'),$label=$wrap.find('.ui-btn-text'),$icon=$wrap.find('.ui-icon');opts.label=opts.label===undefined?$wrap[input?'val':'text']():opts.label;input||opts.label===undefined||!$label.length&&($label=$(me.tpl2html('text',{text:opts.label}))).appendTo($wrap.empty());me.$label=$label.length&&$label;opts.resetText=opts.resetText||opts.label;input||opts.icon&&!$icon.length&&($icon=$(me.tpl2html('icon',{name:opts.icon}))).appendTo($wrap);me.$icon=$icon.length&&$icon;$wrap.addClass('ui-btn '+(opts.label&&opts.icon?'ui-btn-icon-'+opts.iconpos:opts.label?'ui-btn-text-only':'ui-btn-icon-only'));opts.state&&setTimeout(function(){me.state(opts.state);},0);},state:function(state){if(state===undefined){return this._state;}
var me=this,$wrap=me.$wrap,input=$wrap.is('input'),text=me._options[state+'Text'];me.$wrap.removeClass('ui-state-'+me._state).addClass('ui-state-'+state);text===undefined||(input?$wrap:me.$label)[input?'val':'text'](text);me._state!==state&&me.trigger('statechange',state,me._state);me._state=state;return me;},toggle:function(){this.state(this._state==='active'?'reset':'active');return this;}});$(function(){$(document.body).highlight('ui-state-hover','.ui-btn:not(.ui-state-disabled)');});})(gmu,gmu.$);(function(gmu,$){var uid=0;gmu.Button.register('input',{_getWrap:function($el){var id,el,$wrap;if($el.is('input[type="checkbox"], input[type="radio"]')){el=$el.addClass('ui-hidden')[0];(id=el.id)||(el.id=id='input_btn_'+uid++);$wrap=$('label[for='+id+']',el.form||el.ownerDocument||undefined);$wrap.length||($wrap=$('<label for="'+id+'"></label>').insertBefore($el));$el.prop('checked')&&(this._options.state='active');return $wrap;}
return $el;},toggle:function(){var $el=this.$el;if($el.is('input[type="radio"]')){$radios=$("[name='"+$el.attr('name')+"']",$el[0].form||$el[0].ownerDocument||undefined);$radios.button('state','reset');}
return this.origin.apply(this,arguments);},state:function(state){var $el=this.$el;if($el.is('input[type="checkbox"], input[type="radio"]')){$el.prop('disabled',state==='disabled');}
return this.origin.apply(this,arguments);}});$(function(){$(document.body).on('click.button','label.ui-btn:not(.ui-state-disabled)',function(){$('#'+this.getAttribute('for')).button('toggle');});});})(gmu,gmu.$);;(function($){var touch={},touchTimeout,tapTimeout,swipeTimeout,longTapDelay=750,longTapTimeout
function parentIfText(node){return'tagName'in node?node:node.parentNode}
function swipeDirection(x1,x2,y1,y2){var xDelta=Math.abs(x1-x2),yDelta=Math.abs(y1-y2)
return xDelta>=yDelta?(x1-x2>0?'Left':'Right'):(y1-y2>0?'Up':'Down')}
function longTap(){longTapTimeout=null
if(touch.last){touch.el.trigger('longTap')
touch={}}}
function cancelLongTap(){if(longTapTimeout)clearTimeout(longTapTimeout)
longTapTimeout=null}
function cancelAll(){if(touchTimeout)clearTimeout(touchTimeout)
if(tapTimeout)clearTimeout(tapTimeout)
if(swipeTimeout)clearTimeout(swipeTimeout)
if(longTapTimeout)clearTimeout(longTapTimeout)
touchTimeout=tapTimeout=swipeTimeout=longTapTimeout=null
touch={}}
$(document).ready(function(){var now,delta
$(document.body).bind('touchstart',function(e){now=Date.now()
delta=now-(touch.last||now)
touch.el=$(parentIfText(e.touches[0].target))
touchTimeout&&clearTimeout(touchTimeout)
touch.x1=e.touches[0].pageX
touch.y1=e.touches[0].pageY
if(delta>0&&delta<=250)touch.isDoubleTap=true
touch.last=now
longTapTimeout=setTimeout(longTap,longTapDelay)}).bind('touchmove',function(e){cancelLongTap()
touch.x2=e.touches[0].pageX
touch.y2=e.touches[0].pageY
if(Math.abs(touch.x1-touch.x2)>10)
e.preventDefault()}).bind('touchend',function(e){cancelLongTap()
if((touch.x2&&Math.abs(touch.x1-touch.x2)>30)||(touch.y2&&Math.abs(touch.y1-touch.y2)>30))
swipeTimeout=setTimeout(function(){touch.el.trigger('swipe')
touch.el.trigger('swipe'+(swipeDirection(touch.x1,touch.x2,touch.y1,touch.y2)))
touch={}},0)
else if('last'in touch)
tapTimeout=setTimeout(function(){var event=$.Event('tap')
event.cancelTouch=cancelAll
touch.el.trigger(event)
if(touch.isDoubleTap){touch.el.trigger('doubleTap')
touch={}}
else{touchTimeout=setTimeout(function(){touchTimeout=null
touch.el.trigger('singleTap')
touch={}},250)}},0)}).bind('touchcancel',cancelAll)
$(window).bind('scroll',cancelAll)});['swipe','swipeLeft','swipeRight','swipeUp','swipeDown','doubleTap','tap','singleTap','longTap'].forEach(function(m){$.fn[m]=function(callback){return this.bind(m,callback)}})})(Zepto);(function(gmu,$,undefined){var monthNames=["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],dayNames=["日","一","二","三","四","五","六"],offsetRE=/^(\+|\-)?(\d+)(M|Y)$/i,getDaysInMonth=function(year,month){return 32-new Date(year,month,32).getDate();},getFirstDayOfMonth=function(year,month){return new Date(year,month,1).getDay();},formatNumber=function(val,len){var num=""+val;while(num.length<len){num="0"+num;}
return num;},getVal=function(elem){return elem.is('select, input')?elem.val():elem.attr('data-value');},prototype;gmu.define('Calendar',{options:{date:null,firstDay:1,maxDate:null,minDate:null,swipeable:false,monthChangeable:false,yearChangeable:false},_init:function(){this.on('ready',function(){var opts=this._options,el=this._container||this.$el,eventHandler=$.proxy(this._eventHandler,this);this.minDate(opts.minDate).maxDate(opts.maxDate).date(opts.date||new Date()).refresh();el.addClass('ui-calendar').on('click',eventHandler).highlight();opts.swipeable&&el.on('swipeLeft swipeRight',eventHandler);});},_create:function(){var $el=this.$el;if(!$el){$el=this.$el=$('<div>');}
$el.appendTo(this._options['container']||($el.parent().length?'':document.body));},_eventHandler:function(e){var opts=this._options,root=(this._container||this.$el).get(0),match,target,cell,date,elems;switch(e.type){case'swipeLeft':case'swipeRight':return this.switchMonthTo((e.type=='swipeRight'?'-':'+')+'1M');case'change':elems=$('.ui-calendar-header .ui-calendar-year, '+'.ui-calendar-header .ui-calendar-month',this._el);return this.switchMonthTo(getVal(elems.eq(1)),getVal(elems.eq(0)));default:target=e.target;if((match=$(target).closest('.ui-calendar-calendar tbody a',root))&&match.length){e.preventDefault();cell=match.parent();this._option('selectedDate',date=new Date(cell.attr('data-year'),cell.attr('data-month'),match.text()));this.trigger('select',date,$.calendar.formatDate(date),this);this.refresh();}else if((match=$(target).closest('.ui-calendar-prev, .ui-calendar-next',root))&&match.length){e.preventDefault();this.switchMonthTo((match.is('.ui-calendar-prev')?'-':'+')+'1M');}}},_option:function(key,val){var opts=this._options,date,minDate,maxDate;if(val!==undefined){switch(key){case'minDate':case'maxDate':opts[key]=val?$.calendar.parseDate(val):null;break;case'selectedDate':minDate=opts.minDate;maxDate=opts.maxDate;val=$.calendar.parseDate(val);val=minDate&&minDate>val?minDate:maxDate&&maxDate<val?maxDate:val;opts._selectedYear=opts._drawYear=val.getFullYear();opts._selectedMonth=opts._drawMonth=val.getMonth();opts._selectedDay=val.getDate();break;case'date':this._option('selectedDate',val);opts[key]=this._option('selectedDate');break;default:opts[key]=val;}
opts._invalid=true;return this;}
return key=='selectedDate'?new Date(opts._selectedYear,opts._selectedMonth,opts._selectedDay):opts[key];},switchToToday:function(){var today=new Date();return this.switchMonthTo(today.getMonth(),today.getFullYear());},switchMonthTo:function(month,year){var opts=this._options,minDate=this.minDate(),maxDate=this.maxDate(),offset,period,tmpDate;if(Object.prototype.toString.call(month)==='[object String]'&&offsetRE.test(month)){offset=RegExp.$1=='-'?-parseInt(RegExp.$2,10):parseInt(RegExp.$2,10);period=RegExp.$3.toLowerCase();month=opts._drawMonth+(period=='m'?offset:0);year=opts._drawYear+(period=='y'?offset:0);}else{month=parseInt(month,10);year=parseInt(year,10);}
tmpDate=new Date(year,month,1);tmpDate=minDate&&minDate>tmpDate?minDate:maxDate&&maxDate<tmpDate?maxDate:tmpDate;month=tmpDate.getMonth();year=tmpDate.getFullYear();if(month!=opts._drawMonth||year!=opts._drawYear){this.trigger('monthchange',opts._drawMonth=month,opts._drawYear=year,this);opts._invalid=true;this.refresh();}
return this;},refresh:function(){var opts=this._options,el=this._container||this.$el,eventHandler=$.proxy(this._eventHandler,this);if(!opts._invalid){return;}
$('.ui-calendar-calendar td:not(.ui-state-disabled), .ui-calendar-header a',el).highlight();$('.ui-calendar-header select',el).off('change',eventHandler);el.empty().append(this._generateHTML());$('.ui-calendar-calendar td:not(.ui-state-disabled), .ui-calendar-header a',el).highlight('ui-state-hover');$('.ui-calendar-header select',el).on('change',eventHandler);opts._invalid=false;return this;},destroy:function(){var el=this._container||this.$el,eventHandler=this._eventHandler;$('.ui-calendar-calendar td:not(.ui-state-disabled)',el).highlight();$('.ui-calendar-header select',el).off('change',eventHandler);el.remove();return this.$super('destroy');},_generateHTML:function(){var opts=this._options,drawYear=opts._drawYear,drawMonth=opts._drawMonth,tempDate=new Date(),today=new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate()),minDate=this.minDate(),maxDate=this.maxDate(),selectedDate=this.selectedDate(),html='',i,j,firstDay,day,leadDays,daysInMonth,rows,printDate;firstDay=(isNaN(firstDay=parseInt(opts.firstDay,10))?0:firstDay);html+=this._renderHead(opts,drawYear,drawMonth,minDate,maxDate)+'<table  class="ui-calendar-calendar"><thead><tr>';for(i=0;i<7;i++){day=(i+firstDay)%7;html+='<th'+((i+firstDay+6)%7>=5?' class="ui-calendar-week-end"':'')+'>'+'<span>'+dayNames[day]+'</span></th>';}
html+='</thead></tr><tbody><tr class="ui-calendar-gap">'+'<td colspan="7">&#xa0;</td></tr>';daysInMonth=getDaysInMonth(drawYear,drawMonth);leadDays=(getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;rows=Math.ceil((leadDays+daysInMonth)/ 7);printDate=new Date(drawYear,drawMonth,1-leadDays);for(i=0;i<rows;i++){html+='<tr>';for(j=0;j<7;j++){html+=this._renderDay(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate);printDate.setDate(printDate.getDate()+1);}
html+='</tr>';}
html+='</tbody></table>';return html;},_renderHead:function(data,drawYear,drawMonth,minDate,maxDate){var html='<div class="ui-calendar-header">',lpd=new Date(drawYear,drawMonth,-1),fnd=new Date(drawYear,drawMonth+1,1),i,max;html+='<a class="ui-calendar-prev'+(minDate&&minDate>lpd?' ui-state-disable':'')+'" href="#">&lt;&lt;</a><div class="ui-calendar-title">';if(data.yearChangeable){html+='<select class="ui-calendar-year">';for(i=Math.max(1970,drawYear-10),max=i+20;i<max;i++){html+='<option value="'+i+'" '+(i==drawYear?'selected="selected"':'')+'>'+i+'年</option>';}
html+='</select>';}else{html+='<span class="ui-calendar-year" data-value="'+drawYear+'">'+drawYear+'年'+'</span>';}
if(data.monthChangeable){html+='<select class="ui-calendar-month">';for(i=0;i<12;i++){html+='<option value="'+i+'" '+(i==drawMonth?'selected="selected"':'')+'>'+monthNames[i]+'</option>';}
html+='</select>';}else{html+='<span class="ui-calendar-month" data-value="'+drawMonth+'">'+monthNames[drawMonth]+'</span>';}
html+='</div><a class="ui-calendar-next'+(maxDate&&maxDate<fnd?' ui-state-disable':'')+'" href="#">&gt;&gt;</a></div>';return html;},_renderDay:function(j,printDate,firstDay,drawMonth,selectedDate,today,minDate,maxDate){var otherMonth=(printDate.getMonth()!==drawMonth),unSelectable;unSelectable=otherMonth||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);return"<td class='"+((j+firstDay+6)%7>=5?"ui-calendar-week-end":"")+
(unSelectable?" ui-calendar-unSelectable ui-state-disabled":"")+
(otherMonth||unSelectable?'':(printDate.getTime()===selectedDate.getTime()?" ui-calendar-current-day":"")+
(printDate.getTime()===today.getTime()?" ui-calendar-today":""))+"'"+
(unSelectable?"":" data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth?"&#xa0;":(unSelectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===selectedDate.getTime()?" ui-state-active":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";}});prototype=gmu.Calendar.prototype;$.each(['maxDate','minDate','date','selectedDate'],function(i,name){prototype[name]=function(val){return this._option(name,val);}});$.calendar={parseDate:function(obj){var dateRE=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return Object.prototype.toString.call(obj)==='[object Date]'?obj:dateRE.test(obj)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null;},formatDate:function(date){return date.getFullYear()+'-'+formatNumber(date.getMonth()+1,2)+'-'+formatNumber(date.getDate(),2);}}})(gmu,gmu.$);(function(gmu,$){function SlideUp(div,cb){var
holder=$('<span class="ui-holder"></span>'),root=$('<div class="ui-slideup-wrap">'+'   <div class="ui-slideup">'+'       <div class="header">'+'           <span class="ok-btn">确认</span>'+'           <span class="no-btn">取消</span>'+'       </div>'+'       <div class="frame"></div>'+'   </div>'+'</div>'),sDiv=$('.ui-slideup',root),frame=$('.frame',sDiv),obj={refresh:function(callback){root.css({top:window.pageYOffset+'px',height:window.innerHeight+'px'});sDiv.animate({translateY:'-'+sDiv.height()+'px',translateZ:'0'},400,'ease-out',function(){callback&&callback.call(obj);});},close:function(callback){var count=SlideUp.count=SlideUp.count-1;root.off('click.slideup'+id);sDiv.animate({translateY:'0',translateZ:'0'},200,'ease-out',function(){callback&&callback();holder.replaceWith(div);root.remove();count===0&&$(document).off('touchmove.slideup');}).find('.ok-btn, .no-btn').highlight();return obj;}},id=SlideUp.id=(SlideUp.id>>>0)+1,count;frame.append(div.replaceWith(holder));count=SlideUp.count=(SlideUp.count>>>0)+1;count===1&&$(document).on('touchmove.slideup',function(e){e.preventDefault();});root.on('click.slideup'+id,'.ok-btn, .no-btn',function(){cb.call(obj,$(this).is('.ok-btn'))!==false&&obj.close();}).appendTo(document.body).find('.ok-btn, .no-btn').highlight('ui-state-hover');obj.refresh();return obj;}
gmu.Calendar.register('picker',{_create:function(){var el=this.$el;if(!el){throw new Error("请指定日期选择器的赋值对象");}},_init:function(){var el=this.$el,opts=this._options;this._container=$('<div></div>');opts.date||(opts.date=el[el.is('select, input')?'val':'text']());$(window).on('ortchange',$.proxy(this._eventHandler,this));this.on('commit',function(e,date){var str=$.calendar.formatDate(date);el[el.is('select, input')?'val':'text'](str);});this.on('destroy',function(){$(window).off('ortchange',this._eventHandler);this._frame&&this._frame.close();});},_eventHandler:function(e){if(e.type==='ortchange'){this._frame&&this._frame.refresh();}else{this.origin(e);}},show:function(){var me=this,el;if(this._visible){return this;}
el=this._container;this._visible=true;this.refresh();this._frame=SlideUp(el,function(confirm){var date;if(confirm){date=me._option('selectedDate');me.trigger('commit',date,$.calendar.formatDate(date),me);me._option('date',date);}else{me._option('selectedDate',me._option('date'));}
me.hide();return false;});return this.trigger('show',this);},hide:function(){var me=this,event;if(!this._visible){return this;}
event=new gmu.Event('beforehide');this.trigger(event,this);if(event.isDefaultPrevented()){return this;}
this._visible=false;this._frame.close(function(){me.trigger&&me.trigger('hide');});this._frame=null;return this;}});})(gmu,gmu.$);(function(gmu,$,undefined){var tpl={close:'<a class="ui-dialog-close" title="关闭"><span class="ui-icon ui-icon-delete"></span></a>',mask:'<div class="ui-mask"></div>',title:'<div class="ui-dialog-title">'+'<h3><%=title%></h3>'+'</div>',wrap:'<div class="ui-dialog">'+'<div class="ui-dialog-content"></div>'+'<% if(btns){ %>'+'<div class="ui-dialog-btns">'+'<% for(var i=0, length=btns.length; i<length; i++){var item = btns[i]; %>'+'<a class="ui-btn ui-btn-<%=item.index%>" data-key="<%=item.key%>"><%=item.text%></a>'+'<% } %>'+'</div>'+'<% } %>'+'</div> '};gmu.define('Dialog',{options:{autoOpen:true,buttons:null,closeBtn:true,mask:true,width:300,height:'auto',title:null,content:null,scrollMove:true,container:null,maskClick:null,position:null},getWrap:function(){return this._options._wrap;},_init:function(){var me=this,opts=me._options,btns,i=0,eventHanlder=$.proxy(me._eventHandler,me),vars={};me.on('ready',function(){opts._container=$(opts.container||document.body);(opts._cIsBody=opts._container.is('body'))||opts._container.addClass('ui-dialog-container');vars.btns=btns=[];opts.buttons&&$.each(opts.buttons,function(key){btns.push({index:++i,text:key,key:key});});opts._mask=opts.mask?$(tpl.mask).appendTo(opts._container):null;opts._wrap=$($.parseTpl(tpl.wrap,vars)).appendTo(opts._container);opts._content=$('.ui-dialog-content',opts._wrap);opts._title=$(tpl.title);opts._close=opts.closeBtn&&$(tpl.close).highlight('ui-dialog-close-hover');me.$el=me.$el||opts._content;me.title(opts.title);me.content(opts.content);btns.length&&$('.ui-dialog-btns .ui-btn',opts._wrap).highlight('ui-state-hover');opts._wrap.css({width:opts.width,height:opts.height});$(window).on('ortchange',eventHanlder);opts._wrap.on('click',eventHanlder);opts._mask&&opts._mask.on('click',eventHanlder);opts.autoOpen&&me.open();});},_create:function(){var opts=this._options;if(this._options.setup){opts.content=opts.content||this.$el.show();opts.title=opts.title||this.$el.attr('title');}},_eventHandler:function(e){var me=this,match,wrap,opts=me._options,fn;switch(e.type){case'ortchange':this.refresh();break;case'touchmove':opts.scrollMove&&e.preventDefault();break;case'click':if(opts._mask&&($.contains(opts._mask[0],e.target)||opts._mask[0]===e.target)){return me.trigger('maskClick');}
wrap=opts._wrap.get(0);if((match=$(e.target).closest('.ui-dialog-close',wrap))&&match.length){me.close();}else if((match=$(e.target).closest('.ui-dialog-btns .ui-btn',wrap))&&match.length){fn=opts.buttons[match.attr('data-key')];fn&&fn.apply(me,arguments);}}},_calculate:function(){var me=this,opts=me._options,size,$win,root=document.body,ret={},isBody=opts._cIsBody,round=Math.round;opts.mask&&(ret.mask=isBody?{width:'100%',height:Math.max(root.scrollHeight,root.clientHeight)-1}:{width:'100%',height:'100%'});size=opts._wrap.offset();$win=$(window);ret.wrap={left:'50%',marginLeft:-round(size.width/2)+'px',top:isBody?round($win.height()/ 2)+window.pageYOffset:'50%',marginTop:-round(size.height/2)+'px'}
return ret;},refresh:function(){var me=this,opts=me._options,ret,action;if(opts._isOpen){action=function(){ret=me._calculate();ret.mask&&opts._mask.css(ret.mask);opts._wrap.css(ret.wrap);}
if($.os.ios&&document.activeElement&&/input|textarea|select/i.test(document.activeElement.tagName)){document.body.scrollLeft=0;setTimeout(action,200);}else{action();}}
return me;},open:function(x,y){var opts=this._options;opts._isOpen=true;opts._wrap.css('display','block');opts._mask&&opts._mask.css('display','block');x!==undefined&&this.position?this.position(x,y):this.refresh();$(document).on('touchmove',$.proxy(this._eventHandler,this));return this.trigger('open');},close:function(){var eventData,opts=this._options;eventData=$.Event('beforeClose');this.trigger(eventData);if(eventData.defaultPrevented)return this;opts._isOpen=false;opts._wrap.css('display','none');opts._mask&&opts._mask.css('display','none');$(document).off('touchmove',this._eventHandler);return this.trigger('close');},title:function(value){var opts=this._options,setter=value!==undefined;if(setter){value=(opts.title=value)?'<h3>'+value+'</h3>':value;opts._title.html(value)[value?'prependTo':'remove'](opts._wrap);opts._close&&opts._close.prependTo(opts.title?opts._title:opts._wrap);}
return setter?this:opts.title;},content:function(val){var opts=this._options,setter=val!==undefined;setter&&opts._content.empty().append(opts.content=val);return setter?this:opts.content;},destroy:function(){var opts=this._options,_eventHander=this._eventHandler;$(window).off('ortchange',_eventHander);$(document).off('touchmove',_eventHander);opts._wrap.off('click',_eventHander).remove();opts._mask&&opts._mask.off('click',_eventHander).remove();opts._close&&opts._close.highlight();return this.$super('destroy');}});})(gmu,gmu.$);(function($){var _offset=$.fn.offset,round=Math.round;function setter(coord){return this.each(function(idx){var $el=$(this),coords=$.isFunction(coord)?coord.call(this,idx,$el.offset()):coord,position=$el.css('position'),pos=position==='absolute'||position==='fixed'||$el.position();if(position==='relative'){pos.top-=parseFloat($el.css('top'))||parseFloat($el.css('bottom'))*-1||0;pos.left-=parseFloat($el.css('left'))||parseFloat($el.css('right'))*-1||0;}
parentOffset=$el.offsetParent().offset(),props={top:round(coords.top-(pos.top||0)-parentOffset.top),left:round(coords.left-(pos.left||0)-parentOffset.left)}
if(position=='static'){props['position']='relative';}
if(coords.using){coords.using.call(this,props,idx);}else{$el.css(props);}});}
$.fn.offset=function(corrd){return corrd?setter.call(this,corrd):_offset.call(this);}})(Zepto);(function($,undefined){var _position=$.fn.position,round=Math.round,rhorizontal=/^(left|center|right)([\+\-]\d+%?)?$/,rvertical=/^(top|center|bottom)([\+\-]\d+%?)?$/,rpercent=/%$/;function str2int(persent,totol){return(parseInt(persent,10)||0)*(rpercent.test(persent)?totol / 100:1);}
function getOffsets(pos,offset,width,height){return[pos[0]==='right'?width:pos[0]==='center'?width / 2:0,pos[1]==='bottom'?height:pos[1]==='center'?height / 2:0,str2int(offset[0],width),str2int(offset[1],height)];}
function getDimensions(elem){var raw=elem[0],isEvent=raw.preventDefault;raw=raw.touches&&raw.touches[0]||raw;if(raw.nodeType===9||raw===window||isEvent){return{width:isEvent?0:elem.width(),height:isEvent?0:elem.height(),top:raw.pageYOffset||raw.pageY||0,left:raw.pageXOffset||raw.pageX||0};}
return elem.offset();}
function getWithinInfo(el){var $el=$(el=(el||window)),dim=getDimensions($el);el=$el[0];return{$el:$el,width:dim.width,height:dim.height,scrollLeft:el.pageXOffset||el.scrollLeft,scrollTop:el.pageYOffset||el.scrollTop};}
function filterOpts(opts,offsets){['my','at'].forEach(function(key){var pos=(opts[key]||'').split(' '),opt=opts[key]=['center','center'],offset=offsets[key]=[0,0];pos.length===1&&pos[rvertical.test(pos[0])?'unshift':'push']('center');rhorizontal.test(pos[0])&&(opt[0]=RegExp.$1)&&(offset[0]=RegExp.$2);rvertical.test(pos[1])&&(opt[1]=RegExp.$1)&&(offset[1]=RegExp.$2);});}
$.fn.position=function(opts){if(!opts||!opts.of){return _position.call(this);}
opts=$.extend({},opts);var target=$(opts.of),collision=opts.collision,within=collision&&getWithinInfo(opts.within),ofses={},dim=getDimensions(target),bPos={left:dim.left,top:dim.top},atOfs;target[0].preventDefault&&(opts.at='left top');filterOpts(opts,ofses);atOfs=getOffsets(opts.at,ofses.at,dim.width,dim.height);bPos.left+=atOfs[0]+atOfs[2];bPos.top+=atOfs[1]+atOfs[3];return this.each(function(){var $el=$(this),ofs=$el.offset(),pos=$.extend({},bPos),myOfs=getOffsets(opts.my,ofses.my,ofs.width,ofs.height);pos.left=round(pos.left+myOfs[2]-myOfs[0]);pos.top=round(pos.top+myOfs[3]-myOfs[1]);collision&&collision.call(this,pos,{of:dim,offset:ofs,my:opts.my,at:opts.at,within:within,$el:$el});pos.using=opts.using;$el.offset(pos);});}})(Zepto);(function(gmu,$,undefined){gmu.Dialog.register('position',{_init:function(){var opts=this._options;opts.position=opts.position||{of:opts.container||window,at:'center',my:'center'};},position:function(x,y){var opts=this._options;if(!$.isPlainObject(x)){opts.position.at='left'+(x>0?'+'+x:x)+' top'+(y>0?'+'+y:y);}else $.extend(opts.position,x);return this.refresh();},_calculate:function(){var me=this,opts=me._options,position=opts.position,ret=me.origin();opts._wrap.position($.extend(position,{using:function(position){ret.wrap=position;}}));return ret;}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.define('Popover',{options:{container:null,content:null,event:'click'},template:{frame:'<div>'},_create:function(){var me=this,opts=me._options,$el=opts.target&&$(opts.target)||me.getEl(),$root=opts.container&&$(opts.container);$root&&$root.length||($root=$(me.tpl2html('frame')).addClass('ui-mark-temp'));me.$root=$root;opts.content&&me.setContent(opts.content);me.trigger('done.dom',$root.addClass('ui-'+me.widgetName),opts);$root.parent().length||$el.after($root);me.target($el);},_checkTemp:function($el){$el.is('.ui-mark-temp')&&$el.off(this.eventNs)&&$el.remove();},show:function(){var me=this,evt=gmu.Event('beforeshow');me.trigger(evt);if(evt.isDefaultPrevented()){return;}
me.trigger('placement',me.$root.addClass('ui-in'),me.$target);me._visible=true;return me.trigger('show');},hide:function(){var me=this,evt=new gmu.Event('beforehide');me.trigger(evt);if(evt.isDefaultPrevented()){return;}
me.$root.removeClass('ui-in');me._visible=false;return me.trigger('hide');},toggle:function(){var me=this;return me[me._visible?'hide':'show'].apply(me,arguments);},target:function(el){if(el===undefined){return this.$target;}
var me=this,$el=$(el),orig=me.$target,click=me._options.event+me.eventNs;orig&&orig.off(click);me.$target=$el.on(click,function(e){e.preventDefault();me.toggle();});return me;},setContent:function(val){var container=this.$root;container.empty().append(val);return this;},destroy:function(){var me=this;me.$target.off(me.eventNs);me._checkTemp(me.$root);return me.$super('destroy');}});})(gmu,gmu.$);(function(gmu,$){gmu.define('Dropmenu',{options:{content:null},template:{item:'<li><a <% if ( href ) { %>href="<%= href %>"<% } %>>'+'<% if ( icon ) { %><span class="ui-icon ui-icon-'+'<%= icon %>"></span><% } %><%= text %></a></li>',divider:'<li class="divider"></li>',wrap:'<ul>'},_init:function(){var me=this;me.on('done.dom',function(e,$root){me.$list=$root.find('ul').first().addClass('ui-dropmenu-items').highlight('ui-state-hover','.ui-dropmenu-items>li:not(.divider)');});},_create:function(){var me=this,opts=me._options,content='';if($.type(opts.content)==='array'){opts.content.forEach(function(item){item=$.extend({href:'',icon:'',text:''},typeof item==='string'?{text:item}:item);content+=me.tpl2html(item.text==='divider'?'divider':'item',item);});opts.content=$(me.tpl2html('wrap')).append(content);}
me.$super('_create');me.$list.on('click'+me.eventNs,'.ui-dropmenu-items>li:not('+'.ui-state-disable):not(.divider)',function(e){var evt=gmu.Event('itemclick',e);me.trigger(evt,this);if(evt.isDefaultPrevented()){return;}
me.hide();});}},gmu.Popover);})(gmu,gmu.$);(function(gmu){gmu.Dropmenu.options.horizontal=true;gmu.Dropmenu.option('horizontal',true,function(){var me=this;me.on('done.dom',function(e,$root){$root.addClass('ui-horizontal');});});})(gmu,gmu.$);(function(gmu,$){$.extend(gmu.Dropmenu.options,{placement:'bottom',align:'center',offset:null});gmu.Dropmenu.option('placement',function(val){return~['top','bottom'].indexOf(val);},function(){var config={'top_center':'center top center bottom','top_left':'left top left bottom','top_right':'right top right bottom','bottom_center':'center bottom center top','bottom_right':'right bottom right top','bottom_left':'left bottom left top'},presets={},info;$.each(config,function(preset,args){args=args.split(/\s/g);args.unshift(preset);presets[preset]=function(){return placement.apply(null,args);};});function getPos(pos,len){return pos==='right'||pos==='bottom'?len:pos==='center'?len / 2:0;}
function placement(preset,atH,atV,myH,myV){var of=info.of,coord=info.coord,offset=info.offset,top=of.top,left=of.left;left+=getPos(atH,of.width)-getPos(myH,coord.width);top+=getPos(atV,of.height)-getPos(myV,coord.height);offset=typeof offset==='function'?offset.call(null,{left:left,top:top},preset):offset||{};return{left:left+(offset.left||0),top:top+(offset.top||0)};}
this.on('placement',function(e,$el,$of){var me=this,opts=me._options,placement=opts.placement,align=opts.align,coord;info={coord:$el.offset(),of:$of.offset(),placement:placement,align:align,$el:$el,$of:$of,offset:opts.offset};coord=presets[placement+'_'+align]();me.trigger('before.placement',coord,info,presets);if(/^(\w+)_(\w+)$/.test(info.preset)){info.placement=RegExp.$1;info.align=RegExp.$2;}
$el.offset(coord);me.trigger('after.placement',coord,info);});});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.define('Gotop',{options:{container:'',useFix:true,useHide:true,useAnimation:false,position:{bottom:10,right:10},afterScroll:null},_init:function(){var me=this,$el,_opts=me._options,_eventHandler;if($.os.version&&$.os.version.substr(0,3)>=7.0){_opts.position.bottom=40;}
me.on('ready',function(){$el=me.$el;_eventHandler=$.proxy(me._eventHandler,me);_opts['useHide']&&$(document).on('touchmove',_eventHandler);$(window).on('touchend touchcancel scrollStop',_eventHandler);$(window).on('scroll ortchange',_eventHandler);$el.on('click',_eventHandler);me.on('destroy',function(){$(window).off('touchend touchcancel scrollStop',_eventHandler);$(document).off('touchmove',_eventHandler);$(window).off('scroll ortchange',_eventHandler);});_opts['useFix']&&$el.fix(_opts['position']);_opts['root']=$el[0];});me.on('destroy',function(){me.$el.remove();});},_create:function(){var me=this;if(!me.$el){me.$el=$('<div></div>');}
me.$el.addClass('ui-gotop').append('<div></div>').appendTo(me._options['container']||(me.$el.parent().length?'':document.body));return me;},_eventHandler:function(e){var me=this;switch(e.type){case'touchmove':me.hide();break;case'scroll':clearTimeout(me._options['_TID']);break;case'touchend':case'touchcancel':clearTimeout(me._options['_TID']);me._options['_TID']=setTimeout(function(){me._check.call(me);},300);break;case'scrollStop':me._check();break;case'ortchange':me._check.call(me);break;case'click':me._scrollTo();break;}},_check:function(position){var me=this;(position!==undefined?position:window.pageYOffset)>document.documentElement.clientHeight?me.show():me.hide();return me;},_scrollTo:function(){var me=this,from=window.pageYOffset;me.hide();clearTimeout(me._options['_TID']);if(!me._options['useAnimation']){window.scrollTo(0,1);me.trigger('afterScroll');}else{me._options['moveToTop']=setInterval(function(){if(from>1){window.scrollBy(0,-Math.min(150,from-1));from-=150;}else{clearInterval(me._options['moveToTop']);me.trigger('afterScroll');}},25,true);}
return me;},show:function(){this._options.root.style.display='block';return this;},hide:function(){this._options.root.style.display='none';return this;}});})(gmu,gmu.$);(function(gmu,$){gmu.define('Historylist',{options:{container:document.body,deleteSupport:true,items:[]},template:{wrap:'<ul class="ui-historylist">',item:'<li data-id="<%=id%>"><p class="ui-historylist-itemwrap"><span class="ui-historylist-item"><%=context%></span></p></li>',clear:'<p class="ui-historylist-clear">清空搜索历史</p>'},_init:function(){var me=this,opts=me._options;me.$el=opts.container=opts.container||document.body;me.items=[];me.on('ready',function(){me._bindUI();});me.on('itemDelete',function(){if(me.items.length===0){me.hide();}});},_create:function(){var me=this,opts=me._options;me.$el.hide();me.$wrap=$(me.tpl2html('wrap')).appendTo(opts.container);me.$clear=$(me.tpl2html('clear')).appendTo(opts.container);!me._options.deleteSupport&&me.$clear.hide();me.addItems(opts.items);me.show();},_filterItemsById:function(id,callback){var me=this;me.items.forEach(function(_item,index){if(_item.id===id){callback.call(me,_item,index);return;}});},_bindUI:function(){var me=this,touch,$target,itemId,startTimestamp,endTimestamp,wantDelete=false,timeout,touchstartX,currentX,touchstartY,currentY,velocity,movedPercentage,moved,movedDistance;me.$clear.on('tap'+me.eventNs,function(ev){setTimeout(function(){gmu.Dialog({closeBtn:false,buttons:{'清空':function(){me.clear();this.destroy();},'取消':function(){this.destroy();}},title:'清空历史',content:'<p>是否清空搜索历史？</p>',open:function(){this._options._wrap.addClass('ui-historylist-dialog');}});},10);ev.preventDefault();ev.stopPropagation();});me.$wrap.on('tap'+me.eventNs,function(ev){if(me._options.deleteSupport){return;}
$target=$(ev.target);if(!$target.hasClass('ui-historylist-itemwrap')&&!($target=$target.parents('.ui-historylist-itemwrap')).length){$target=null;return;}
itemId=$target.parent().attr('data-id');me._filterItemsById(itemId,function(_item){me.trigger('itemTouch',{'item':_item.value});});});me.$wrap.on('touchstart'+me.eventNs,function(ev){if(!me._options.deleteSupport){return;}
touch=ev.touches[0];$target=$(touch.target);startTimestamp=ev.timeStamp;currentX=touchstartX=parseInt(touch.pageX);currentY=touchstartY=parseInt(touch.pageY);moved=false;wantDelete=false;if(!$target.hasClass('ui-historylist-itemwrap')&&!($target=$target.parents('.ui-historylist-itemwrap')).length){$target=null;return;}
$target.addClass('ui-historylist-ontap');$target.css('width',$target.width()-parseInt($target.css('border-left-width'))-parseInt($target.css('border-right-width')));});me.$wrap.on('touchmove'+me.eventNs,function(ev){if(!$target){return;}
currentX=ev.touches[0].pageX;currentY=ev.touches[0].pageY;timeout===undefined&&(timeout=setTimeout(function(){if(Math.abs(currentY-touchstartY)>Math.abs(currentX-touchstartX)/2){wantDelete=false;}else{wantDelete=true;}},10));moved=moved||((currentX-touchstartX>=3||currentY-touchstartY>=3)?true:false);if(!wantDelete){setTimeout(function(){$target&&$target.removeClass('ui-historylist-ontap');},150);return;}
movedPercentage=(currentX-touchstartX)/me.$wrap.width();$target.addClass('ui-historylist-itemmoving');$target.removeClass('ui-historylist-ontap');$target.css('-webkit-transform','translate3d('+(currentX-touchstartX)+'px, 0, 0)');$target.css('opacity',1-movedPercentage);ev.preventDefault();ev.stopPropagation();});me.$wrap.on('touchend'+me.eventNs+' touchcancel'+me.eventNs,function(ev){if(!$target){return;}
clearTimeout(timeout);timeout=undefined;itemId=$target.parent().attr('data-id');endTimestamp=ev.timeStamp;velocity=(currentX-touchstartX)/(endTimestamp-startTimestamp);movedDistance=Math.abs(currentX-touchstartX);$target.removeClass('ui-historylist-ontap');$target.removeClass('ui-historylist-itemmoving');if(((movedDistance<me.$wrap.width()/3&&Math.abs(velocity)>0.1)&&wantDelete)||(movedDistance>=me.$wrap.width()/3&&wantDelete)){me.removeItem(itemId,$target);}else{$target.css('width','auto');$target.css('-webkit-transform','translate3d(0, 0, 0)');$target.css('opacity',1);!moved&&movedDistance<3&&me._filterItemsById(itemId,function(_item){me.trigger('itemTouch',{'item':_item.value});});}
$target=null;});},show:function(){var me=this;if(me.items.length===0){return;}
if(me.sync===false){me.$wrap.html('');me.addItems(me.syncitems);me.sync=true;}
me.$el.show();me.isShow=true;return me;},hide:function(){var me=this;me.$el.hide();me.isShow=false;return me;},_getItemId:function(){var me=this;me._itemId===undefined?(me._itemId=1):++me._itemId;return'__dd__'+me._itemId;},_getFormatItem:function(item){var me=this;if(Object.prototype.toString.call(item)==='[object String]'){return{'context':item,'value':item,'id':me._getItemId()}}else{return{'context':item.context||item.value,'value':item.value||item.context,'id':me._getItemId()}}},addItem:function(item){var me=this,item=me._getFormatItem(item);me.items.forEach(function(_item,index){if(_item.value===item.value){me.items.splice(index,1);$(me.$wrap.children()[index]).remove();return;}});me.$wrap.children().length===0?me.$wrap.append(me.tpl2html('item',item)):$(me.tpl2html('item',item)).insertBefore(me.$wrap.children()[0]);me.items.unshift(item);return me;},addItems:function(items){var me=this;items.forEach(function(item){me.addItem(item);});return me;},update:function(items){var me=this;if(me.isShow){me.$wrap.html('');me.addItems(items);me.sync=true;}else{me.syncitems=items;me.sync=false;}
return me;},removeItem:function(itemId,$itemTarget){var me=this,distance,transform,x;transform=$itemTarget.css('-webkit-transform');x=/translate3d\((.*?),.*/.test(transform)?RegExp.$1:0;distance=parseInt(x,10)>=0?$itemTarget.width():-$itemTarget.width();$itemTarget.css('-webkit-transform','translate3d('+distance+'px, 0, 0)');$itemTarget.on('transitionEnd'+me.eventNs+' webkitTransitionEnd'+me.eventNs,function(){$itemTarget.parent().remove();me._filterItemsById(itemId,function(_item,index){me.items.splice(index,1);me.trigger('itemDelete',{'item':_item.value});});});},clear:function(){var me=this;me.$wrap.html('');me.items=[];me.sync=true;me.hide();me.trigger('clear');return me;},disableDelete:function(){var me=this;me._options.deleteSupport=false;me.$clear.hide();return me;},enableDelete:function(){var me=this;me._options.deleteSupport=true;me.$clear.show();return me;},destroy:function(){var me=this;me.$wrap.off(me.eventNs);me.$clear.off(me.eventNs);me.$wrap.remove();me.$clear.remove();return me.$super('destroy');}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.define('Navigator',{options:{content:null,event:'click'},template:{list:'<ul>',item:'<li><a<% if( href ) { %> href="<%= href %>"<% } %>>'+'<%= text %></a></li>'},_create:function(){var me=this,opts=me._options,$el=me.getEl(),$list=$el.find('ul').first(),name='ui-'+me.widgetName,renderer,html;if(!$list.length&&opts.content){$list=$(me.tpl2html('list'));renderer=me.tpl2html('item');html='';opts.content.forEach(function(item){item=$.extend({href:'',text:''},typeof item==='string'?{text:item}:item);html+=renderer(item);});$list.append(html).appendTo($el);}else{if($el.is('ul, ol')){$list=$el.wrap('<div>');$el=$el.parent();}
if(opts.index===undefined){opts.index=$list.find('.ui-state-active').index();~opts.index||(opts.index=0);}}
me.$list=$list.addClass(name+'-list');me.trigger('done.dom',$el.addClass(name),opts);$list.highlight('ui-state-hover','li');$list.on(opts.event+me.eventNs,'li:not(.ui-state-disable)>a',function(e){me._switchTo($(this).parent().index(),e);});me.index=-1;me.switchTo(opts.index);},_switchTo:function(to,e){if(to===this.index){return;}
var me=this,list=me.$list.children(),evt=gmu.Event('beforeselect',e),cur;me.trigger(evt,list.get(to));if(evt.isDefaultPrevented()){return;}
cur=list.removeClass('ui-state-active').eq(to).addClass('ui-state-active');me.index=to;return me.trigger('select',to,cur[0]);},switchTo:function(to){return this._switchTo(~~to);},unselect:function(){this.index=-1;this.$list.children().removeClass('ui-state-active');},getIndex:function(){return this.index;}});})(gmu,gmu.$);
/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(window,doc){var m=Math,_bindArr=[],dummyStyle=doc.createElement('div').style,vendor=(function(){var vendors='webkitT,MozT,msT,OT,t'.split(','),t,i=0,l=vendors.length;for(;i<l;i++){t=vendors[i]+'ransform';if(t in dummyStyle){return vendors[i].substr(0,vendors[i].length-1);}}
return false;})(),cssVendor=vendor?'-'+vendor.toLowerCase()+'-':'',transform=prefixStyle('transform'),transitionProperty=prefixStyle('transitionProperty'),transitionDuration=prefixStyle('transitionDuration'),transformOrigin=prefixStyle('transformOrigin'),transitionTimingFunction=prefixStyle('transitionTimingFunction'),transitionDelay=prefixStyle('transitionDelay'),isAndroid=(/android/gi).test(navigator.appVersion),isTouchPad=(/hp-tablet/gi).test(navigator.appVersion),has3d=prefixStyle('perspective')in dummyStyle,hasTouch='ontouchstart'in window&&!isTouchPad,hasTransform=!!vendor,hasTransitionEnd=prefixStyle('transition')in dummyStyle,RESIZE_EV='onorientationchange'in window?'orientationchange':'resize',START_EV=hasTouch?'touchstart':'mousedown',MOVE_EV=hasTouch?'touchmove':'mousemove',END_EV=hasTouch?'touchend':'mouseup',CANCEL_EV=hasTouch?'touchcancel':'mouseup',TRNEND_EV=(function(){if(vendor===false)return false;var transitionEnd={'':'transitionend','webkit':'webkitTransitionEnd','Moz':'transitionend','O':'otransitionend','ms':'MSTransitionEnd'};return transitionEnd[vendor];})(),nextFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1);};})(),cancelFrame=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;})(),translateZ=has3d?' translateZ(0)':'',iScroll=function(el,options){var that=this,i;that.wrapper=typeof el=='object'?el:doc.getElementById(el);that.wrapper.style.overflow='hidden';that.scroller=that.wrapper.children[0];that.translateZ=translateZ;that.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault();},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x;that.y=that.options.y;that.options.useTransform=hasTransform&&that.options.useTransform;that.options.useTransition=hasTransitionEnd&&that.options.useTransition;that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+'transform':'top left';that.scroller.style[transitionDuration]='0';that.scroller.style[transformOrigin]='0 0';if(that.options.useTransition)that.scroller.style[transitionTimingFunction]='cubic-bezier(0.33,0.66,0.66,1)';if(that.options.useTransform)that.scroller.style[transform]='translate('+that.x+'px,'+that.y+'px)'+translateZ;else that.scroller.style.cssText+=';position:absolute;top:'+that.y+'px;left:'+that.x+'px';that.refresh();that._bind(RESIZE_EV,window);that._bind(START_EV);if(that.options.checkDOMChanges)that.checkDOMTime=setInterval(function(){that._checkDOMChanges();},500);};iScroll.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:false,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&e.button!==0)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case TRNEND_EV:that._transitionEnd(e);break;}},_checkDOMChanges:function(){if(this.moved||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))return;this.refresh();},_resize:function(){var that=this;setTimeout(function(){that.refresh();},isAndroid?200:0);},_pos:function(x,y){x=this.hScroll?x:0;y=this.vScroll?y:0;if(this.options.useTransform){this.scroller.style[transform]='translate('+x+'px,'+y+'px) scale('+this.scale+')'+translateZ;}else{x=m.round(x);y=m.round(y);this.scroller.style.left=x+'px';this.scroller.style.top=y+'px';}
this.x=x;this.y=y;},_start:function(e){var that=this,point=hasTouch?e.touches[0]:e,matrix,x,y,c1,c2;if(!that.enabled)return;if(that.options.onBeforeScrollStart)that.options.onBeforeScrollStart.call(that,e);if(that.options.useTransition)that._transitionTime(0);that.moved=false;that.animating=false;that.distX=0;that.distY=0;that.absDistX=0;that.absDistY=0;that.dirX=0;that.dirY=0;that.isStopScrollAction=false;if(that.options.momentum){if(that.options.useTransform){matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,'').split(',');x=+matrix[4];y=+matrix[5];}else{x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,'');y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,'');}
if(m.round(x)!=m.round(that.x)||m.round(y)!=m.round(that.y)){that.isStopScrollAction=true;if(that.options.useTransition)that._unbind(TRNEND_EV);else cancelFrame(that.aniTime);that.steps=[];that._pos(x,y);if(that.options.onScrollEnd)that.options.onScrollEnd.call(that);}}
that.startX=that.x;that.startY=that.y;that.pointX=point.pageX;that.pointY=point.pageY;that.startTime=e.timeStamp||Date.now();if(that.options.onScrollStart)that.options.onScrollStart.call(that,e);that._bind(MOVE_EV,window);that._bind(END_EV,window);that._bind(CANCEL_EV,window);},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();if(that.options.onBeforeScrollMove)that.options.onBeforeScrollMove.call(that,e);that.pointX=point.pageX;that.pointY=point.pageY;if(newX>0||newX<that.maxScrollX){newX=that.options.bounce?that.x+(deltaX / 2):newX>=0||that.maxScrollX>=0?0:that.maxScrollX;}
if(newY>that.minScrollY||newY<that.maxScrollY){newY=that.options.bounce?that.y+(deltaY / 2):newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY;}
that.distX+=deltaX;that.distY+=deltaY;that.absDistX=m.abs(that.distX);that.absDistY=m.abs(that.distY);if(that.absDistX<6&&that.absDistY<6){return;}
if(that.options.lockDirection){if(that.absDistX>that.absDistY+5){newY=that.y;deltaY=0;}else if(that.absDistY>that.absDistX+5){newX=that.x;deltaX=0;}}
that.moved=true;that._beforePos?that._beforePos(newY,deltaY)&&that._pos(newX,newY):that._pos(newX,newY);that.dirX=deltaX>0?-1:deltaX<0?1:0;that.dirY=deltaY>0?-1:deltaY<0?1:0;if(timestamp-that.startTime>300){that.startTime=timestamp;that.startX=that.x;that.startY=that.y;}
if(that.options.onScrollMove)that.options.onScrollMove.call(that,e);},_end:function(e){if(hasTouch&&e.touches.length!==0)return;var that=this,point=hasTouch?e.changedTouches[0]:e,target,ev,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y,newDuration;that._unbind(MOVE_EV,window);that._unbind(END_EV,window);that._unbind(CANCEL_EV,window);if(that.options.onBeforeScrollEnd)that.options.onBeforeScrollEnd.call(that,e);if(!that.moved){if(hasTouch&&this.options.handleClick&&!that.isStopScrollAction){that.doubleTapTimer=setTimeout(function(){that.doubleTapTimer=null;target=point.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA'){ev=doc.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._fake=true;target.dispatchEvent(ev);}},0);}
that._resetPos(400);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
if(duration<300&&that.options.momentum){momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX;momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,(that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0),that.options.bounce?that.wrapperH:0):momentumY;newPosX=that.x+momentumX.dist;newPosY=that.y+momentumY.dist;if((that.x>0&&newPosX>0)||(that.x<that.maxScrollX&&newPosX<that.maxScrollX))momentumX={dist:0,time:0};if((that.y>that.minScrollY&&newPosY>that.minScrollY)||(that.y<that.maxScrollY&&newPosY<that.maxScrollY))momentumY={dist:0,time:0};}
if(momentumX.dist||momentumY.dist){newDuration=m.max(m.max(momentumX.time,momentumY.time),10);that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
that._resetPos(200);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;if(resetX==that.x&&resetY==that.y){if(that.moved){that.moved=false;if(that.options.onScrollEnd)that.options.onScrollEnd.call(that);if(that._afterPos)that._afterPos();}
return;}
that.scrollTo(resetX,resetY,time||0);},_transitionEnd:function(e){var that=this;if(e.target!=that.scroller)return;that._unbind(TRNEND_EV);that._startAni();},_startAni:function(){var that=this,startX=that.x,startY=that.y,startTime=Date.now(),step,easeOut,animate;if(that.animating)return;if(!that.steps.length){that._resetPos(400);return;}
step=that.steps.shift();if(step.x==startX&&step.y==startY)step.time=0;that.animating=true;that.moved=true;if(that.options.useTransition){that._transitionTime(step.time);that._pos(step.x,step.y);that.animating=false;if(step.time)that._bind(TRNEND_EV);else that._resetPos(0);return;}
animate=function(){var now=Date.now(),newX,newY;if(now>=startTime+step.time){that._pos(step.x,step.y);that.animating=false;if(that.options.onAnimationEnd)that.options.onAnimationEnd.call(that);that._startAni();return;}
now=(now-startTime)/ step.time-1;easeOut=m.sqrt(1-now*now);newX=(step.x-startX)*easeOut+startX;newY=(step.y-startY)*easeOut+startY;that._pos(newX,newY);if(that.animating)that.aniTime=nextFrame(animate);};animate();},_transitionTime:function(time){time+='ms';this.scroller.style[transitionDuration]=time;},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=0.0006,speed=m.abs(dist)*(this.options.speedScale||1)/ time,newDist=(speed*speed)/(2*deceleration),newTime=0,outsideDist=0;if(dist>0&&newDist>maxDistUpper){outsideDist=size /(6 /(newDist / speed*deceleration));maxDistUpper=maxDistUpper+outsideDist;speed=speed*maxDistUpper / newDist;newDist=maxDistUpper;}else if(dist<0&&newDist>maxDistLower){outsideDist=size /(6 /(newDist / speed*deceleration));maxDistLower=maxDistLower+outsideDist;speed=speed*maxDistLower / newDist;newDist=maxDistLower;}
newDist=newDist*(dist<0?-1:1);newTime=speed / deceleration;return{dist:newDist,time:m.round(newTime)};},_offset:function(el){var left=-el.offsetLeft,top=-el.offsetTop;while(el=el.offsetParent){left-=el.offsetLeft;top-=el.offsetTop;}
if(el!=this.wrapper){left*=this.scale;top*=this.scale;}
return{left:left,top:top};},_bind:function(type,el,bubble){_bindArr.concat([el||this.scroller,type,this]);(el||this.scroller).addEventListener(type,this,!!bubble);},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble);},destroy:function(){var that=this;that.scroller.style[transform]='';that._unbind(RESIZE_EV,window);that._unbind(START_EV);that._unbind(MOVE_EV,window);that._unbind(END_EV,window);that._unbind(CANCEL_EV,window);if(that.options.useTransition)that._unbind(TRNEND_EV);if(that.options.checkDOMChanges)clearInterval(that.checkDOMTime);if(that.options.onDestroy)that.options.onDestroy.call(that);for(var i=0,l=_bindArr.length;i<l;){_bindArr[i].removeEventListener(_bindArr[i+1],_bindArr[i+2]);_bindArr[i]=null;i=i+3}
_bindArr=[];},refresh:function(){var that=this,offset;that.wrapperW=that.wrapper.clientWidth||1;that.wrapperH=that.wrapper.clientHeight||1;that.minScrollY=-that.options.topOffset||0;that.scrollerW=m.round(that.scroller.offsetWidth*that.scale);that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale);that.maxScrollX=that.wrapperW-that.scrollerW;that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY;that.dirX=0;that.dirY=0;if(that.options.onRefresh)that.options.onRefresh.call(that);that.hScroll=that.options.hScroll&&that.maxScrollX<0;that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH);offset=that._offset(that.wrapper);that.wrapperOffsetLeft=-offset.left;that.wrapperOffsetTop=-offset.top;that.scroller.style[transitionDuration]='0';that._resetPos(400);},scrollTo:function(x,y,time,relative){var that=this,step=x,i,l;that.stop();if(!step.length)step=[{x:x,y:y,time:time,relative:relative}];for(i=0,l=step.length;i<l;i++){if(step[i].relative){step[i].x=that.x-step[i].x;step[i].y=that.y-step[i].y;}
that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});}
that._startAni();},scrollToElement:function(el,time){var that=this,pos;el=el.nodeType?el:that.scroller.querySelector(el);if(!el)return;pos=that._offset(el);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left;pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top;time=time===undefined?m.max(m.abs(pos.left)*2,m.abs(pos.top)*2):time;that.scrollTo(pos.left,pos.top,time);},scrollToPage:function(pageX,pageY,time){var that=this,x,y;time=time===undefined?400:time;if(that.options.onScrollStart)that.options.onScrollStart.call(that);x=-that.wrapperW*pageX;y=-that.wrapperH*pageY;if(x<that.maxScrollX)x=that.maxScrollX;if(y<that.maxScrollY)y=that.maxScrollY;that.scrollTo(x,y,time);},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(MOVE_EV,window);this._unbind(END_EV,window);this._unbind(CANCEL_EV,window);},enable:function(){this.enabled=true;},stop:function(){if(this.options.useTransition)this._unbind(TRNEND_EV);else cancelFrame(this.aniTime);this.steps=[];this.moved=false;this.animating=false;},isReady:function(){return!this.moved&&!this.animating;}};function prefixStyle(style){if(vendor==='')return style;style=style.charAt(0).toUpperCase()+style.substr(1);return vendor+style;}
dummyStyle=null;if(typeof exports!=='undefined')exports.iScroll=iScroll;else window.iScroll=iScroll;(function($,ns,undefined){if(!$)return;var _iScroll=ns.iScroll,slice=[].slice,record=(function(){var data={},id=0,ikey='_sid';return function(obj,val){var key=obj[ikey]||(obj[ikey]=++id);val!==undefined&&(data[key]=val);val===null&&delete data[key];return data[key];};})(),iScroll;ns.iScroll=iScroll=function(el,options){var args=[].slice.call(arguments,0),ins=new _iScroll(el,options);record(el,ins);return ins;};iScroll.prototype=_iScroll.prototype;$.fn.iScroll=function(opts){var args=slice.call(arguments,1),method=typeof opts==='string'&&opts,ret,obj;$.each(this,function(i,el){obj=record(el)||iScroll(el,$.isPlainObject(opts)?opts:undefined);if(method==='this'){ret=obj;return false;}else if(method){if(!$.isFunction(obj[method])){throw new Error('iScroll没有此方法：'+method);}
ret=obj[method].apply(obj,args);if(ret!==undefined&&ret!==obj){return false;}
ret=undefined;}});return ret!==undefined?ret:this;};})(window.Zepto||null,window);})(window,document);(function(gmu,$,undefined){gmu.Navigator.options.iScroll={hScroll:true,vScroll:false,hScrollbar:false,vScrollbar:false};gmu.Navigator.register('scrollable',{_init:function(){var me=this,opts=me._options;me.on('done.dom',function(){me.$list.wrap('<div class="ui-scroller"></div>');me.trigger('init.iScroll');me.$el.iScroll($.extend({},opts.iScroll));});$(window).on('ortchange'+me.eventNs,$.proxy(me.refresh,me));me.on('destroy',function(){me.$el.iScroll('destroy');$(window).off('ortchange'+me.eventNs);});},refresh:function(){this.trigger('refresh.iScroll').$el.iScroll('refresh');}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.Navigator.options.visibleCount=4;gmu.Navigator.option('visibleCount','*',function(){var me=this,opts=me._options,counts=$.type(opts.visibleCount)==='number'?{portrait:opts.visibleCount,landscape:Math.floor(opts.visibleCount*3 / 2)}:opts.visibleCount;me.on('init.iScroll refresh.iScroll',arrage);function arrage(e){var ort=window.innerWidth>window.innerHeight?'landscape':'portrait',count=counts[ort],$el=me.$el;me.$list.children().width($el.width()/ count);me.$list.width($el.width()/ count*me.$list.children().length);}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.Navigator.options.isScrollToNext=true;gmu.Navigator.option('isScrollToNext',true,function(){var me=this,prevIndex;me.on('select',function(e,to,el){if(prevIndex===undefined){prevIndex=me.index?0:1;}
var dir=to>prevIndex,target=$(el)[dir?'next':'prev'](),offset=target.offset()||$(el).offset(),within=me.$el.offset(),listOffset;if(dir?offset.left+offset.width>within.left+
within.width:offset.left<within.left){listOffset=me.$list.offset();me.$el.iScroll('scrollTo',dir?within.width-
offset.left+listOffset.left-offset.width:listOffset.left-offset.left,0,400);}
prevIndex=to;});});})(gmu,gmu.$);(function(gmu,$,undefined){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd;gmu.define('Panel',{options:{contentWrap:'',scrollMode:'follow',display:'push',position:'right',dismissible:true,swipeClose:true},_init:function(){var me=this,opts=me._options;me.on('ready',function(){me.displayFn=me._setDisplay();me.$contentWrap.addClass('ui-panel-animate');me.$el.on(transitionEnd,$.proxy(me._eventHandler,me)).hide();opts.dismissible&&me.$panelMask.hide().on('click',$.proxy(me._eventHandler,me));opts.scrollMode!=='follow'&&$(window).on('scrollStop',$.proxy(me._eventHandler,me));$(window).on('ortchange',$.proxy(me._eventHandler,me));});},_create:function(){if(this._options.setup){var me=this,opts=me._options,$el=me.$el.addClass('ui-panel ui-panel-'+opts.position);me.panelWidth=$el.width()||0;me.$contentWrap=$(opts.contentWrap||$el.next());opts.dismissible&&(me.$panelMask=$('<div class="ui-panel-dismiss"></div>').width(document.body.clientWidth-$el.width()).appendTo('body')||null);}else{throw new Error('panel组件不支持create模式，请使用setup模式');}},_setDisplay:function(){var me=this,$panel=me.$el,$contentWrap=me.$contentWrap,transform=cssPrefix+'transform',posData=me._transDisplayToPos(),obj={},panelPos,contPos;$.each(['push','overlay','reveal'],function(i,display){obj[display]=function(isOpen,pos,isClear){panelPos=posData[display].panel,contPos=posData[display].cont;$panel.css(transform,'translate3d('+me._transDirectionToPos(pos,panelPos[isOpen])+'px,0,0)');if(!isClear){$contentWrap.css(transform,'translate3d('+me._transDirectionToPos(pos,contPos[isOpen])+'px,0,0)');me.maskTimer=setTimeout(function(){me.$panelMask&&me.$panelMask.css(pos,$panel.width()).toggle(isOpen);},400);}
return me;}});return obj;},_initPanelPos:function(dis,pos){this.displayFn[dis](0,pos,true);this.$el.get(0).clientLeft;return this;},_transDirectionToPos:function(pos,val){return pos==='left'?val:-val;},_transDisplayToPos:function(){var me=this,panelWidth=me.panelWidth;return{push:{panel:[-panelWidth,0],cont:[0,panelWidth]},overlay:{panel:[-panelWidth,0],cont:[0,0]},reveal:{panel:[0,0],cont:[0,panelWidth]}}},_setShow:function(isOpen,dis,pos){var me=this,opts=me._options,eventName=isOpen?'open':'close',beforeEvent=$.Event('before'+eventName),changed=isOpen!==me.state(),_eventBinder=isOpen?'on':'off',_eventHandler=isOpen?$.proxy(me._eventHandler,me):me._eventHandler,_dis=dis||opts.display,_pos=pos||opts.position;me.trigger(beforeEvent,[dis,pos]);if(beforeEvent.isDefaultPrevented())return me;if(changed){me._dealState(isOpen,_dis,_pos);me.displayFn[_dis](me.isOpen=Number(isOpen),_pos);opts.swipeClose&&me.$el[_eventBinder]($.camelCase('swipe-'+_pos),_eventHandler);opts.display=_dis,opts.position=_pos;}
return me;},_dealState:function(isOpen,dis,pos){var me=this,opts=me._options,$panel=me.$el,$contentWrap=me.$contentWrap,addCls='ui-panel-'+dis+' ui-panel-'+pos,removeCls='ui-panel-'+opts.display+' ui-panel-'+opts.position+' ui-panel-animate';if(isOpen){$panel.removeClass(removeCls).addClass(addCls).show();opts.scrollMode==='fix'&&$panel.css('top',$(window).scrollTop());me._initPanelPos(dis,pos);if(dis==='reveal'){$contentWrap.addClass('ui-panel-contentWrap').on(transitionEnd,$.proxy(me._eventHandler,me));}else{$contentWrap.removeClass('ui-panel-contentWrap').off(transitionEnd,$.proxy(me._eventHandler,me));$panel.addClass('ui-panel-animate');}
me.$panelMask&&me.$panelMask.css({'left':'auto','right':'auto','height':document.body.clientHeight});}
return me;},_eventHandler:function(e){var me=this,opts=me._options,scrollMode=opts.scrollMode,eventName=me.state()?'open':'close';switch(e.type){case'click':case'swipeLeft':case'swipeRight':me.close();break;case'scrollStop':scrollMode==='fix'?me.$el.css('top',$(window).scrollTop()):me.close();break;case transitionEnd:me.trigger(eventName,[opts.display,opts.position]);break;case'ortchange':me.$panelMask&&me.$panelMask.css('height',document.body.clientHeight);scrollMode==='fix'&&me.$el.css('top',$(window).scrollTop());break;}},open:function(display,position){return this._setShow(true,display,position);},close:function(){return this._setShow(false);},toggle:function(display,position){return this[this.isOpen?'close':'open'](display,position);},state:function(){return!!this.isOpen;},destroy:function(){this.$panelMask&&this.$panelMask.off().remove();this.maskTimer&&clearTimeout(this.maskTimer);this.$contentWrap.removeClass('ui-panel-animate');$(window).off('scrollStop',this._eventHandler);$(window).off('ortchange',this._eventHandler);return this.$super('destroy');}});})(gmu,gmu.$);(function(gmu){var Popover=gmu.Popover;Popover.template.arrow='<span class="ui-arrow"></span>';Popover.options.arrow=true;Popover.option('arrow',true,function(){var me=this,opts=me._options;opts.offset=opts.offset||function(coord,placement){placement=placement.split('_')[0];return{left:(placement==='left'?-1:placement==='right'?1:0)*15,top:(placement==='top'?-1:placement==='bottom'?1:0)*15};};me.on('done.dom',function(e,$root){$root.append(me.tpl2html('arrow')).addClass('ui-pos-default');});me.on('after.placement',function(e,coord,info){var root=this.$root[0],cls=root.className,placement=info.placement,align=info.align||'';root.className=cls.replace(/(?:\s|^)ui-pos-[^\s$]+/g,'')+' ui-pos-'+placement+(align?'-'+align:'');});});})(gmu);(function(gmu,$){gmu.Popover.options.collision=true;gmu.Popover.option('collision',true,function(){var me=this,opts=me._options;function getWithinInfo(raw){var $el=$(raw);raw=$el[0];if(raw!==window&&raw.nodeType!==9){return $el.offset();}
return{width:$el.width(),height:$el.height(),top:raw.pageYOffset||raw.scrollTop||0,left:raw.pageXOffset||raw.scrollLeft||0};}
function isInside(coord,width,height,within){return coord.left>=within.left&&coord.left+width<=within.left+within.width&&coord.top>=within.top&&coord.top+height<=within.top+within.height;}
me.on('before.placement',function(e,coord,info,presets){var within=getWithinInfo(opts.within||window),now=info.placement,orig=info.coord,aviable=Object.keys(presets),idx=aviable.indexOf(now)+1,swap=aviable.splice(idx,aviable.length-idx);aviable=swap.concat(aviable);while(aviable.length&&!isInside(coord,orig.width,orig.height,within)){now=aviable.shift();$.extend(coord,presets[now]());}
info.preset=now;});});})(gmu,gmu.$);(function(gmu,$){var Popover=gmu.Popover;Popover.options.dismissible=true;Popover.option('dismissible',true,function(){var me=this,$doc=$(document),click='click'+me.eventNs;function isFromSelf(target){var doms=me.$target.add(me.$root).get(),i=doms.length;while(i--){if(doms[i]===target||$.contains(doms[i],target)){return true;}}
return false;}
me.on('show',function(){$doc.off(click).on(click,function(e){isFromSelf(e.target)||me.hide();});});me.on('hide',function(){$doc.off(click);});});})(gmu,gmu.$);(function(gmu,$){$.extend(gmu.Popover.options,{placement:'bottom',offset:null});gmu.Popover.option('placement',function(val){return~['top','bottom','left','right'].indexOf(val);},function(){var me=this,config={'top':'center top center bottom','right':'right center left center','bottom':'center bottom center top','left':'left center right center'},presets={},info;$.each(config,function(preset,args){args=args.split(/\s/g);args.unshift(preset);presets[preset]=function(){return placement.apply(null,args);};});function getPos(pos,len){return pos==='right'||pos==='bottom'?len:pos==='center'?len / 2:0;}
function placement(preset,atH,atV,myH,myV){var of=info.of,coord=info.coord,offset=info.offset,top=of.top,left=of.left;left+=getPos(atH,of.width)-getPos(myH,coord.width);top+=getPos(atV,of.height)-getPos(myV,coord.height);offset=typeof offset==='function'?offset.call(null,{left:left,top:top},preset):offset||{};return{left:left+(offset.left||0),top:top+(offset.top||0)};}
this.on('placement',function(e,$el,$of){var me=this,opts=me._options,placement=opts.placement,coord;info={coord:$el.offset(),of:$of.offset(),placement:placement,$el:$el,$of:$of,offset:opts.offset};coord=presets[placement]();me.trigger('before.placement',coord,info,presets);info.preset&&(info.placement=info.preset);$el.offset(coord);me.trigger('after.placement',coord,info);});$(window).on('ortchange',function(){me._visible&&me.trigger('placement',me.$target,me.$root);});});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.define('Progressbar',{options:{initValue:0,horizontal:true,transitionDuration:300,_isShow:true,_current:0,_percent:0},_init:function(){var me=this,$el,_eventHandler,_button,_background,_offset;me.on('ready',function(){$el=me.$el,_eventHandler=$.proxy(me._eventHandler,me),_button=$el.find('.ui-progressbar-button'),_background=$el.find('.ui-progressbar-bg'),_offset=$el.offset();_button.on('touchstart touchmove touchend touchcancel',_eventHandler);_background.on('touchstart',_eventHandler);$.extend(me._options,{_button:_button[0],$_background:_background,_filled:$el.find('.ui-progressbar-filled')[0],_width:_offset.width,_height:_offset.height});me._options['horizontal']&&_offset.width&&$el.width(_offset.width);me._options['initValue']>0&&me.value(me._options['initValue']);});me.on('destroy',function(){if(!me._options.setup){me.$el.remove();}});},_create:function(){var me=this,direction=me._options['horizontal']?'h':'v';if(!me.$el){me.$el=$('<div></div>');}
me.$el.addClass('ui-progressbar-'+direction).appendTo(me._options['container']||(me.$el.parent().length?'':document.body)).html(('<div class="ui-progressbar-bg"><div class="ui-progressbar-filled"></div><div class="ui-progressbar-button"><div><b></b></div></div></div>'));},_eventHandler:function(e){var me=this;switch(e.type){case'touchmove':me._touchMove(e);break;case'touchstart':$(e.target).hasClass('ui-progressbar-bg')?me._click(e):me._touchStart(e);break;case'touchcancel':case'touchend':me._touchEnd();break;case'tap':me._click(e);break;}},_touchStart:function(e){var me=this,opts=me._options;$.extend(me._options,{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,S:false,T:false,X:0,Y:0});opts._button.style.webkitTransitionDuration='0ms';opts._filled.style.webkitTransitionDuration='0ms';$(opts._button).addClass('ui-progressbar-button-pressed');me.trigger('dragStart');},_touchMove:function(e){var me=this,opts=me._options,touch=e.touches[0],X=touch.pageX-opts.pageX,Y=touch.pageY-opts.pageY,_percent;if(!opts.T){var S=Math.abs(X)<Math.abs(touch.pageY-opts.pageY);opts.T=true;opts.S=S;}
if(opts.horizontal){if(!opts.S){e.stopPropagation();e.preventDefault();_percent=(X+opts._current)/ opts._width*100;if(_percent<=100&&_percent>=0){opts._percent=_percent;opts.X=X;opts._button.style.webkitTransform='translate3d('+(opts.X+opts._current)+'px,0,0)';opts._filled.style.width=_percent+'%';me.trigger('valueChange');}
me.trigger('dragMove');}}else{if(opts.S){e.stopPropagation();e.preventDefault();_percent=-(opts._current+Y)/ opts._height*100;if(_percent<=100&&_percent>=0){opts._percent=_percent;opts.Y=Y;opts._button.style.webkitTransform='translate3d(0,'+(Y+opts._current)+'px,0)';opts._filled.style.cssText+='height:'+_percent+'%;top:'+(opts._height+Y+opts._current)+'px';me.trigger('valueChange');}
me.trigger('dragMove');}}},_touchEnd:function(){var me=this,opts=me._options;opts._current+=opts.horizontal?opts.X:opts.Y;$(opts._button).removeClass('ui-progressbar-button-pressed');me.trigger('dragEnd');},_click:function(e){var me=this,opts=me._options,rect=opts.$_background.offset(),touch=e.touches[0];opts.horizontal?me.value((touch.pageX-rect.left)/ opts._width*100):me.value((opts._height-touch.pageY+rect.top)/ opts._height*100);},value:function(value){var me=this,opts=me._options,_current,duration;if(value===undefined){return opts._percent;}else{value=parseFloat(value);if(isNaN(value))return me;value=value>100?100:value<0?0:value;opts._percent=value;duration=';-webkit-transition-duration:'+opts.transitionDuration+'ms';if(opts.horizontal){_current=opts._current=opts._width*value / 100;opts._button.style.cssText+='-webkit-transform:translate3d('+_current+'px,0,0)'+duration;opts._filled.style.cssText+='width:'+value+'%'+duration;}else{_current=opts._current=opts._height*value /-100;opts._button.style.cssText+='-webkit-transform:translate3d(0,'+_current+'px,0)'+duration;opts._filled.style.cssText+='height:'+value+'%;top:'+(opts._height+_current)+'px'+duration;}
me.trigger('valueChange');return me;}},show:function(){var me=this;if(!me._options['_isShow']){me.$el.css('display','block');me._options['_isShow']=true;}
return me;},hide:function(){var me=this;if(me._options['_isShow']){me.$el.css('display','none');me._options['_isShow']=false;}
return me;}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.define('Refresh',{options:{load:null,statechange:null},_init:function(){var me=this,opts=me._options;me.on('ready',function(){$.each(['up','down'],function(i,dir){var $elem=opts['$'+dir+'Elem'],elem=$elem.get(0);if($elem.length){me._status(dir,true);if(!elem.childNodes.length||($elem.find('.ui-refresh-icon').length&&$elem.find('.ui-refresh-label').length)){!elem.childNodes.length&&me._createBtn(dir);opts.refreshInfo||(opts.refreshInfo={});opts.refreshInfo[dir]={$icon:$elem.find('.ui-refresh-icon'),$label:$elem.find('.ui-refresh-label'),text:$elem.find('.ui-refresh-label').html()}}
$elem.on('click',function(){if(!me._status(dir)||opts._actDir)return;me._setStyle(dir,'loading');me._loadingAction(dir,'click');});}});});me.on('destroy',function(){me.$el.remove();});},_create:function(){var me=this,opts=me._options,$el=me.$el;if(me._options.setup){opts.$upElem=$el.find('.ui-refresh-up');opts.$downElem=$el.find('.ui-refresh-down');$el.addClass('ui-refresh');}},_createBtn:function(dir){if(dir=='up'){this._options['$'+dir+'Elem'].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">'+td_lang.pda.msg_4||"下拉刷新"+'</span>');}else{this._options['$'+dir+'Elem'].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">'+td_lang.pda.msg_6||"加载更多"+'</span>');}
return this;},_setStyle:function(dir,state){var me=this,stateChange=$.Event('statechange');me.trigger(stateChange,me._options['$'+dir+'Elem'],state,dir);if(stateChange.defaultPrevented){return me;}
return me._changeStyle(dir,state);},_changeStyle:function(dir,state){var opts=this._options,refreshInfo=opts.refreshInfo[dir];switch(state){case'loaded':refreshInfo['$label'].html(refreshInfo['text']);refreshInfo['$icon'].removeClass();opts._actDir='';break;case'loading':refreshInfo['$label'].html(td_lang.pda.msg_2||'加载中...');refreshInfo['$icon'].addClass('ui-loading');opts._actDir=dir;break;case'disable':refreshInfo['$label'].html(td_lang.pda.msg_1||'没有更多内容了');break;}
return this;},_loadingAction:function(dir,type){var me=this,opts=me._options,loadFn=opts.load;$.isFunction(loadFn)&&loadFn.call(me,dir,type);me._status(dir,false);return me;},afterDataLoading:function(dir){var me=this,dir=dir||me._options._actDir;me._setStyle(dir,'loaded');me._status(dir,true);return me;},_status:function(dir,status){var opts=this._options;return status===undefined?opts['_'+dir+'Open']:opts['_'+dir+'Open']=!!status;},_setable:function(able,dir,hide){var me=this,opts=me._options,dirArr=dir?[dir]:['up','down'];$.each(dirArr,function(i,dir){var $elem=opts['$'+dir+'Elem'];if(!$elem.length)return;able?$elem.show():(hide?$elem.hide():me._setStyle(dir,'disable'));me._status(dir,able);});return me;},disable:function(dir,hide){return this._setable(false,dir,hide);},enable:function(dir){return this._setable(true,dir);}});})(gmu,gmu.$);(function(gmu,$,undefined){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd,translateZ=' translateZ(0)';gmu.define('Slider',{options:{loop:false,speed:400,index:0,selector:{container:'.ui-slider-group'}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>">'+'<img src="<%= pic %>" alt="" /></a>'+'<% if( title ) { %><p><%= title %></p><% } %>'+'</div>'},_create:function(){var me=this,$el=me.getEl(),opts=me._options;me.index=opts.index;me._initDom($el,opts);me._initWidth($el,me.index);me._container.on(transitionEnd+me.eventNs,$.proxy(me._tansitionEnd,me));$(window).on('ortchange'+me.eventNs,function(){me._initWidth($el,me.index);});},_initDom:function($el,opts){var selector=opts.selector,viewNum=opts.viewNum||1,items,container;container=$el.find(selector.container);if(!container.length){container=$('<div></div>');if(!opts.content){if($el.is('ul')){this.$el=container.insertAfter($el);container=$el;$el=this.$el;}else{container.append($el.children());}}else{this._createItems(container,opts.content);}
container.appendTo($el);}
if((items=container.children()).length<viewNum+1){opts.loop=false;}
while(opts.loop&&container.children().length<3*viewNum){container.append(items.clone());}
this.length=container.children().length;this._items=(this._container=container).addClass('ui-slider-group').children().addClass('ui-slider-item').toArray();this.trigger('done.dom',$el.addClass('ui-slider'),opts);},_createItems:function(container,items){var i=0,len=items.length;for(;i<len;i++){container.append(this.tpl2html('item',items[i]));}},_initWidth:function($el,index,force){var me=this,width;if(!force&&(width=$el.width())===me.width){return;}
me.width=width;me._arrange(width,index);me.height=$el.height();me.trigger('width.change');},_arrange:function(width,index){var items=this._items,i=0,item,len;this._slidePos=new Array(items.length);for(len=items.length;i<len;i++){item=items[i];item.style.cssText+='width:'+width+'px;'+'left:'+(i*-width)+'px;';item.setAttribute('data-index',i);this._move(i,i<index?-width:i>index?width:0,0);}
this._container.css('width',width*len);},_move:function(index,dist,speed,immediate){var slidePos=this._slidePos,items=this._items;if(slidePos[index]===dist||!items[index]){return;}
this._translate(index,dist,speed);slidePos[index]=dist;immediate&&items[index].clientLeft;},_translate:function(index,dist,speed){var slide=this._items[index],style=slide&&slide.style;if(!style){return false;}
style.cssText+=cssPrefix+'transition-duration:'+speed+'ms;'+cssPrefix+'transform: translate('+
dist+'px, 0)'+translateZ+';';},_circle:function(index,arr){var len;arr=arr||this._items;len=arr.length;return(index%len+len)%arr.length;},_tansitionEnd:function(e){if(~~e.target.getAttribute('data-index')!==this.index){return;}
this.trigger('slideend',this.index);},_slide:function(from,diff,dir,width,speed,opts){var me=this,to;to=me._circle(from-dir*diff);if(!opts.loop){dir=Math.abs(from-to)/(from-to);}
this._move(to,-dir*width,0,true);this._move(from,width*dir,speed);this._move(to,0,speed);this.index=to;return this.trigger('slide',to,from);},slideTo:function(to,speed){if(this.index===to||this.index===this._circle(to)){return this;}
var opts=this._options,index=this.index,diff=Math.abs(index-to),dir=diff /(index-to),width=this.width;speed=speed||opts.speed;return this._slide(index,diff,dir,width,speed,opts);},prev:function(){if(this._options.loop||this.index>0){this.slideTo(this.index-1);}
return this;},next:function(){if(this._options.loop||this.index+1<this.length){this.slideTo(this.index+1);}
return this;},getIndex:function(){return this.index;},destroy:function(){this._container.off(this.eventNs);$(window).off('ortchange'+this.eventNs);return this.$super('destroy');}});})(gmu,gmu.$);(function(gmu,$){$.extend(true,gmu.Slider,{options:{autoPlay:true,interval:4000}});gmu.Slider.register('autoplay',{_init:function(){var me=this;me.on('slideend ready',me.resume).on('destory',me.stop);me.getEl().on('touchstart'+me.eventNs,$.proxy(me.stop,me)).on('touchend'+me.eventNs,$.proxy(me.resume,me));},resume:function(){var me=this,opts=me._options;if(opts.autoPlay&&!me._timer){me._timer=setTimeout(function(){me.slideTo(me.index+1);me._timer=null;},opts.interval);}
return me;},stop:function(){var me=this;if(me._timer){clearTimeout(me._timer);me._timer=null;}
return me;}});})(gmu,gmu.$);(function(gmu){gmu.Slider.template.item='<div class="ui-slider-item">'+'<a href="<%= href %>">'+'<img lazyload="<%= pic %>" alt="" /></a>'+'<% if( title ) { %><p><%= title %></p><% } %>'+'</div>';gmu.Slider.register('lazyloadimg',{_init:function(){this.on('ready slide',this._loadItems);},_loadItems:function(){var opts=this._options,loop=opts.loop,viewNum=opts.viewNum||1,index=this.index,i,len;for(i=index-viewNum,len=index+2*viewNum;i<len;i++){this.loadImage(loop?this._circle(i):i);}},loadImage:function(index){var item=this._items[index],images;if(!item||!(images=gmu.staticCall(item,'find','img[lazyload]'),images.length)){return this;}
images.each(function(){this.src=this.getAttribute('lazyload');this.removeAttribute('lazyload');});}});})(gmu);(function(gmu,$,undefined){var map={touchstart:'_onStart',touchmove:'_onMove',touchend:'_onEnd',touchcancel:'_onEnd',click:'_onClick'},isScrolling,start,delta,moved;$.extend(gmu.Slider.options,{stopPropagation:false,disableScroll:false});gmu.Slider.register('touch',{_init:function(){var me=this,$el=me.getEl();me._handler=function(e){me._options.stopPropagation&&e.stopPropagation();return map[e.type]&&me[map[e.type]].call(me,e);};me.on('ready',function(){$el.on('touchstart'+me.eventNs,me._handler);me._container.on('click'+me.eventNs,me._handler);});},_onClick:function(){return!moved;},_onStart:function(e){if(e.touches.length>1){return false;}
var me=this,touche=e.touches[0],opts=me._options,eventNs=me.eventNs,num;start={x:touche.pageX,y:touche.pageY,time:+new Date()};delta={};moved=false;isScrolling=undefined;num=opts.viewNum||1;me._move(opts.loop?me._circle(me.index-num):me.index-num,-me.width,0,true);me._move(opts.loop?me._circle(me.index+num):me.index+num,me.width,0,true);me.$el.on('touchmove'+eventNs+' touchend'+eventNs+' touchcancel'+eventNs,me._handler);},_onMove:function(e){if(e.touches.length>1||e.scale&&e.scale!==1){return false;}
var opts=this._options,viewNum=opts.viewNum||1,touche=e.touches[0],index=this.index,i,len,pos,slidePos;opts.disableScroll&&e.preventDefault();delta.x=touche.pageX-start.x;delta.y=touche.pageY-start.y;if(typeof isScrolling==='undefined'){isScrolling=Math.abs(delta.x)<Math.abs(delta.y);}
if(!isScrolling){e.preventDefault();if(!opts.loop){delta.x /=(!index&&delta.x>0||index===this._items.length-1&&delta.x<0)?(Math.abs(delta.x)/ this.width+1):1;}
slidePos=this._slidePos;for(i=index-viewNum,len=index+2*viewNum;i<len;i++){pos=opts.loop?this._circle(i):i;this._translate(pos,delta.x+slidePos[pos],0);}
moved=true;}},_onEnd:function(){this.$el.off('touchmove'+this.eventNs+' touchend'+
this.eventNs+' touchcancel'+this.eventNs,this._handler);if(!moved){return;}
var me=this,opts=me._options,viewNum=opts.viewNum||1,index=me.index,slidePos=me._slidePos,duration=+new Date()-start.time,absDeltaX=Math.abs(delta.x),isPastBounds=!opts.loop&&(!index&&delta.x>0||index===slidePos.length-viewNum&&delta.x<0),dir=delta.x>0?1:-1,speed,diff,i,len,pos;if(duration<250){speed=absDeltaX / duration;diff=Math.min(Math.round(speed*viewNum*1.2),viewNum);}else{diff=Math.round(absDeltaX /(me.perWidth||me.width));}
if(diff&&!isPastBounds){me._slide(index,diff,dir,me.width,opts.speed,opts,true);if(viewNum>1&&duration>=250&&Math.ceil(absDeltaX / me.perWidth)!==diff){me.index<index?me._move(me.index-1,-me.perWidth,opts.speed):me._move(me.index+viewNum,me.width,opts.speed);}}else{for(i=index-viewNum,len=index+2*viewNum;i<len;i++){pos=opts.loop?me._circle(i):i;me._translate(pos,slidePos[pos],opts.speed);}}}});})(gmu,gmu.$);(function(gmu,$,undefined){$.extend(true,gmu.Slider,{template:{prev:'<span class="ui-slider-pre"></span>',next:'<span class="ui-slider-next"></span>'},options:{arrow:true,select:{prev:'.ui-slider-pre',next:'.ui-slider-next'}}});gmu.Slider.option('arrow',true,function(){var me=this,arr=['prev','next'];this.on('done.dom',function(e,$el,opts){var selector=opts.selector;arr.forEach(function(name){var item=$el.find(selector[name]);item.length||$el.append(item=$(me.tpl2html(name)));me['_'+name]=item;});});this.on('ready',function(){arr.forEach(function(name){me['_'+name].on('tap'+me.eventNs,function(){me[name].call(me);});});});this.on('destroy',function(){me._prev.off(me.eventNs);me._next.off(me.eventNs);});});})(gmu,gmu.$);(function(gmu,$,undefined){$.extend(true,gmu.Slider,{template:{dots:'<p class="ui-slider-dots"><%= new Array( len + 1 )'+'.join("<b></b>") %></p>'},options:{dots:true,selector:{dots:'.ui-slider-dots'}}});gmu.Slider.option('dots',true,function(){var updateDots=function(to,from){var dots=this._dots;typeof from==='undefined'||gmu.staticCall(dots[from%this.length],'removeClass','ui-state-active');gmu.staticCall(dots[to%this.length],'addClass','ui-state-active');};this.on('done.dom',function(e,$el,opts){var dots=$el.find(opts.selector.dots);if(!dots.length){dots=this.tpl2html('dots',{len:this.length});dots=$(dots).appendTo($el);}
this._dots=dots.children().toArray();});this.on('slide',function(e,to,from){updateDots.call(this,to,from);});this.on('ready',function(){updateDots.call(this,this.index);});});})(gmu,gmu.$);(function(gmu){gmu.Slider.options.imgZoom=true;gmu.Slider.option('imgZoom',function(){return!!this._options.imgZoom;},function(){var me=this,selector=me._options.imgZoom,watches;selector=typeof selector==='string'?selector:'img';function unWatch(){watches&&watches.off('load'+me.eventNs,imgZoom);}
function watch(){unWatch();watches=me._container.find(selector).on('load'+me.eventNs,imgZoom);}
function imgZoom(e){var img=e.target||this,scale=Math.min(1,me.width / img.naturalWidth,me.height / img.naturalHeight);img.style.width=scale*img.naturalWidth+'px';}
me.on('ready dom.change',watch);me.on('width.change',function(){watches&&watches.each(imgZoom);});me.on('destroy',unWatch);});})(gmu);(function($,win){var guid=0;gmu.define('Suggestion',{options:{historyShare:true,confirmClearHistory:true,autoClose:false},template:{wrapper:'<div class="ui-suggestion">'+'<div class="ui-suggestion-content"></div>'+'<div class="ui-suggestion-button">'+'<span class="ui-suggestion-clear">清除历史记录</span>'+'<span class="ui-suggestion-close">关闭</span>'+'</div></div>'},_initDom:function(){var me=this,$input=me.getEl().attr('autocomplete','off'),$parent=$input.parent('.ui-suggestion-mask');$parent.length?me.$mask=$parent:$input.wrap(me.$mask=$('<div class="ui-suggestion-mask"></div>'));me.$mask.append(me.tpl2html('wrapper'));me.$wrapper=me.$mask.find('.ui-suggestion').prop('id','ui-suggestion-'+(guid++));me.$content=me.$wrapper.css('top',$input.height()+(me.wrapperTop=parseInt(me.$wrapper.css('top'),10)||0)).find('.ui-suggestion-content');me.$btn=me.$wrapper.find('.ui-suggestion-button');me.$clearBtn=me.$btn.find('.ui-suggestion-clear');me.$closeBtn=me.$btn.find('.ui-suggestion-close');return me.trigger('initdom');},_bindEvent:function(){var me=this,$el=me.getEl(),ns=me.eventNs;me._options.autoClose&&$(document).on('tap'+ns,function(e){!$.contains(me.$mask.get(0),e.target)&&me.hide();});$el.on('focus'+ns,function(){!me.isShow&&me._showList().trigger('open');});$el.on('input'+ns,function(){me._showList();});me.$clearBtn.on('click'+ns,function(){me.history(null);}).highlight('ui-suggestion-highlight');me.$closeBtn.on('click'+ns,function(){me.getEl().blur();me.hide().trigger('close');}).highlight('ui-suggestion-highlight');return me;},_create:function(){var me=this,opts=me._options,hs=opts.historyShare;opts.container&&(me.$el=$(opts.container));me.key=hs?(($.type(hs)==='boolean'?'':hs+'-')+'SUG-Sharing-History'):me.getEl().attr('id')||('ui-suggestion-'+(guid++));me.separator=encodeURIComponent(',');me._initDom()._bindEvent();return me;},_showList:function(){var me=this,query=me.value(),data;if(query){me.trigger('sendrequest',query,$.proxy(me._render,me),$.proxy(me._cacheData,me));}else{(data=me._localStorage())?me._render(query,data.split(me.separator)):me.hide();}
return me;},_render:function(query,data){this.trigger('renderlist',data,query,$.proxy(this._fillWrapper,this));},_fillWrapper:function(listHtml){this.$clearBtn[this.value()?'hide':'show']();listHtml?(this.$content.html(listHtml),this.show()):this.hide();return this;},_localStorage:function(value){var me=this,key=me.key,separator=me.separator,localStorage,data;try{localStorage=win.localStorage;if(value===undefined){return localStorage[key];}else if(value===null){localStorage[key]='';}else if(value){data=localStorage[key]?localStorage[key].split(separator):[];if(!~$.inArray(value,data)){data.unshift(value);localStorage[key]=data.join(separator);}}}catch(ex){console.log(ex.message);}
return me;},_cacheData:function(key,value){this.cacheData||(this.cacheData={});return value!==undefined?this.cacheData[key]=value:this.cacheData[key];},value:function(){return this.getEl().val();},history:function(value){var me=this,clearHistory=value!==null||function(){return me._localStorage(null).hide();};return value===null?(me._options.confirmClearHistory?win.confirm('清除全部查询历史记录？')&&clearHistory():clearHistory()):me._localStorage(value)},show:function(){if(!this.isShow){this.$wrapper.show();this.isShow=true;return this.trigger('show');}else{return this;}},hide:function(){if(this.isShow){this.$wrapper.hide();this.isShow=false;return this.trigger('hide');}else{return this;}},destroy:function(){var me=this,$el=me.getEl(),ns=me.ns;me.trigger('destroy');$el.off(ns);me.$mask.replaceWith($el);me.$clearBtn.off(ns);me.$closeBtn.off(ns);me.$wrapper.children().off().remove();me.$wrapper.remove();me._options.autoClose&&$(document).off(ns);this.destroyed=true;return me;}});})(gmu.$,window);(function(gmu,$){gmu.Suggestion.register('iscroll',{_init:function(){var me=this;me.on('ready',function(){me.$scroller=$('<div class="ui-suggestion-scroller"></div>');me.$content.wrapInner(me.$scroller).iScroll({hScroll:false,onRefresh:function(){this.y&&this.scrollTo(0,0);}});me.on('destroy',function(){me.$content.iScroll('destroy');});});return me;},_fillWrapper:function(listHtml){this.$clearBtn[this.value()?'hide':'show']();if(listHtml){this.show().$scroller.html(listHtml);this.$content.iScroll('refresh');}else{this.hide();}
return this;}});})(gmu,gmu.$);(function($,win){var reverse=Array.prototype.reverse;gmu.Suggestion.options.listSelector='li';gmu.Suggestion.register('posadapt',{_init:function(){var me=this,$list;me.on('show ortchange',function(){if(me._checkPos()){me.$wrapper.css('top',-me.$wrapper.height()-me.wrapperTop);reverse.call($list=me.$content.find(me._options.listSelector));$list.appendTo($list.parent());me.$btn.prependTo(me.$wrapper);}});},_checkPos:function(){var sugH=this._options.height||66,upDis=this.getEl().offset().top-win.pageYOffset;return $(win).height()-upDis<sugH&&upDis>=sugH;}});})(gmu.$,window);(function(gmu,$){gmu.Suggestion.register('quickdelete',{_init:function(){var me=this,$input,ns;me.on('ready',function(){$input=me.getEl();ns=me.eventNs;me.$mask.append(me.$quickDel=$('<div class="ui-suggestion-quickdel"></div>'));$input.on('focus'+ns+' input'+ns,function(){me['_quickDel'+
($.trim($input.val())?'Show':'Hide')]();});$input.on('blur'+ns,function(){me._quickDelHide();});me.$quickDel.on('touchstart'+ns,function(e){e.preventDefault();e.formDelete=true;$input.val('');me.trigger('delete').trigger('input')._quickDelHide();$input.blur().focus();});me.on('destroy',function(){me.$quickDel.off().remove();});});},_quickDelShow:function(){if(!this.quickDelShow){gmu.staticCall(this.$quickDel.get(0),'css','visibility','visible');this.quickDelShow=true}},_quickDelHide:function(){if(this.quickDelShow){gmu.staticCall(this.$quickDel.get(0),'css','visibility','hidden');this.quickDelShow=false}}});})(gmu,gmu.$);(function($,win){gmu.Suggestion.options.compatdata=true;gmu.Suggestion.option('compatdata',true,function(){this.on('ready',function(){var key=this.key,flagKey='SUG-History-DATATRANS',localdata,dataArr;try{localdata=win.localStorage[key];if(localdata&&!win.localStorage[flagKey]){win.localStorage[flagKey]='\u001e';dataArr=localdata.split(',');win.localStorage[key]=dataArr.join(this.separator);}}catch(e){console.log(e.message);}})});})(gmu.$,window);(function($){$.extend(gmu.Suggestion.options,{isHistory:true,usePlus:false,listCount:5,renderlist:null});gmu.Suggestion.option('renderlist',function(){return $.type(this._options.renderlist)!=='function';},function(){var me=this,$xssElem=$('<div></div>'),_xssFilter=function(str){return $xssElem.text(str).html();},_createList=function(query,sugs){var opts=me._options,html=[],str='',sug,len,i;if(!sugs||!sugs.length){me.hide();return html;}
sugs=sugs.slice(0,opts.listCount);query=_xssFilter(query||'');for(i=0,len=sugs.length;i<len;i++){str=_xssFilter(sug=sugs[i]);query&&(str=$.trim(sug).replace(query,'<span>'+query+'</span>'));opts.usePlus&&(str+='<div class="ui-suggestion-plus" '+'data-item="'+sug+'"></div>');html.push('<li>'+str+'</li>');}
return html;};me.on('ready',function(){var me=this,ns=me.eventNs,$form=$(me._options.form||me.getEl().closest('form'));$form.size()&&(me.$form=$form.on('submit'+ns,function(e){var submitEvent=gmu.Event('submit');me._options.isHistory&&me._localStorage(me.value());me.trigger(submitEvent);submitEvent.isDefaultPrevented()&&e.preventDefault();}));me.$content.on('touchstart'+ns,function(e){e.preventDefault();});me.$content.on('tap'+ns,function(e){var $input=me.getEl(),$elem=$(e.target);if($elem.hasClass('ui-suggestion-plus')){$input.val($elem.attr('data-item'));}else if($.contains(me.$content.get(0),$elem.get(0))){setTimeout(function(){$input.val($elem.text());me.trigger('select',$elem).hide().$form.submit();},400);}}).highlight('ui-suggestion-highlight');me.on('destroy',function(){$form.size()&&$form.off(ns);me.$content.off();});});me.on('renderlist',function(e,data,query,callback){var ret=_createList(query,data);return callback(ret.length?'<ul>'+ret.join(' ')+'</ul>':'');});});})(gmu.$);(function($,win){$.extend(gmu.Suggestion.options,{isCache:true,queryKey:'wd',cbKey:'cb',sendrequest:null});gmu.Suggestion.option('sendrequest',function(){return $.type(this._options.sendrequest)!=='function';},function(){var me=this,opts=me._options,queryKey=opts.queryKey,cbKey=opts.cbKey,param=opts.param,isCache=opts.isCache,cdata;this.on('sendrequest',function(e,query,callback,cacheData){var url=opts.source,cb='suggestion_'+(+new Date());if(isCache&&(cdata=cacheData(query))){callback(query,cdata);return me;}
url=(url+'&'+queryKey+'='+encodeURIComponent(query)).replace(/[&?]{1,2}/,'?');!~url.indexOf('&'+cbKey)&&(url+='&'+cbKey+'='+cb);param&&(url+='&'+param);win[cb]=function(data){callback(query,data.s);isCache&&cacheData(query,data.s);delete win[cb];};$.ajax({url:url,dataType:'jsonp'});return me;});});})(gmu.$,window);(function(gmu,$,undefined){var _uid=1,uid=function(){return _uid++;},idRE=/^#(.+)$/;gmu.define('Tabs',{options:{active:0,items:null,transition:'slide'},template:{nav:'<ul class="ui-tabs-nav">'+'<% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %>'+'<li<% if(i==active){ %> class="ui-state-active"<% } %>><a href="javascript:;"><%=item.title%></a></li>'+'<% } %></ul>',content:'<div class="ui-viewport ui-tabs-content">'+'<% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %>'+'<div<% if(item.id){ %> id="<%=item.id%>"<% } %> class="ui-tabs-panel <%=transition%><% if(i==active){ %> ui-state-active<% } %>"><%=item.content%></div>'+'<% } %></div>'},_init:function(){var me=this,_opts=me._options,$el,eventHandler=$.proxy(me._eventHandler,me);me.on('ready',function(){$el=me.$el;$el.addClass('ui-tabs');_opts._nav.on('tap',eventHandler).children().highlight('ui-state-hover');});$(window).on('ortchange',eventHandler);},_create:function(){var me=this,_opts=me._options;if(me._options.setup&&me.$el.children().length>0){me._prepareDom('setup',_opts);}else{_opts.setup=false;me.$el=me.$el||$('<div></div>');me._prepareDom('create',_opts);}},_prepareDom:function(mode,_opts){var me=this,content,$el=me.$el,items,nav,contents,id;switch(mode){case'setup':_opts._nav=me._findElement('ul').first();if(_opts._nav){_opts._content=me._findElement('div.ui-tabs-content');_opts._content=((_opts._content&&_opts._content.first())||$('<div></div>').appendTo($el)).addClass('ui-viewport ui-tabs-content');items=[];_opts._nav.addClass('ui-tabs-nav').children().each(function(){var $a=me._findElement('a',this),href=$a?$a.attr('href'):$(this).attr('data-url'),id,$content;id=idRE.test(href)?RegExp.$1:'tabs_'+uid();($content=me._findElement('#'+id)||$('<div id="'+id+'"></div>')).addClass('ui-tabs-panel'+(_opts.transition?' '+_opts.transition:'')).appendTo(_opts._content);items.push({id:id,href:href,title:$a?$a.attr('href','javascript:;').text():$(this).text(),content:$content});});_opts.items=items;_opts.active=Math.max(0,Math.min(items.length-1,_opts.active||$('.ui-state-active',_opts._nav).index()||0));me._getPanel().add(_opts._nav.children().eq(_opts.active)).addClass('ui-state-active');break;}
default:items=_opts.items=_opts.items||[];nav=[];contents=[];_opts.active=Math.max(0,Math.min(items.length-1,_opts.active));$.each(items,function(key,val){id='tabs_'+uid();nav.push({href:val.href||'#'+id,title:val.title});contents.push({content:val.content||'',id:id});items[key].id=id;});_opts._nav=$(this.tpl2html('nav',{items:nav,active:_opts.active})).prependTo($el);_opts._content=$(this.tpl2html('content',{items:contents,active:_opts.active,transition:_opts.transition})).appendTo($el);_opts.container=_opts.container||($el.parent().length?null:'body');}
_opts.container&&$el.appendTo(_opts.container);me._fitToContent(me._getPanel());},_getPanel:function(index){var _opts=this._options;return $('#'+_opts.items[index===undefined?_opts.active:index].id);},_findElement:function(selector,el){var ret=$(el||this.$el).find(selector);return ret.length?ret:null;},_eventHandler:function(e){var match,_opts=this._options;switch(e.type){case'ortchange':this.refresh();break;default:if((match=$(e.target).closest('li',_opts._nav.get(0)))&&match.length){e.preventDefault();this.switchTo(match.index());}}},_fitToContent:function(div){var _opts=this._options,$content=_opts._content;_opts._plus===undefined&&(_opts._plus=parseFloat($content.css('border-top-width'))+parseFloat($content.css('border-bottom-width')))
$content.height(div.height()+_opts._plus);return this;},switchTo:function(index){var me=this,_opts=me._options,items=_opts.items,eventData,to,from,reverse,endEvent;if(!_opts._buzy&&_opts.active!=(index=Math.max(0,Math.min(items.length-1,index)))){to=$.extend({},items[index]);to.div=me._getPanel(index);to.index=index;from=$.extend({},items[_opts.active]);from.div=me._getPanel();from.index=_opts.active;eventData=gmu.Event('beforeActivate');me.trigger(eventData,to,from);if(eventData.isDefaultPrevented())return me;_opts._content.children().removeClass('ui-state-active');to.div.addClass('ui-state-active');_opts._nav.children().removeClass('ui-state-active').eq(to.index).addClass('ui-state-active');if(_opts.transition){_opts._buzy=true;endEvent=$.fx.animationEnd+'.tabs';reverse=index>_opts.active?'':' reverse';_opts._content.addClass('ui-viewport-transitioning');from.div.addClass('out'+reverse);to.div.addClass('in'+reverse).on(endEvent,function(e){if(e.target!=e.currentTarget)return
to.div.off(endEvent,arguments.callee);_opts._buzy=false;from.div.removeClass('out reverse');to.div.removeClass('in reverse');_opts._content.removeClass('ui-viewport-transitioning');me.trigger('animateComplete',to,from);me._fitToContent(to.div);});}
_opts.active=index;me.trigger('activate',to,from);_opts.transition||me._fitToContent(to.div);}
return me;},refresh:function(){return this._fitToContent(this._getPanel());},destroy:function(){var _opts=this._options,eventHandler=this._eventHandler;_opts._nav.off('tap',eventHandler).children().highlight();_opts.swipe&&_opts._content.off('swipeLeft swipeRight',eventHandler);if(!_opts.setup){this.$el.remove();}
return this.$super('destroy');}});})(gmu,gmu.$);(function($,undefined){var idRE=/^#.+$/,loaded={},tpl={loading:'<div class="ui-loading">Loading</div>',error:'<p class="ui-load-error">内容加载失败!</p>'};gmu.Tabs.register('ajax',{_init:function(){var _opts=this._options,items,i,length;this.on('ready',function(){items=_opts.items;for(i=0,length=items.length;i<length;i++){items[i].href&&!idRE.test(items[i].href)&&(items[i].isAjax=true);}
this.on('activate',this._onActivate);items[_opts.active].isAjax&&this.load(_opts.active);});},destroy:function(){this.off('activate',this._onActivate);this.xhr&&this.xhr.abort();return this.origin();},_fitToContent:function(div){var _opts=this._options;if(!_opts._fitLock)return this.origin(div);},_onActivate:function(e,to){to.isAjax&&this.load(to.index);},load:function(index,force){var me=this,_opts=me._options,items=_opts.items,item,$panel,prevXHR;if(index<0||index>items.length-1||!(item=items[index])||!item.isAjax||(($panel=me._getPanel(index)).text()&&!force&&loaded[index]))return this;(prevXHR=me.xhr)&&setTimeout(function(){prevXHR.abort();},400);_opts._loadingTimer=setTimeout(function(){$panel.html(tpl.loading);},50);_opts._fitLock=true;me.xhr=$.ajax($.extend(_opts.ajax||{},{url:item.href,context:me.$el.get(0),beforeSend:function(xhr,settings){var eventData=gmu.Event('beforeLoad');me.trigger(eventData,xhr,settings);if(eventData.isDefaultPrevented())return false;},success:function(response,xhr){var eventData=gmu.Event('beforeRender');clearTimeout(_opts._loadingTimer);me.trigger(eventData,response,$panel,index,xhr)
if(!eventData.isDefaultPrevented()){$panel.html(response);}
_opts._fitLock=false;loaded[index]=true;me.trigger('load',$panel);delete me.xhr;me._fitToContent($panel);},error:function(){var eventData=gmu.Event('loadError');clearTimeout(_opts._loadingTimer);loaded[index]=false;me.trigger(eventData,$panel);if(!eventData.isDefaultPrevented()){$panel.html(tpl.error);}
delete me.xhr;}}));}});})(Zepto);(function($,undefined){var durationThreshold=1000,horizontalDistanceThreshold=30,verticalDistanceThreshold=70,scrollSupressionThreshold=30,tabs=[],eventBinded=false,isFromTabs=function(target){for(var i=tabs.length;i--;){if($.contains(tabs[i],target))return true;}
return false;}
function tabsSwipeEvents(){$(document).on('touchstart.tabs',function(e){var point=e.touches?e.touches[0]:e,start,stop;start={x:point.clientX,y:point.clientY,time:Date.now(),el:$(e.target)}
$(document).on('touchmove.tabs',function(e){var point=e.touches?e.touches[0]:e,xDelta;if(!start)return;stop={x:point.clientX,y:point.clientY,time:Date.now()}
if((xDelta=Math.abs(start.x-stop.x))>scrollSupressionThreshold||xDelta>Math.abs(start.y-stop.y)){isFromTabs(e.target)&&e.preventDefault();}else{$(document).off('touchmove.tabs touchend.tabs');}}).one('touchend.tabs',function(){$(document).off('touchmove.tabs');if(start&&stop){if(stop.time-start.time<durationThreshold&&Math.abs(start.x-stop.x)>horizontalDistanceThreshold&&Math.abs(start.y-stop.y)<verticalDistanceThreshold){start.el.trigger(start.x>stop.x?"tabsSwipeLeft":"tabsSwipeRight");}}
start=stop=undefined;});});}
gmu.Tabs.register('swipe',{_init:function(){var _opts=this._options;this.on('ready',function(){tabs.push(_opts._content.get(0));eventBinded=eventBinded||(tabsSwipeEvents(),true);this.$el.on('tabsSwipeLeft tabsSwipeRight',$.proxy(this._eventHandler,this));});},_eventHandler:function(e){var _opts=this._options,items,index;switch(e.type){case'tabsSwipeLeft':case'tabsSwipeRight':items=_opts.items;if(e.type=='tabsSwipeLeft'&&_opts.active<items.length-1){index=_opts.active+1;}else if(e.type=='tabsSwipeRight'&&_opts.active>0){index=_opts.active-1;}
index!==undefined&&(e.stopPropagation(),this.switchTo(index));break;default:return this.origin(e);}},destroy:function(){var _opts=this._options,idx;~(idx=$.inArray(_opts._content.get(0),tabs))&&tabs.splice(idx,1);this.$el.off('tabsSwipeLeft tabsSwipeRight',this._eventHandler);tabs.length||($(document).off('touchstart.tabs'),eventBinded=false);return this.origin();}});})(Zepto);(function(gmu,$){gmu.define('Toolbar',{options:{container:document.body,title:'标题',leftBtns:[],rightBtns:[],fixed:false},_init:function(){var me=this,opts=me._options,$el;if(!opts.container){opts.container=document.body;}
me.on('ready',function(){$el=me.$el;if(opts.fixed){var placeholder=$('<div class="ui-toolbar-placeholder"></div>').height($el.offset().height).insertBefore($el).append($el).append($el.clone().css({'z-index':1,position:'absolute',top:0})),top=$el.offset().top,check=function(){document.body.scrollTop>top?$el.css({position:'fixed',top:0}):$el.css('position','absolute');},offHandle;$(window).on('touchmove touchend touchcancel scroll scrollStop',check);$(document).on('touchend touchcancel',offHandle=function(){setTimeout(function(){check();},200);});me.on('destroy',function(){$(window).off('touchmove touchend touchcancel scroll scrollStop',check);$(document).off('touchend touchcancel',offHandle);$el.insertBefore(placeholder);placeholder.remove();me._removeDom();});check();}});me.on('destroy',function(){me._removeDom();});},_create:function(){var me=this,opts=me._options,$el=me.getEl(),container=$(opts.container),children=[],btnGroups=me.btnGroups={left:[],right:[]},currentGroup=btnGroups['left'];if(!opts.setup){($el&&$el.length>0)?$el.appendTo(container):($el=me.$el=$('<div>').appendTo(container));}
children=$el.children();$toolbarWrap=$el.find('.ui-toolbar-wrap');if($toolbarWrap.length===0){$toolbarWrap=$('<div class="ui-toolbar-wrap"></div>').appendTo($el);}else{children=$toolbarWrap.children();}
children.forEach(function(child){$toolbarWrap.append(child);/^[hH]/.test(child.tagName)?(currentGroup=btnGroups['right'],me.title=child):currentGroup.push(child);});var leftBtnContainer=$toolbarWrap.find('.ui-toolbar-left');var rightBtnContainer=$toolbarWrap.find('.ui-toolbar-right');if(leftBtnContainer.length===0){leftBtnContainer=children.length?$('<div class="ui-toolbar-left">').insertBefore(children[0]):$('<div class="ui-toolbar-left">').appendTo($toolbarWrap);btnGroups['left'].forEach(function(btn){$(btn).addClass('ui-toolbar-button');leftBtnContainer.append(btn);});rightBtnContainer=$('<div class="ui-toolbar-right">').appendTo($toolbarWrap);btnGroups['right'].forEach(function(btn){$(btn).addClass('ui-toolbar-button');rightBtnContainer.append(btn);});}
$el.addClass('ui-toolbar');$(me.title).length?$(me.title).addClass('ui-toolbar-title'):$('<h1 class="ui-toolbar-title">'+opts.title+'</h1>').insertAfter(leftBtnContainer);;me.btnContainer={'left':leftBtnContainer,'right':rightBtnContainer};me.addBtns('left',opts.leftBtns);me.addBtns('right',opts.rightBtns);},_addBtn:function(container,btn){var me=this;$(btn).appendTo(container).addClass('ui-toolbar-button');},addBtns:function(position,btns){var me=this,btnContainer=me.btnContainer[position],toString=Object.prototype.toString;if(toString.call(position)!='[object String]'){btns=position;btnContainer=me.btnContainer['right'];}
btns.forEach(function(btn,index){if(btn instanceof gmu.Base){btn=btn.getEl();}
me._addBtn(btnContainer,btn);});return me;},show:function(){var me=this;me.$el.show();me.trigger('show');me.isShowing=true;return me;},hide:function(){var me=this;me.$el.hide();me.trigger('hide');me.isShowing=false;return me;},toggle:function(){var me=this;me.isShowing===false?me.show():me.hide();return me;},_removeDom:function(){var me=this,$el=me.$el;if(me._options.setup===false){$el.remove();}else{$el.css('position','static').css('top','auto');}}});})(gmu,gmu.$);(function(gmu,$){gmu.Toolbar.register('position',{position:function(opts){this.$el.fix(opts);return this;}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.Refresh.register('iOS5',{_init:function(){var me=this,opts=me._options,$el=me.$el;$el.css({'overflow':'scroll','-webkit-overflow-scrolling':'touch'});opts.topOffset=opts['$upElem']?opts['$upElem'].height():0;opts.iScroll=me._getiScroll();$el.get(0).scrollTop=opts.topOffset;$el.on('touchstart touchmove touchend',$.proxy(me._eventHandler,me));},_changeStyle:function(dir,state){var me=this,opts=me._options,refreshInfo=opts.refreshInfo[dir];me.origin(dir,state);switch(state){case'loaded':refreshInfo['$icon'].addClass('ui-refresh-icon');opts._actDir='';break;case'beforeload':if(dir=='up'){refreshInfo['$label'].html(td_lang.pda.msg_5||'松开立即加载');}else{refreshInfo['$label'].html(td_lang.pda.msg_7||'松开立即加载');}
refreshInfo['$icon'].addClass('ui-refresh-flip');break;case'loading':refreshInfo['$icon'].removeClass().addClass('ui-loading');break;}
return me;},_scrollStart:function(e){var me=this,opts=me._options,topOffset=opts.topOffset,$upElem=opts.$upElem,wrapper=me.$el.get(0),_scrollFn=function(){clearTimeout(opts.topOffsetTimer);if($upElem&&$upElem.length&&wrapper.scrollTop<=topOffset&&!opts['_upRefreshed']){wrapper.scrollTop=topOffset;}};me.trigger('scrollstart',e);me._enableScroll()._bindScrollStop(wrapper,_scrollFn);opts.maxScrollY=wrapper.offsetHeight-wrapper.scrollHeight;opts._scrollFn=_scrollFn;return me;},_scrollMove:function(){var me=this,opts=me._options,up=opts.$upElem&&opts.$upElem.length,down=opts.$downElem&&opts.$downElem.length,wrapper=me.$el.get(0),threshold=opts.threshold||5;me._scrollMove=function(e){var maxScrollY=opts.maxScrollY,scrollY=wrapper.scrollTop,lastMoveY=opts.lastMoveY||scrollY,upRefreshed=opts['_upRefreshed'],downRefreshed=opts['_downRefreshed'],upStatus=me._status('up'),downStatus=me._status('down');if(up&&!upStatus||down&&!downStatus)return;opts.iScroll.deltaY=scrollY-lastMoveY;if(downStatus&&down&&!downRefreshed&&-scrollY<(maxScrollY-threshold)){me._setMoveState('down','beforeload','pull');}else if(downStatus&&down&&downRefreshed&&-scrollY>(maxScrollY-threshold)&&-scrollY!==maxScrollY){me._setMoveState('down','loaded','restore');}else if(upStatus&&up&&!upRefreshed&&-scrollY>threshold){me._setMoveState('up','beforeload','pull');}else if(upStatus&&up&&upRefreshed&&-scrollY<threshold&&scrollY){me._setMoveState('up','loaded','restore');}
opts.lastMoveY=scrollY;opts._moved=true;return me.trigger('scrollmove',e,scrollY,scrollY-lastMoveY);};me._scrollMove.apply(me,arguments);},_scrollEnd:function(e){var me=this,opts=me._options,wrapper=me.$el.get(0),topOffset=opts.topOffset,actDir=opts._actDir,restoreDir=opts._restoreDir;if((restoreDir=='up'||wrapper.scrollTop<=topOffset)&&!actDir&&opts._moved){me._options['topOffsetTimer']=setTimeout(function(){$(wrapper).off('scroll',opts._scrollFn);wrapper.scrollTop=topOffset;},800);}
if(actDir&&me._status(actDir)){me._setStyle(actDir,'loading');me._loadingAction(actDir,'pull');}
opts._moved=false;return me.trigger('scrollend',e);},_enableScroll:function(){var me=this,wrapper=me.$el.get(0),scrollY=wrapper.scrollTop;scrollY<=0&&(wrapper.scrollTop=1);if(scrollY+wrapper.offsetHeight>=wrapper.scrollHeight){wrapper.scrollTop=wrapper.scrollHeight-wrapper.offsetHeight-1;}
return me;},_bindScrollStop:function(elem,fn){var me=this,$elem=$(elem);$elem.off('scroll',me._options._scrollFn).on('scroll',$.debounce(100,function(){$elem.off('scroll',arguments.callee).one('scroll',fn);},false));return me;},_getiScroll:function(){var me=this,$wrapper=me.$el,wrapper=$wrapper[0];return{el:wrapper,deltaY:0,scrollTo:function(y,time,relative){if(relative){y=wrapper.scrollTop+y;}
$wrapper.css({'-webkit-transition-property':'scrollTop','-webkit-transition-duration':y+'ms'});wrapper.scrollTop=y;},disable:function(destroy){destroy&&me.destroy();$wrapper.css('overflow','hidden');},enable:function(){$wrapper.css('overflow','scroll');}}},_setMoveState:function(dir,state,actType){var me=this,opts=me._options;me._setStyle(dir,state);opts['_'+dir+'Refreshed']=actType=='pull';opts['_actDir']=actType=='pull'?dir:'';opts['_restoreDir']=dir=='up'&&actType=='restore'?dir:''
return me;},_eventHandler:function(e){var me=this;switch(e.type){case'touchstart':me._scrollStart(e);break;case'touchmove':me._scrollMove(e);break;case'touchend':me._scrollEnd(e);break;}},afterDataLoading:function(dir){var me=this,opts=me._options,dir=dir||opts._actDir;opts['_'+dir+'Refreshed']=false;dir=='up'&&(me.$el.get(0).scrollTop=opts.topOffset);return me.origin(dir);}});})(gmu,gmu.$);(function(gmu,$,undefined){gmu.Refresh.register('iscroll',{_init:function(){var me=this,opts=me._options,$el=me.$el,wrapperH=$el.height();$.extend(opts,{useTransition:true,speedScale:1,topOffset:opts['$upElem']?opts['$upElem'].height():0});opts.threshold=opts.threshold||5;$el.wrapAll($('<div class="ui-refresh-wrapper"></div>').height(wrapperH)).css({'height':'auto','overflow':'hidden'});me.on('ready',function(){me._loadIscroll();});},_changeStyle:function(dir,state){var me=this,opts=me._options,refreshInfo=opts.refreshInfo[dir];me.origin(dir,state);switch(state){case'loaded':refreshInfo['$icon'].addClass('ui-refresh-icon');break;case'beforeload':if(dir=='up'){refreshInfo['$label'].html(td_lang.pda.msg_5||'松开立即加载');}else{refreshInfo['$label'].html(td_lang.pda.msg_7||'松开立即加载');}
refreshInfo['$icon'].addClass('ui-refresh-flip');break;case'loading':refreshInfo['$icon'].removeClass().addClass('ui-loading');break;}
return me;},_loadIscroll:function(){var me=this,opts=me._options,threshold=opts.threshold;opts.iScroll=new iScroll(me.$el.parent().get(0),opts.iScrollOpts=$.extend({useTransition:opts.useTransition,speedScale:opts.speedScale,topOffset:opts.topOffset},opts.iScrollOpts,{onScrollStart:function(e){me.trigger('scrollstart',e);},onScrollMove:(function(){var up=opts.$upElem&&opts.$upElem.length,down=opts.$downElem&&opts.$downElem.length;return function(e){var upRefreshed=opts['_upRefreshed'],downRefreshed=opts['_downRefreshed'],upStatus=me._status('up'),downStatus=me._status('down');if(up&&!upStatus||down&&!downStatus||this.maxScrollY>=0)return;if(downStatus&&down&&!downRefreshed&&this.y<(this.maxScrollY-threshold)){me._setMoveState('down','beforeload','pull');}else if(upStatus&&up&&!upRefreshed&&this.y>threshold){me._setMoveState('up','beforeload','pull');this.minScrollY=0;}else if(downStatus&&downRefreshed&&this.y>(this.maxScrollY+threshold)){me._setMoveState('down','loaded','restore');}else if(upStatus&&upRefreshed&&this.y<threshold){me._setMoveState('up','loaded','restore');this.minScrollY=-opts.topOffset;}
me.trigger('scrollmove',e);};})(),onScrollEnd:function(e){var actDir=opts._actDir;if(actDir&&me._status(actDir)){me._setStyle(actDir,'loading');me._loadingAction(actDir,'pull');}
me.trigger('scrollend',e);}}));},_setMoveState:function(dir,state,actType){var me=this,opts=me._options;me._setStyle(dir,state);opts['_'+dir+'Refreshed']=actType=='pull';opts['_actDir']=actType=='pull'?dir:'';return me;},afterDataLoading:function(dir){var me=this,opts=me._options,dir=dir||opts._actDir;opts.iScroll.refresh();opts['_'+dir+'Refreshed']=false;return me.origin(dir);}});})(gmu,gmu.$);
/* "/static/mobile/js/gmu/list.js" */
(function(gmu,$){var i=0;gmu.define('List',{options:{content:null,url:'',enableExtendOptions:false,baseParam:null,param:null,dataFix:null,dataType:'json',enablePullUp:true,enablePullDown:true},template:{item:'<li class="ui-border-t list-item-inserting" data-id="<%=id%>"><%=text></li>',emptyTip:'<section class="ui-notice"><i></i><p>'+td_lang.pda.no_cnt+'</p><button data-cmd="reload" class="ui-btn ui-btn-primary ui-margin-top">'+td_lang.pda.reload||'重新加载'+'</button></section>',wrap:'<div class="ui-refresh"><div class="ui-refresh-up"></div><ul class="data-list ui-list ui-border-tb"></ul><div class="ui-refresh-down"></div></div>'},_init:function(){var me=this;i++;me.on('done.dom',function(e,$root){me.guid=i;me.$list=$root.find('ul').first();me.refresh=new gmu.Refresh({el:me.getEl().find('.ui-refresh'),load:function(){me._ajax.apply(me,arguments);},$upElem:$root.find('.ui-refresh-up'),$downElem:$root.find('.ui-refresh-down')});me.getEl().attr('data-list-guid',i).css('height',window.innerHeight-($('header').height()||0)-($('footer').height()||0)).find('.ui-refresh-wrapper').css('height','100%');});me.getEl().on('click','[data-cmd]',function(){var action=this.getAttribute('data-cmd');switch(action){case"reload":me.$loading.show();me._ajax('reload');break;}});},_create:function(){var me=this,$el=me.getEl(),opts=me._options,content='',listContent='',isEmpty=false;content+=me.tpl2html('wrap');if($.isArray(opts.content)){listContent+=me.tpl2html('item',opts.content);}else{content+=me.tpl2html('emptyTip');isEmpty=true;}
$el.addClass('ui-list-state-initlizing');$el.append(content);$el.find('ul').first().html(listContent);me.trigger('done.dom',$el.addClass('ui-'+me.widgetName),opts);me.checkEmpty();me.$loading=$('<div></div>').loading({content:td_lang.pda.msg_2||'加载中...'});me._ajax('reload');},checkEmpty:function(){this.isEmpty=!this.$list.find('li').size();this.getEl()[this.isEmpty?'addClass':'removeClass']('ui-list-state-empty');},refreshIscroll:function(){var me=this;me.refresh._options.iScroll&&me.refresh._options.iScroll.refresh&&me.refresh._options.iScroll.refresh();},_ajax:function(dir,type){var me=this,$list=this.$list,opts=me._options,param=null;if(!opts.param){param=this.param;}else if($.isPlainObject(opts.param)){param=$.extend({},opts.baseParam,opts.param);}else if($.isFunction(opts.param)){param=opts.param.call(me,dir,type,this.param,function(_dir){dir=_dir});}
if(dir=='down'&&me.pulldownDisable){}
$.ajax({url:opts.url,data:param,type:'get',dataType:opts.dataType,beforeSend:function(xhr,settings){},success:function(data,status,xhr){var e=gmu.Event('success',e);me.$loading.hide();if(false===me.trigger(e,data,status,xhr)){return false;}
me.param=param;$.isFunction(opts.dataFix)&&(data=opts.dataFix(data));var count=0;if(data){var html=(function(data){var data=data.datalist?data.datalist:data;var liArr=[];if($.isPlainObject(data)){liArr.push(me.tpl2html('item',data));}else{$.each(data,function(){liArr.push(me.tpl2html('item',this));count++;});}
return liArr.join('');})(data.data?data.data:data);var act={up:'prepend',down:'append',reload:'html'};$list[act[dir]](html);if(opts.enableExtendOptions){var swiped=Swiped.init({query:'[data-list-guid="'+me.guid+'"] .data-list>.list-item-inserting',list:true,group:1,left:0,right:80});}
$list.find('.list-item-inserting').removeClass('list-item-inserting');count>0&&count<10&&me.getEl().find('.ui-refresh-down').hide();dir=='reload'&&(dir='up');me.refresh.afterDataLoading(dir);me.checkEmpty();me.refreshIscroll();}},error:function(xhr,errorType,error){var e=gmu.Event('error',e);if(false===me.trigger(e,xhr,errorType,error)){return false;}
var msg=xhr.response;if(msg.match(/nomoredata/ig)){me.refresh.afterDataLoading('down');me.getEl().find('.ui-refresh-down').hide();me.pulldownDisable=true;}else if(msg.match(/nonewdata/ig)){me.refresh.afterDataLoading('up');try{}catch(e){}}
setTimeout(function(){me.refreshIscroll();},1);me.$loading.hide();},complete:function(xhr,status){var e=gmu.Event('complete',e);if(false===me.trigger(e,me)){return false;}
me.getEl().removeClass('ui-list-state-initlizing')}});},setParam:function(key,value){this._options.baseParam['key']=value;},getParam:function(key){return this._options.baseParam['key'];},bindEvent:function(){}},gmu.Base);})(gmu,gmu.$);
/* "/static/mobile/js/gmu/page.js" */
(function(gmu,$){var i=0;var log=function(){console.log.apply(console,arguments);};gmu.define('Pages',{options:{router:null,header:null,activeClass:'ui-page-active'},_init:function(){var me=this,opts=me._options;function hashView(){var hash=location.hash;var firstSlashIndex=hash.indexOf('/');var hashId;if(firstSlashIndex!==-1){hashId=hash.slice(firstSlashIndex+1);}else{hashId='';}
if(!me.inited&&opts.active){me.setActivePage($(opts.active));}else if(hash&&hash.match(/#/)&&$(hash.replace(/\/.*/g,'')).size()){me.$active=me.setActivePage($(hash.replace(/\/.*/g,'')));}else{me.$active=me.getActivePage()||me.setActivePage(me.getEl().children().first());}
me.to(me.$active.attr('id'),hashId);}
window.addEventListener('hashchange',hashView,false);$('html').addClass('ui-fullscreen');me.initHeader(opts.header);me.initRouter(opts.router);hashView();me.inited=true;},initHeader:function(headers){if($.isPlainObject(headers)){this.headers=headers;}},initRouter:function(router){if($.isPlainObject(router)&&window.routie){this.router=routie(router);log(this.router);}},getActivePage:function(){var me=this;var $active=me.getEl().find('.'+me._options.activeClass);return $active.size()?$active:null;},setActivePage:function(el){var me=this,classname=me._options.activeClass;me.getEl().find('.'+classname).removeClass(classname);me.$active=$(el).addClass(classname);me.curpage=me.$active.attr('id');return me.$active;},renderHeader:function(header){tMobileSDK.buildHeader(header);},while:function(){var $el=this.getEl(),classname=this._options.activeClass;this.to(this.$active.next().size()?this.$active.next().attr('id'):$el.find('.ui-page').first().attr('id'));},to:function(to,hashId){this.pageTo(this.curPage,to,hashId);},pageTo:function(from,to,hashId){var headers=this.headers;if(headers[to]){this.curPage=to;this.renderHeader(headers[to]);this.setActivePage('#'+to);if(hashId){location.hash=to+'/'+hashId;}else{var url=location.href.split('#')[0]
var newState=url+'#'+to
var problemHash=['work','search_edit','form']
if(location.hash===''&&problemHash.indexOf(to)!==-1){history.replaceState(null,'',newState)}
location.hash=to;}}else{log('undefined headers[to] - '+to);}},back:function(){history.back();}},gmu.Base);})(gmu,gmu.$);
/* "/static/mobile/js/frozen/frozen.js" */
!function(a){function b(b){return a.adaptObject(this,d,b,c,e,"loading")}var c='<div class="ui-loading-block show"><div class="ui-loading-cnt"><i class="ui-loading-bright"></i><p><%=content%></p></div></div>',d={content:"加载中..."},e=function(b,c,e){this.element=a(b),this._isFromTpl=e,this.option=a.extend(d,c),this.show()};e.prototype={show:function(){var b=a.Event("loading:show");this.element.trigger(b),this.element.show()},hide:function(){var b=a.Event("loading:hide");this.element.trigger(b),this.element.remove()}},a.fn.loading=a.loading=b}(window.Zepto);!function(a){function b(b,d){var i=b[h],j=i&&e[i];if(void 0===d)return j||c(b);if(j){if(d in j)return j[d];var k=g(d);if(k in j)return j[k]}return f.call(a(b),d)}function c(b,c,f){var i=b[h]||(b[h]=++a.uuid),j=e[i]||(e[i]=d(b));return void 0!==c&&(j[g(c)]=f),j}function d(b){var c={};return a.each(b.attributes||i,function(b,d){0==d.name.indexOf("data-")&&(c[g(d.name.replace("data-",""))]=a.zepto.deserializeValue(d.value))}),c}var e={},f=a.fn.data,g=a.camelCase,h=a.expando="Zepto"+ +new Date,i=[];a.fn.data=function(d,e){return void 0===e?a.isPlainObject(d)?this.each(function(b,e){a.each(d,function(a,b){c(e,a,b)})}):0 in this?b(this[0],d):void 0:this.each(function(){c(this,d,e)})},a.fn.removeData=function(b){return"string"==typeof b&&(b=b.split(/\s+/)),this.each(function(){var c=this[h],d=c&&e[c];d&&a.each(b||d,function(a){delete d[b?g(this):a]})})},["remove","empty"].forEach(function(b){var c=a.fn[b];a.fn[b]=function(){var a=this.find("*");return"remove"===b&&(a=a.add(this)),a.removeData(),c.call(this)}})}(window.Zepto),!function(a){var b={};b.cache={},a.tpl=function(a,c,d){var e=/[^\w\-\.:]/.test(a)?function(a,b){var c,d=[],f=[];for(c in a)d.push(c),f.push(a[c]);return new Function(d,e.code).apply(b||a,f)}:b.cache[a]=b.cache[a]||this.get(document.getElementById(a).innerHTML);return e.code=e.code||"var $parts=[]; $parts.push('"+a.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/(^|%>)[^\t]*/g,function(a){return a.replace(/'/g,"\\'")}).replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("$parts.push('")+"'); return $parts.join('');",c?e(c,d):e},a.adaptObject=function(b,c,d,e,f,g){var h=b;if("string"!=typeof d){var i=a.extend({},c,"object"==typeof d&&d),j=!1;a.isArray(h)&&h.length&&"script"==a(h)[0].nodeName.toLowerCase()?(h=a(a.tpl(h[0].innerHTML,i)).appendTo("body"),j=!0):a.isArray(h)&&h.length&&""==h.selector?(h=a(a.tpl(h[0].outerHTML,i)).appendTo("body"),j=!0):a.isArray(h)||(h=a(a.tpl(e,i)).appendTo("body"),j=!0)}return h.each(function(){var b=a(this),e=b.data("fz."+g);e||b.data("fz."+g,e=new f(this,a.extend({},c,"object"==typeof d&&d),j)),"string"==typeof d&&e[d]()})}}(window.Zepto);!function(a){function b(b){return a.adaptObject(this,d,b,c,e,"tips")}var c='<div class="ui-poptips ui-poptips-<%=type%>"><div class="ui-poptips-bg"></div><div class="ui-poptips-cnt"><i></i><%=content%></div></div>',d={content:"",stayTime:1e3,type:"info",callback:function(){}},e=function(b,c,e){var f=this;this.element=a(b),this._isFromTpl=e,this.elementHeight=a(b).height(),this.option=a.extend(d,c),a(b).css({"-webkit-transform":"translateY(-"+this.elementHeight+"px)"}),setTimeout(function(){a(b).css({"-webkit-transition":"all .5s"}),f.show()},20)};e.prototype={show:function(){var b=this;b.element.trigger(a.Event("tips:show")),this.element.css({"-webkit-transform":"translateY(0px)"}),b.option.stayTime>0&&setTimeout(function(){b.hide()},b.option.stayTime)},hide:function(){var b=this;b.element.trigger(a.Event("tips:hide")),this.element.css({"-webkit-transform":"translateY(-"+this.elementHeight+"px)"}),setTimeout(function(){b._isFromTpl&&b.element.remove()},500)}},a.fn.tips=a.tips=b}(window.Zepto);!function(a){function b(){return!1}function c(b){return a.adaptObject(this,e,b,d,f,"dialog")}var d='<div class="ui-dialog"><div class="ui-dialog-cnt"><div class="ui-dialog-bd"><div><h4><%=title%></h4><div><%=content%></div></div></div><div class="ui-dialog-ft ui-btn-group"><% for (var i = 0; i < button.length; i++) { %><% if (i == select) { %><button type="button" data-role="button"  class="select" id="dialogButton<%=i%>"><%=button[i]%></button><% } else { %><button type="button" data-role="button" id="dialogButton<%=i%>"><%=button[i]%></div><% } %><% } %></div></div></div>',e={title:"",content:"",button:["确认"],select:0,allowScroll:!1,callback:function(){}},f=function(b,c,d){this.option=a.extend(e,c),this.element=a(b),this._isFromTpl=d,this.button=a(b).find('[data-role="button"]'),this._bindEvent(),this.toggle()};f.prototype={_bindEvent:function(){var b=this;b.button.on("tap",function(){var c=a(b.button).index(a(this)),d=a.Event("dialog:action");d.index=c,b.element.trigger(d),b.hide.apply(b)})},toggle:function(){this.element.hasClass("show")?this.hide():this.show()},show:function(){var c=this;c.element.trigger(a.Event("dialog:show")),c.element.addClass("show"),this.option.allowScroll&&c.element.on("touchmove",b)},hide:function(){var c=this;c.element.trigger(a.Event("dialog:hide")),c.element.off("touchmove",b),c.element.removeClass("show"),c._isFromTpl&&c.element.remove()}},a.fn.dialog=a.dialog=c}(window.Zepto);!function(a){function b(b,c){this.wrapper="string"==typeof b?a(b)[0]:b,this.options={startX:0,startY:0,scrollY:!0,scrollX:!1,directionLockThreshold:5,momentum:!0,duration:300,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,eventPassthrough:!0,freeScroll:!1,bindToWrapper:!0,resizePolling:60,disableMouse:!1,disableTouch:!1,disablePointer:!1,tap:!0,click:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var e in c)this.options[e]=c[e];if(this.options.role||this.options.scrollX!==!1||(this.options.eventPassthrough="horizontal"),"slider"===this.options.role){if(this.options.scrollX=!0,this.options.scrollY=!1,this.options.momentum=!1,this.scroller=a(".ui-slider-content")[0],a(this.scroller.children[0]).addClass("current"),this.currentPage=0,this.count=this.scroller.children.length,this.scroller.style.width=this.count+"00%",this.itemWidth=this.scroller.children[0].clientWidth,this.scrollWidth=this.itemWidth*this.count,this.options.indicator){for(var f='<ul class="ui-slider-indicators">',e=1;e<=this.count;e++)f+=1===e?'<li class="current">'+e+"</li>":"<li>"+e+"</li>";f+="</ul>",a(this.wrapper).append(f),this.indicator=a(".ui-slider-indicators")[0]}}else"tab"===this.options.role?(this.options.scrollX=!0,this.options.scrollY=!1,this.options.momentum=!1,this.scroller=a(".ui-tab-content")[0],this.nav=a(".ui-tab-nav")[0],a(this.scroller.children[0]).addClass("current"),a(this.nav.children[0]).addClass("current"),this.currentPage=0,this.count=this.scroller.children.length,this.scroller.style.width=this.count+"00%",this.itemWidth=this.scroller.children[0].clientWidth,this.scrollWidth=this.itemWidth*this.count):this.scroller=this.wrapper.children[0];if(this.scrollerStyle=this.scroller.style,this.translateZ=d.hasPerspective&&this.options.HWCompositing?" translateZ(0)":"",this.options.useTransition=d.hasTransition&&this.options.useTransition,this.options.useTransform=d.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?d.ease[this.options.bounceEasing]||d.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransform===!1&&(this.scroller.style.position="relative"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable(),this.options.autoplay){var g=this;this.options.interval=this.options.interval||2e3,this.options.flag=setTimeout(function(){g._autoplay.apply(g)},g.options.interval)}}var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)},d=function(){function a(a){return d===!1?!1:""===d?a:d+a.charAt(0).toUpperCase()+a.substr(1)}var b={},c=document.createElement("div").style,d=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],d=0,e=b.length;e>d;d++)if(a=b[d]+"ransform",a in c)return b[d].substr(0,b[d].length-1);return!1}();b.getTime=Date.now||function(){return(new Date).getTime()},b.extend=function(a,b){for(var c in b)a[c]=b[c]},b.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},b.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},b.prefixPointerEvent=function(a){return window.MSPointerEvent?"MSPointer"+a.charAt(9).toUpperCase()+a.substr(10):a},b.momentum=function(a,b,c,d,e,f){var g,h,i=a-b,j=Math.abs(i)/c;return f=void 0===f?6e-4:f,g=a+j*j/(2*f)*(0>i?-1:1),h=j/f,d>g?(g=e?d-e/2.5*(j/8):d,i=Math.abs(g-a),h=i/j):g>0&&(g=e?e/2.5*(j/8):0,i=Math.abs(a)+g,h=i/j),{destination:Math.round(g),duration:h}};var e=a("transform");return b.extend(b,{hasTransform:e!==!1,hasPerspective:a("perspective")in c,hasTouch:"ontouchstart"in window,hasPointer:window.PointerEvent||window.MSPointerEvent,hasTransition:a("transition")in c}),b.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion),b.extend(b.style={},{transform:e,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin"),transitionProperty:a("transitionProperty")}),b.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},b.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},b.extend(b.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),b.extend(b.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,c=.4;return 0===a?0:1==a?1:c*Math.pow(2,-10*a)*Math.sin(2*(a-b/4)*Math.PI/b)+1}}}),b.tap=function(a,b){var c=document.createEvent("Event");c.initEvent(b,!0,!0),c.pageX=a.pageX,c.pageY=a.pageY,a.target.dispatchEvent(c)},b.click=function(a){var b,c=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(c.tagName)||(b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),b._constructed=!0,c.dispatchEvent(b))},b}();b.prototype={_init:function(){this._initEvents()},_initEvents:function(a){var b=a?d.removeEvent:d.addEvent,c=this.options.bindToWrapper?this.wrapper:window;b(window,"orientationchange",this),b(window,"resize",this),this.options.click&&b(this.wrapper,"click",this,!0),this.options.disableMouse||(b(this.wrapper,"mousedown",this),b(c,"mousemove",this),b(c,"mousecancel",this),b(c,"mouseup",this)),d.hasPointer&&!this.options.disablePointer&&(b(this.wrapper,d.prefixPointerEvent("pointerdown"),this),b(c,d.prefixPointerEvent("pointermove"),this),b(c,d.prefixPointerEvent("pointercancel"),this),b(c,d.prefixPointerEvent("pointerup"),this)),d.hasTouch&&!this.options.disableTouch&&(b(this.wrapper,"touchstart",this),b(c,"touchmove",this),b(c,"touchcancel",this),b(c,"touchend",this)),b(this.scroller,"transitionend",this),b(this.scroller,"webkitTransitionEnd",this),b(this.scroller,"oTransitionEnd",this),b(this.scroller,"MSTransitionEnd",this),"tab"===this.options.role&&(b(this.nav,"touchend",this),b(this.nav,"mouseup",this),b(this.nav,"pointerup",this))},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight;var a=window.getComputedStyle(this.wrapper,null),b=a["padding-top"].replace(/[^-\d.]/g,""),c=a["padding-bottom"].replace(/[^-\d.]/g,""),e=a["padding-left"].replace(/[^-\d.]/g,""),f=a["padding-right"].replace(/[^-\d.]/g,""),g=window.getComputedStyle(this.scroller,null),h=g["margin-top"].replace(/[^-\d.]/g,""),i=g["margin-bottom"].replace(/[^-\d.]/g,""),j=g["margin-left"].replace(/[^-\d.]/g,""),k=g["margin-right"].replace(/[^-\d.]/g,"");this.scrollerWidth=this.scroller.offsetWidth+parseInt(e)+parseInt(f)+parseInt(j)+parseInt(k),this.scrollerHeight=this.scroller.offsetHeight+parseInt(b)+parseInt(c)+parseInt(h)+parseInt(i),("slider"===this.options.role||"tab"===this.options.role)&&(this.itemWidth=this.scroller.children[0].clientWidth,this.scrollWidth=this.itemWidth*this.count,this.scrollerWidth=this.scrollWidth),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=d.offset(this.wrapper),this.resetPosition()},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}},_start:function(a){if(!(1!=d.eventType[a.type]&&0!==a.button||!this.enabled||this.initiated&&d.eventType[a.type]!==this.initiated)){!this.options.preventDefault||d.isBadAndroid||d.preventDefaultException(a.target,this.options.preventDefaultException)||a.preventDefault();var b,c=a.touches?a.touches[0]:a;if(this.initiated=d.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=d.getTime(),this.options.useTransition&&this.isInTransition&&"slider"!==this.options.role&&"tab"!==this.options.role?(this.isInTransition=!1,b=this.getComputedPosition(),this._translate(Math.round(b.x),Math.round(b.y))):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=c.pageX,this.pointY=c.pageY,this.options.autoplay){var e=this;clearTimeout(this.options.flag),this.options.flag=setTimeout(function(){e._autoplay.apply(e)},e.options.interval)}event.stopPropagation()}},_move:function(b){if(this.enabled&&d.eventType[b.type]===this.initiated){this.options.preventDefault&&b.preventDefault();var c,e,f,g,h=b.touches?b.touches[0]:b,i=h.pageX-this.pointX,j=h.pageY-this.pointY,k=d.getTime();if(this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=i,this.distY+=j,f=Math.abs(this.distX),g=Math.abs(this.distY),!(k-this.endTime>300&&10>f&&10>g)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=f>g+this.options.directionLockThreshold?"h":g>=f+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("tab"===this.options.role&&a(this.scroller).children("li").height("auto"),"vertical"==this.options.eventPassthrough)b.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);j=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)b.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,j=this.hasVerticalScroll?j:0,c=this.x+i,e=this.y+j,(c>0||c<this.maxScrollX)&&(c=this.options.bounce?this.x+i/3:c>0?0:this.maxScrollX),(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+j/3:e>0?0:this.maxScrollY),this.directionX=i>0?-1:0>i?1:0,this.directionY=j>0?-1:0>j?1:0,this.moved=!0,this._translate(c,e),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y)}}},_end:function(b){if(this.enabled&&d.eventType[b.type]===this.initiated){this.options.preventDefault&&!d.preventDefaultException(b.target,this.options.preventDefaultException)&&b.preventDefault();var c,e,f=(b.changedTouches?b.changedTouches[0]:b,d.getTime()-this.startTime),g=Math.round(this.x),h=Math.round(this.y),i=Math.abs(g-this.startX),j=(Math.abs(h-this.startY),0),k="";if(this.isInTransition=0,this.initiated=0,this.endTime=d.getTime(),this.resetPosition(this.options.bounceTime))return void("tab"===this.options.role&&a(this.scroller.children[this.currentPage]).siblings("li").height(0));if(this.scrollTo(g,h),this.moved||(this.options.tap&&1===d.eventType[b.type]&&d.tap(b,this.options.tap),this.options.click&&d.click(b)),this.options.momentum&&300>f&&(c=this.hasHorizontalScroll?d.momentum(this.x,this.startX,f,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:g,duration:0},e=this.hasVerticalScroll?d.momentum(this.y,this.startY,f,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:h,duration:0},g=c.destination,h=e.destination,j=Math.max(c.duration,e.duration),this.isInTransition=1),g!=this.x||h!=this.y)return(g>0||g<this.maxScrollX||h>0||h<this.maxScrollY)&&(k=d.ease.quadratic),void this.scrollTo(g,h,j,k);if("tab"===this.options.role&&a(event.target).closest("ul").hasClass("ui-tab-nav")){a(this.nav).children().removeClass("current"),a(event.target).addClass("current");var l=this.currentPage;this.currentPage=a(event.target).index(),a(this.scroller).children().height("auto"),this._execEvent("beforeScrollStart",l,this.currentPage)}("slider"===this.options.role||"tab"===this.options.role)&&(30>i?this.scrollTo(-this.itemWidth*this.currentPage,0,this.options.bounceTime,this.options.bounceEasing):g-this.startX<0?(this._execEvent("beforeScrollStart",this.currentPage,this.currentPage+1),this.scrollTo(-this.itemWidth*++this.currentPage,0,this.options.bounceTime,this.options.bounceEasing)):g-this.startX>=0&&(this._execEvent("beforeScrollStart",this.currentPage,this.currentPage-1),this.scrollTo(-this.itemWidth*--this.currentPage,0,this.options.bounceTime,this.options.bounceEasing)),"tab"===this.options.role&&a(this.scroller.children[this.currentPage]).siblings("li").height(0),this.indicator&&i>=30?(a(this.indicator).children().removeClass("current"),a(this.indicator.children[this.currentPage]).addClass("current")):this.nav&&i>=30&&(a(this.nav).children().removeClass("current"),a(this.nav.children[this.currentPage]).addClass("current")),a(this.scroller).children().removeClass("current"),a(this.scroller.children[this.currentPage]).addClass("current"))}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd",this.currentPage)))},destroy:function(){this._initEvents(!0)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},scrollTo:function(a,b,c,e){e=e||d.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&e.style?(("slider"===this.options.role||"tab"===this.options.role)&&(c=this.options.duration,this.scrollerStyle[d.style.transitionProperty]=d.style.transform),this.scrollerStyle[d.style.transitionTimingFunction]=e.style,this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,e.fn)},scrollToElement:function(a,b,c,e,f){if(a=a.nodeType?a:this.scroller.querySelector(a)){var g=d.offset(a);g.left-=this.wrapperOffset.left,g.top-=this.wrapperOffset.top,c===!0&&(c=Math.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),e===!0&&(e=Math.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),g.left-=c||0,g.top-=e||0,g.left=g.left>0?0:g.left<this.maxScrollX?this.maxScrollX:g.left,g.top=g.top>0?0:g.top<this.maxScrollY?this.maxScrollY:g.top,b=void 0===b||null===b||"auto"===b?Math.max(Math.abs(this.x-g.left),Math.abs(this.y-g.top)):b,this.scrollTo(g.left,g.top,b,f)}},_transitionTime:function(a){a=a||0,this.scrollerStyle[d.style.transitionDuration]=a+"ms",!a&&d.isBadAndroid&&(this.scrollerStyle[d.style.transitionDuration]="0.001s")},_translate:function(a,b){this.options.useTransform?this.scrollerStyle[d.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=Math.round(a),b=Math.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b},getComputedPosition:function(){var a,b,c=window.getComputedStyle(this.scroller,null);return this.options.useTransform?(c=c[d.style.transform].split(")")[0].split(", "),a=+(c[12]||c[4]),b=+(c[13]||c[5])):(a=+c.left.replace(/[^-\d.]/g,""),b=+c.top.replace(/[^-\d.]/g,"")),{x:a,y:b}},_animate:function(a,b,e,f){function g(){var m,n,o,p=d.getTime();return p>=l?(h.isAnimating=!1,h._translate(a,b),void(h.resetPosition(h.options.bounceTime)||h._execEvent("scrollEnd",this.currentPage))):(p=(p-k)/e,o=f(p),m=(a-i)*o+i,n=(b-j)*o+j,h._translate(m,n),void(h.isAnimating&&c(g)))}var h=this,i=this.x,j=this.y,k=d.getTime(),l=k+e;this.isAnimating=!0,g()},_autoplay:function(){var b=this,c=b.currentPage;b.currentPage=b.currentPage>=b.count-1?0:++b.currentPage,b._execEvent("beforeScrollStart",c,b.currentPage),"tab"===this.options.role&&(a(this.scroller).children().height("auto"),document.body.scrollTop=0),b.scrollTo(-b.itemWidth*b.currentPage,0,b.options.bounceTime,b.options.bounceEasing),b.indicator?(a(b.indicator).children().removeClass("current"),a(b.indicator.children[b.currentPage]).addClass("current"),a(b.scroller).children().removeClass("current"),a(b.scroller.children[b.currentPage]).addClass("current")):b.nav&&(a(b.nav).children().removeClass("current"),a(b.nav.children[b.currentPage]).addClass("current"),a(b.scroller).children().removeClass("current"),a(b.scroller.children[b.currentPage]).addClass("current")),b.options.flag=setTimeout(function(){b._autoplay.apply(b)},b.options.interval)}},window.fz=window.fz||{},window.frozen=window.frozen||{},window.fz.Scroll=window.frozen.Scroll=b,"function"==typeof define&&define(function(a,c,d){d.exports=b})}(window.Zepto);
/* "/static/mobile/js/swiped/swiped.js" */
(function(){var msPointer=window.navigator.msPointerEnabled;var touch={start:msPointer?'MSPointerDown':'touchstart',move:msPointer?'MSPointerMove':'touchmove',end:msPointer?'MSPointerUp':'touchend'};var prefix=(function(){var styles=window.getComputedStyle(document.documentElement,'');var pre=(Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/)||(styles.OLink===''&&['','o']))[1];return'-'+pre+'-';})();var transitionEvent=(function(){var t,el=document.createElement("fakeelement");var transitions={"transition":"transitionend","OTransition":"oTransitionEnd","MozTransition":"transitionend","WebkitTransition":"webkitTransitionEnd"};for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}})();var cssProps={'transition':prefix+'transition','transform':prefix+'transform'};function delegate(event,cbName){document.addEventListener(event,function(e){Swiped._elems.forEach(function(Swiped){var target=e.target;while(target){if(target===Swiped.elem){Swiped[cbName](e);return false;}
target=target.parentNode;}
return false;});});}
function extend(){var current=[].shift.call(arguments);var options=arguments[0];for(var i in options){if(options.hasOwnProperty(i)){current[i]=options[i];}}
return current;}
var fn=function(){};var Swiped=function(o){var defaultOptions={duration:200,tolerance:50,time:200,dir:1,right:0,left:0};o=extend(defaultOptions,o||{});this.duration=o.duration;this.tolerance=o.tolerance;this.time=o.time;this.width=o.left||o.right;this.elem=o.elem;this.list=o.list;this.dir=o.dir;this.group=o.group;this.id=Swiped.elemId++;this.onOpen=typeof o.onOpen==='function'?o.onOpen:fn;this.onClose=typeof o.onClose==='function'?o.onClose:fn;this.right=o.right;this.left=o.left;if((o.right>0&&o.tolerance>o.right)||(o.left>0&&o.tolerance>o.left)){console.warn('tolerance must be less then left and right');}};Swiped._elems=[];Swiped.groupCounter=0;Swiped.elemId=0;Swiped.init=function(o){Swiped.groupCounter++;var elems=document.querySelectorAll(o.query);var group=[];delete o.query;[].forEach.call(elems,function(elem){var option=extend({elem:elem,group:Swiped.groupCounter},o);group.push(new Swiped(option));});Swiped._bindEvents();Swiped._elems=Swiped._elems.concat(group);if(group.length===1){return group[0];}
return group;};Swiped._closeAll=function(groupNumber){Swiped._elems.forEach(function(Swiped){if(Swiped.group===groupNumber){Swiped.close(true);}});};Swiped.prototype.transitionEnd=function(node,cb){var that=this;function trEnd(){cb.call(that);node.removeEventListener(transitionEvent,trEnd);}
node.addEventListener(transitionEvent,trEnd);};Swiped.prototype.touchStart=function(e){var touch=e.changedTouches[0];if(e.touches.length!==1){return;}
this.touchId=touch.identifier;this.x=touch.pageX;this.y=touch.pageY;this.startTime=new Date();this.resetValue();if(this.list){Swiped._closeAll(this.group);}else{this.close(true);}};Swiped.prototype.touchMove=function(e){var touch=e.changedTouches[0];if(!this.isValidTouch(e)){return;}
this.delta=touch.pageX-this.x;this.dir=this.delta<0?-1:1;this.width=this.delta<0?this.right:this.left;this.defineUserAction(touch);if(this.startSwipe){this.move();e.preventDefault();}};Swiped.prototype.touchEnd=function(e){if(!this.isValidTouch(e,true)||!this.startSwipe){return;}
if(this.dir*this.delta>this.tolerance||new Date()-this.startTime<this.time){this.open();}else{this.close();}
e.stopPropagation();e.preventDefault();};Swiped.prototype.open=function(isForce){this.animation(this.dir*this.width);this.swiped=true;if(!isForce){this.transitionEnd(this.elem,this.onOpen);}
this.resetValue();};Swiped.prototype.close=function(isForce){this.animation(0);this.swiped=false;if(!isForce){this.transitionEnd(this.elem,this.onClose);}
this.resetValue();};Swiped.prototype.toggle=function(){if(this.swiped){this.close();}else{this.open();}};Swiped.prototype.resetValue=function(){this.startSwipe=false;this.startScroll=false;this.delta=0;};Swiped._bindEvents=function(){if(Swiped.eventBinded){return false;}
delegate(touch.move,'touchMove');delegate(touch.end,'touchEnd');delegate(touch.start,'touchStart');Swiped.eventBinded=true;};Swiped.prototype.defineUserAction=function(touch){var DELTA_X=10;var DELTA_Y=10;if(Math.abs(this.y-touch.pageY)>DELTA_Y&&!this.startSwipe){this.startScroll=true;}else if(Math.abs(this.delta)>DELTA_X&&!this.startScroll){this.startSwipe=true;}};Swiped.prototype.isValidTouch=function(e,isTouchEnd){var touches=isTouchEnd?'changedTouches':'targetTouches';return e[touches][0].identifier===this.touchId;};Swiped.prototype.move=function(){if((this.dir>0&&(this.delta<0||this.left===0))||(this.dir<0&&(this.delta>0||this.right===0))){return false;}
var deltaAbs=Math.abs(this.delta);if(deltaAbs>this.width){this.delta=this.dir*(this.width+(deltaAbs-this.width)/ 8);}
this.animation(this.delta,0);};Swiped.prototype.animation=function(x,duration){duration=duration===undefined?this.duration:duration;this.elem.style.cssText=cssProps.transition+':'+cssProps.transform+' '+duration+'ms; '+
cssProps.transform+':'+'translate3d('+x+'px, 0px, 0px)';};Swiped.prototype.destroy=function(isRemoveNode){var id=this.id;Swiped._elems.forEach(function(elem,i){if(elem.id===id){Swiped._elems.splice(i,1);}});if(isRemoveNode){this.elem.parentNode.removeChild(this.elem);}};window.Swiped=Swiped;})();
/* "/static/mobile/js/routie.min.js" */
/*!
 * routie - a tiny hash router
 * v0.3.2
 * http://projects.jga.me/routie
 * copyright Greg Allen 2013
 * MIT License
*/
(function(n){var e=[],t={},r="routie",o=n[r],i=function(n,e){this.name=e,this.path=n,this.keys=[],this.fns=[],this.params={},this.regex=a(this.path,this.keys,!1,!1)};i.prototype.addHandler=function(n){this.fns.push(n)},i.prototype.removeHandler=function(n){for(var e=0,t=this.fns.length;t>e;e++){var r=this.fns[e];if(n==r)return this.fns.splice(e,1),void 0}},i.prototype.run=function(n){for(var e=0,t=this.fns.length;t>e;e++)this.fns[e].apply(this,n)},i.prototype.match=function(n,e){var t=this.regex.exec(n);if(!t)return!1;for(var r=1,o=t.length;o>r;++r){var i=this.keys[r-1],a="string"==typeof t[r]?decodeURIComponent(t[r]):t[r];i&&(this.params[i.name]=a),e.push(a)}return!0},i.prototype.toURL=function(n){var e=this.path;for(var t in n)e=e.replace("/:"+t,"/"+n[t]);if(e=e.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=e.indexOf(":"))throw Error("missing parameters for url: "+e);return e};var a=function(n,e,t,r){return n instanceof RegExp?n:(n instanceof Array&&(n="("+n.join("|")+")"),n=n.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(n,t,r,o,i,a){return e.push({name:o,optional:!!a}),t=t||"",""+(a?"":t)+"(?:"+(a?t:"")+(r||"")+(i||r&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),RegExp("^"+n+"$",t?"":"i"))},s=function(n,r){var o=n.split(" "),a=2==o.length?o[0]:null;n=2==o.length?o[1]:o[0],t[n]||(t[n]=new i(n,a),e.push(t[n])),t[n].addHandler(r)},h=function(n,e){if("function"==typeof e)s(n,e),h.reload();else if("object"==typeof n){for(var t in n)s(t,n[t]);h.reload()}else e===void 0&&h.navigate(n)};h.lookup=function(n,t){for(var r=0,o=e.length;o>r;r++){var i=e[r];if(i.name==n)return i.toURL(t)}},h.remove=function(n,e){var r=t[n];r&&r.removeHandler(e)},h.removeAll=function(){t={},e=[]},h.navigate=function(n,e){e=e||{};var t=e.silent||!1;t&&l(),setTimeout(function(){window.location.hash=n,t&&setTimeout(function(){p()},1)},1)},h.noConflict=function(){return n[r]=o,h};var f=function(){return window.location.hash.substring(1)},c=function(n,e){var t=[];return e.match(n,t)?(e.run(t),!0):!1},u=h.reload=function(){for(var n=f(),t=0,r=e.length;r>t;t++){var o=e[t];if(c(n,o))return}},p=function(){n.addEventListener?n.addEventListener("hashchange",u,!1):n.attachEvent("onhashchange",u)},l=function(){n.removeEventListener?n.removeEventListener("hashchange",u):n.detachEvent("onhashchange",u)};p(),n[r]=h})(window);
/* "/static/mobile/js/sdk.js" */
tMobileSDK=window.tMobileSDK||{};tMobileSDK.configs={headerType:'wx-footer',hasBuildFunc:false};tMobileSDK.getFileTypeIcon=function(file_type){var prefix='/static/images/file_type/v2019/form.';var suffix='.icon@3x.png';var iconHash={"apk":"apk","audio":"audio","bmp":"bmp","cad":"cad","docx":"word","doc":"word","excel":"excel","file":"file","gz":"zip","gif":"gif","iso":"iso","jpg":"jpg","jpeg":"jpg","log":"log","pdf":"pdf","pptx":"pptx","psd":"psd","sql":"sql","txt":"txt","tgz":"zip","tar":"zip","video":"video","word":"word","xls":"excel","xlsx":"excel","xlt":"excel","zip":"zip","z":"zip",}
if(iconHash[file_type]){return prefix+iconHash[file_type]+suffix}else{return prefix+'unknow'+suffix}}
tMobileSDK.showUserDetails=function(opts){}
tMobileSDK.util={eval:function(expression){try{eval(expression);}catch(error){console.error(error.message);}}};tMobileSDK.closeWebview=function(){window.history.back()}
tMobileSDK.buildHeader=function(headerData,options){options=options||{};options.type=options.type?options.type:this.configs.headerType;if($('.sdk-'+options.type).length>0){$('.sdk-'+options.type).remove();$('body .ui-actionsheet').remove();tMobileSDK.configs.hasBuildFunc=false;}
if(!headerData){return false;}else{var isEmpty=true;for(var prop in headerData){isEmpty=false;break;}
if(isEmpty){return false;}}
var opts={};var wxhtml='';opts.container=options.targetEl||'body';if((headerData.l!=undefined)&&(headerData.l.event!=undefined)){opts.leftBtns=new Array('<i class="ui-icon-return" data-op="'+headerData.l.event+'"></i>');}
opts.rightBtns=$.isPlainObject(headerData.r)?new Array("<button class='ui-btn "+headerData.r.class+"' data-op='"+headerData.r.event+"'>"+headerData.r.title+"</button>"):[];if($.isArray(headerData.c)){opts.title='';$.each(headerData.c,function(index,item){opts.title+='<button class="ui-btn '+(item.active?'active':'')+'" data-op="'+item.event+'">'+item.title+'</button>';wxhtml+='<li class="ui-border-r" data-op="'+item.event+'">'+item.title+'</li>';});}else{opts.title=headerData.c.title||'';document.title=opts.title;}
if($.isPlainObject(headerData.r)){wxhtml+='<li class="ui-border-r" data-op=\''+headerData.r.event+'\'>'+headerData.r.title+'</li>';}
wxhtml=wxhtml?'<ul class="ui-tiled ui-border-t">'+wxhtml:'';var _id=options.id||"J_toolbar",$el;if(options.type==="header"){$el=$('<header class="sdk-header ui-header ui-header-stable" id="'+_id+'"></header>').prependTo(opts.container).toolbar(opts);}else if(options.type==="footer"){$el=$('<footer class="sdk-footer ui-footer ui-footer-stable" id="'+_id+'"></footer>').prependTo(opts.container).toolbar(opts);}else if(options.type==='wx-footer'&&wxhtml){$el=$('<footer class="sdk-wx-footer ui-footer ui-footer-btn" id="'+_id+'"></footer>').prependTo(opts.container).html(wxhtml);$el.find('li').last().removeClass('ui-border-r').attr('data-op-dropdown',1);}
$('#'+_id+' .ui-icon-return').on('click',function(e){var cb=$(this).attr('data-op');if(cb){tMobileSDK.util.eval(cb);}});$('#'+_id+' .ui-toolbar-right .ui-btn').on('click',function(e){var cb=$(this).attr('data-op');if(cb){tMobileSDK.util.eval(cb);}});$('#'+_id+' .ui-toolbar-title .ui-btn').on('click',function(e){$('#'+_id+' .ui-toolbar-title .ui-btn').removeClass('active');$(this).addClass('active');var cb=$(this).attr('data-op');if(cb){tMobileSDK.util.eval(cb);document.title=$(this).text();}});$('#'+_id+'.sdk-wx-footer [data-op]').on('click',function(e){var cb=$(this).attr('data-op');if(cb){tMobileSDK.util.eval(cb);document.title=$(this).text();}});};tMobileSDK.buildFunc=function(funcData,opts){if(tMobileSDK.configs.hasBuildFunc){return false;}
var type=opts?opts.type:this.configs.headerType;if(type==="header"){var content=[];var callbacks={};for(var i=0,len=funcData.length;i<len;i++){content.push(funcData[i].title);callbacks[funcData[i].title]=funcData[i].event;if(i<funcData.length-1){content.push('divider');}}
configs={content:content,horizontal:false,align:'right',placement:'bottom',offset:{top:-5}};$('.sdk-header .ui-toolbar-right').dropmenu(configs).on('itemclick',function(e,li){var cb=$(li).text();e.preventDefault();if(cb){tMobileSDK.util.eval(callbacks[cb]);}
$('.sdk-header .ui-toolbar-right').trigger('click');$('.op-menu-mask').hide();});$('<div class="op-menu-mask"></div>').insertAfter('.sdk-header .ui-dropmenu').on('click',function(){$('.sdk-header .ui-toolbar-right').trigger('click');$(this).hide();});$('.sdk-header .ui-toolbar-right button').on('click',function(){$('.op-menu-mask').show();})
tMobileSDK.configs.hasBuildFunc=true;}
if(type=="footer"||type=='wx-footer'){var tmpl='<div class="ui-actionsheet">'+'<div class="ui-actionsheet-cnt">'+'<% for(var i=0; i<edit_opts.length; i++) { %>'+'<button class="op-btns" data-op="<%= edit_opts[i].event %>"><%= edit_opts[i].title %></button>'+'<% } %>'+'<button class="hide-op-menu">'+td_lang.pda.cancel||'取消'+'</button>'+'</div>'+'</div>';var dest=$.tpl(tmpl,{edit_opts:funcData});$('body').append(dest);$('.ui-actionsheet').addClass('show');$('.hide-op-menu').on('click',function(){$('.ui-actionsheet').removeClass('show');});$('.ui-actionsheet').on('click',function(){$('.ui-actionsheet').removeClass('show');});$('.sdk-footer .ui-toolbar-right button,.sdk-wx-footer [data-op-dropdown="1"]').on('click',function(){$('.ui-actionsheet').addClass('show');})
$('.ui-actionsheet .op-btns').on('click',function(e){var cb=$(this).attr('data-op');if(cb){tMobileSDK.util.eval(cb);}
$('.ui-actionsheet').removeClass('show');})
tMobileSDK.configs.hasBuildFunc=true;}};tMobileSDK.collectInfo=function(url){if(!url){return;}
var params={};if(navigator.userAgent){params.ua=navigator.userAgent;};if(window.screen){params.sw=window.screen.width;params.sh=window.screen.height;};if(window.location){params.host=window.location.host;params.url=window.location.href;}
params.platform=this.platForm||'';try{var timing=performance.timing.toJSON();var result={};for(var key in timing){if(timing[key]){result[key]=timing[key];}}
params.timing=JSON.stringify(result);}catch(e){}
var args='';for(var i in params){if(args!=''){args+='&';}
args+=i+'='+encodeURIComponent(params[i]);}
var img=new Image(1,1);img.src=url+'?'+args;};tMobileSDK.selectUser=function(opts){if(window.userselect!=undefined||window.userselect!=null){userselect=null;}
window.userselect={params:{searchUserUrl:'/mobile/inc/get_contactlist.php',$el:null,tpl:{'container':'<section class="ui-container userselect-ui-container deptselect-ui-container" style="z-index:10001"> <footer class="ui-footer ui-footer-btn"> <div class="ui-footer ui-footer-stable ui-btn-group ui-border-t"> <button node-type="confirm" class="ui-btn-lg ui-btn-primary">确认</button> <button node-type="cancel" class="ui-btn-lg">取消</button> </div> </footer> <section class="ui-container"> <div class="ui-searchbar-wrap ui-border-b focus"> <div class="ui-searchbar ui-border-radius"> <i class="ui-icon-search"></i> <div class="ui-searchbar-text">姓名</div> <div class="ui-searchbar-input"> <input value="" type="text" placeholder="姓名" autocapitalize="off"> </div></div> <button type="button" class="ui-btn ui-btn-s search-confirm">搜索</button><button type="button" class="ui-btn ui-btn-s search-close">取消</button></div><ul id="ul-userslist" class="ui-list ui-border-tb" style="position:fixed;top:45px;bottom:0px;overflow:auto;touch-action:pan-y;"></ul><ul id="ul-searchlist" class="ui-list ui-border-tb" style="display:none;z-index:999;position: fixed;top: 45px;background: #fff;bottom: 0;overflow:auto;touch-action:pan-y;"></ul> </section></section>','user':'<li class="ui-border-t" data-uid="<%=uid%>" data-user-name="<%user_name%>"><label class="ui-checkbox"><input type="checkbox"><p><%=user_name%></p></label></li>'},allusers:[]},init:function(options){var self=this;this.config={users:[],wrapper:'body',confirmCallback:function(){},cancelCallback:function(){}};this.config=$.extend(true,{},this.config,options);this.initDom();this.initUsers();this.bindEvent();},initDom:function(){$(this.config.wrapper).append(gmu.$.tpl(this.params.tpl.container,{}));this.$el=$('.userselect-ui-container');},initUsers:function(){var self=this;var opts={A:'get_ALLUSER',KWORD:'',P:P};var el=$.loading({content:'加载中...',});$.getJSON(this.params.searchUserUrl,opts,function(data){el.loading("hide");self.params.allusers=data;self.render();});},render:function(){var self=this;var allusers=this.params.allusers;var users=this.config.users;var html='';$.each(allusers,function(k,user){html+='<li class="ui-border-t userselect-item" data-uid="'+user.uid+'" data-user-name="'+user.user_name+'"><label class="ui-checkbox"><input type="checkbox"><p>'+user.user_name+'</p></label></li>';})
$('#ul-userslist').html(html);this.config.users.forEach(function(uid){$('[data-uid="'+uid+'"]').find('input').prop('checked',true);});},renderSearch:function(keyword){$('#ul-searchlist').show();var self=this;var opts={A:'get_SearchUser',KWORD:keyword,P:P};$.getJSON(this.params.searchUserUrl,opts,function(data){var html='';$.each(data,function(k,user){html+='<li class="ui-border-t userselect-item" data-uid="'+user.uid+'" data-user-name="'+user.user_name+'"><label class="ui-checkbox"><input type="checkbox"><p>'+user.user_name+'</p></label></li>';})
$('#ul-searchlist').html(html);self.config.users.forEach(function(uid){$('[data-uid="'+uid+'"]').find('input').prop('checked',true);});})},cancelSearch:function(){$('#ul-searchlist').hide().html('');this.config.users.forEach(function(uid){$('[data-uid="'+uid+'"]').find('input').prop('checked',true);});},bindEvent:function(){var self=this;this.$el.delegate('li.userselect-item','tap',function(){var uid=$(this).attr('data-uid');var index=self.config.users.indexOf(uid)
if(index!=-1){self.config.users.splice($.inArray(uid,self.config.users),1);}else{self.config.users.push(uid);}})
this.$el.delegate('[node-type="confirm"]','touchstart',function(){var ret=[];$.each(self.config.users,function(i,user1){$.each(self.params.allusers,function(k,user){if(user.uid==user1){ret.push({'uid':user.uid,'userName':user.user_name});}})})
self.$el.remove()
typeof self.config.confirmCallback=='function'&&self.config.confirmCallback(ret);return false})
this.$el.delegate('[node-type="cancel"]','touchstart',function(){self.$el.remove();typeof self.config.cancelCallback=='function'&&self.config.cancelCallback();return false})
this.$el.delegate('.search-confirm','touchstart',function(){var keyword=self.$el.find('.ui-searchbar-input input').val();self.renderSearch(keyword);})
this.$el.delegate('.search-close','touchstart',function(){self.$el.find('.ui-searchbar-input input').val('');self.cancelSearch();})}}
userselect.init({users:opts.users,confirmCallback:function(result){typeof opts.onSuccess=="function"&&opts.onSuccess(result);}});}
tMobileSDK.selectDept=function(opts){if(window.deptselect!=undefined||window.deptselect!=null){deptselect=null;}
window.deptselect={params:{searchDeptUrl:'/mobile/inc/get_contactlist.php',$el:null,tpl:{'container':'<section class="ui-container userselect-ui-container deptselect-ui-container"> <footer class="ui-footer ui-footer-btn"> <div class="ui-footer ui-footer-stable ui-btn-group ui-border-t"> <button node-type="confirm" class="ui-btn-lg ui-btn-primary">确认</button> <button node-type="cancel" class="ui-btn-lg">取消</button> </div> </footer> <section class="ui-container"> <div class="ui-searchbar-wrap ui-border-b focus"> <div class="ui-searchbar ui-border-radius"> <i class="ui-icon-search"></i> <div class="ui-searchbar-text">部门名称</div> <div class="ui-searchbar-input"> <input value="" type="text" placeholder="部门名称" autocapitalize="off"> </div></div> <button type="button" class="ui-btn ui-btn-s search-confirm">搜索</button><button type="button" class="ui-btn ui-btn-s search-close">取消</button></div><ul class="ui-list ui-border-tb"></ul> </section></section>','dept':'<li class="ui-border-t" data-dept-id="<%=dept_id%>" data-dept-name="<%=dept_name%>"><label class="ui-checkbox"><input type="checkbox"><p><%=dept_name%></p></label></li>'},alldepts:[]},init:function(options){var self=this;this.config={depts:[],wrapper:'body',confirmCallback:function(){},cancelCallback:function(){}};this.config=$.extend(true,{},this.config,options);this.initDom();this.initDepts();this.bindEvent();},initDom:function(){$(this.config.wrapper).append(gmu.$.tpl(this.params.tpl.container,{}));this.$el=$('.deptselect-ui-container');},initDepts:function(){var self=this;var opts={A:'get_Dept',P:P,KWORD:''};$.getJSON(this.params.searchDeptUrl,opts,function(data){self.params.alldepts=data;self.render();});},render:function(){var self=this;var alldepts=this.params.alldepts;var depts=this.config.depts;var html='';$.each(alldepts,function(k,dept){var dest=gmu.$.tpl(self.params.tpl.dept,dept);html+=dest;})
this.$el.find('.ui-list').html(html);this.config.depts.forEach(function(dept_id){$('[data-dept-id="'+dept_id+'"]').find('input').prop('checked',true);});},renderSearch:function(keyword){this.$el.find('li').removeClass('hide');var hides=$.map(this.params.alldepts,function(dept){if(dept.dept_name.indexOf(keyword)==-1){return dept.dept_id;}});$.each(hides,function(k,dept_id){$('[data-dept-id="'+dept_id+'"]').addClass('hide');})},bindEvent:function(){var self=this;this.$el.delegate('input[type="checkbox"]','change',function(){var dept_id=$(this).parents('li').attr('data-dept-id');if($(this).prop('checked')){self.config.depts.push(dept_id);}else{self.config.depts.splice($.inArray(dept_id,self.config.depts),1);}})
this.$el.delegate('[node-type="confirm"]','tap',function(e){if(e&&e.stopPropagation){e.stopPropagation();}else{window.event.cancelBubble=true;}
var ret=[];$.each(self.config.depts,function(i,dept1){$.each(self.params.alldepts,function(k,dept){if(dept.dept_id==dept1){ret.push({'deptId':dept.dept_id,'deptName':dept.dept_name});}})})
self.$el.remove()
typeof self.config.confirmCallback=='function'&&self.config.confirmCallback(ret);})
this.$el.delegate('[node-type="cancel"]','tap',function(e){if(e&&e.stopPropagation){e.stopPropagation();}else{window.event.cancelBubble=true;}
self.$el.remove();typeof self.config.cancelCallback=='function'&&self.config.cancelCallback();})
this.$el.delegate('.search-confirm','tap',function(e){if(e&&e.stopPropagation){e.stopPropagation();}else{window.event.cancelBubble=true;}
var keyword=self.$el.find('.ui-searchbar-input input').val();self.renderSearch(keyword);})
this.$el.delegate('.search-close','tap',function(){self.$el.find('.ui-searchbar-input input').val('');var keyword='';self.renderSearch(keyword);})}}
deptselect.init({depts:opts.depts,confirmCallback:function(result){typeof opts.onSuccess=="function"&&opts.onSuccess(result);}});}
tMobileSDK.module2icon=function(module){var host=location.origin;var url=host+"/static/images/mobile_app/{module}.png".replace(/{module}/i,module);return url;}
tMobileSDK.ding=function(){};tMobileSDK.openUrl=function(opts){}
tMobileSDK.dingBtn=function(){};tMobileSDK.setLeft=function(){};
/* "/static/mobile/js/sdk/dd_sdk.js" */
tMobileSDK=window.tMobileSDK||{};tMobileSDK.ua=tMobileSDK.ua||{};tMobileSDK.ua.ios=!!navigator.userAgent.match(/(iphone)|(ipad)/ig);tMobileSDK.ready=function(func){dd.ready(func);};tMobileSDK.runFx=function(func){tMobileSDK.ua.ios?dd.ready(func):func();}
tMobileSDK.config=function(config){this._config=config;dd.config(config);};tMobileSDK.hideOptionMenu=function(){var me=this;setTimeout(function(){if(me._dingBtn){return;}
dd.biz.navigation.setRight({show:false,control:!true,showIcon:!true,text:'',onSuccess:function(result){tMobileSDK.share();},onFail:function(err){}});},100);};tMobileSDK.showOptionMenu=function(){};tMobileSDK.share=function(){dd.biz.util.share({type:2,onSuccess:function(){},onFail:function(err){}})};tMobileSDK.dingBtn=function(opts){dd.biz.navigation.setRight({show:true,control:true,showIcon:true,text:'DING',onSuccess:function(result){tMobileSDK.ding(opts);},onFail:function(err){}});this._dingBtn=true;};tMobileSDK.ding=function(opts){var options=$.extend(true,{users:[],corpId:this._config.corpId||'',type:1,attachment:{images:[''],},text:'',onSuccess:function(){},onFail:function(){}},opts);dd.ready(function(){dd.biz.ding.post(options);});};tMobileSDK.previewImage=function(opts){opts.urls.forEach(function(v,k){opts.urls[k]=tMobileSDK.addAuthCode(v);});opts.current=tMobileSDK.addAuthCode(opts.current);tMobileSDK.runFx(function(){dd.biz.util.previewImage({current:opts.current||0,urls:opts.urls||[],onSuccess:function(){},onFail:function(e){}});});};tMobileSDK.chooseImage=function(options){var defaultOpts={multiple:true,count:9,sizeType:['original','compressed'],sourceType:['album','camera'],success:function(res){this.cb&&this.cb(res);},cb:function(res){var localIds=res;pageConfig.imgLocalIds=localIds;}};var opts=$.extend(true,{},defaultOpts,options);tMobileSDK.runFx(function(){dd.biz.util.uploadImage({multiple:opts.multiple||true,max:opts.count||5,onSuccess:function(result){tMobileSDK.imgServerId=result;var imgServerId=tMobileSDK.imgServerId.join(',');$.ajax({type:'GET',url:'/pda/workflow/img_download.php',cache:false,data:{'ATTACHMENTS':imgServerId,"PLATFORM":"dd"},success:function(ret)
{ret=JSON.parse(ret);var result=[];$.each(ret,function(k,image){result.push({id:image['attach_id'],name:image['attach_name'],url:image['attach_url']});})
opts.onSuccess&&opts.onSuccess(result);return;}});},onFail:function(){},cb:function(res){}})});};tMobileSDK.uploadImage=function(opts){tMobileSDK.runFx(function(){dd.biz.util.uploadImage({multiple:opts.multiple||true,max:opts.count||9,onSuccess:function(result){tMobileSDK.uploadServerSuccess=true;tMobileSDK.imgServerId=result;opts.onSuccess&&opts.onSuccess(result);},onFail:function(e){opts.upErrorCb&&opts.upErrorCb(e);tMobileSDK.uploadServerSuccess=false;}})})};tMobileSDK.saveToServer=function(options){var count=0;function upload(){tMobileSDK.uploadImage({localId:pageConfig.imgLocalIds[count],cb:function(res){if(res.errMsg!='uploadImage:ok'){pageConfig.uploadWXserver=false;return false;}
pageConfig.imgServerId.push(res.serverId);count++;if(count<pageConfig.imgLocalIds.length){upload();}
if(count==pageConfig.imgLocalIds.length){pageConfig.uploadServerSuccess=true;options.cb&&options.cb();}}});}
upload();};tMobileSDK.selectFile=function(options){tMobileSDK.chooseImage(options);}
tMobileSDK.openUrl=function(opts){tMobileSDK.runFx(function(){dd.biz.util.openLink({url:opts.url,onSuccess:opts.onSuccess,onFail:opts.onFail})});}
tMobileSDK.synchroAgendaToMobile=function(opts){}
tMobileSDK.synchroAgendaToOA=function(opts){}
tMobileSDK.addAuthCode=function(url){var state=WXS.WXState;var baseUrl=WXS.URI;if(url.match(/^\/inc\/attach.php/)){url=url+"&PHPSESSID="+WXS.P.split(';')[1];}
if(url.match(/^\//)){url=window.location.protocol+"//"+window.location.host+url;}
return url;}
tMobileSDK.scanQRCode=function(options){tMobileSDK.runFx(function(){dd.biz.util.scan({type:'all',onSuccess:function(res){options.onSuccess&&options.onSuccess(res.text);},onFail:function(res){options.onFail&&options.onFail(res);}})})}
